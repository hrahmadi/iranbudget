<!DOCTYPE html>
<!-- saved from url=(0204)https://flourish-api.com/api/v1/live/template?api_key=3goF8OCJm_6uIV2mKjGuNtOFa5mZ2yCS-G0AZZRyOOLpJd2Ab6D35hjZgV3UcxGy&api_version=5.4.2&template=%40ambert%2Fhierarchical_sankey_chart&version=0.2.4&auto=1 -->
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="./global.css">
	<link rel="stylesheet" type="text/css" href="./style.css">
	<link href="./css" rel="stylesheet">
<title>Flourish template: USAFacts Hierarchical Sankey Chart</title><style>undefined</style><link rel="preconnect" href="https://fonts.googleapis.com/" crossorigin="use-credentials"><link rel="preconnect" href="https://fonts.gstatic.com/"><link rel="stylesheet" href="./css2"><!----><style>
:root { --color-hover: #FFF392; --color-highlight: #8F247F; --color-active: #FFFDE9; --color-text-active: #202122; --color-base: #E3007D; --color-text-base: #FFFFFF; --color-neg-hover: #2763A4; --color-neg-highlight: #00347B; --color-neg-active: #299ED9; --color-neg-text-active: #FFFFFF; --color-neg-base: #9BC6ED; --color-neg-text-base: #66c4ef; --color-short-text: #FFFFFF; --color-difference: #D9DADA; --color-difference-text: #FFFFFF; --color-background: rgba(255,255,255,0); --block-inner-padding: 16px; --block-outer-padding: 16px; --search-color-background: #202122; --search-color-box: #303134; --search-color-highlight: #202122; --search-color-subtitle: #C1C2C2; --tooltip-color-text: #FFFFFF; --color: [object Object]; --colors: [object Object]; --map-categorical-colors: [object Object]; --point-categorical-colors: [object Object]; --point-colors: [object Object]; --map-colors: [object Object] } .left { --color-highlight: #FFF392; --color-hover: #FFF392; --color-neg-hover: #2763A4; --color-active: #FFFDE9; --color-text-active: #202122; --color-base: #249EDC; --color-text-base: #202122; --color-neg-highlight: #00347B; --color-neg-active: #299ED9; --color-neg-text-active: #FFFFFF; --color-neg-base: #9BC6ED; --color-neg-text-base: #00347B; --color-short-text: #FFFFFF }
	</style></head>

<body>
    <div id="app" style="height: 100%"><div class="parent svelte-1koba4p bottom"><div class="container right svelte-50zyq5"><div class="dialog svelte-50zyq5"><div class="search-input svelte-50zyq5"><div style="width: 100%;"><div class="field svelte-w26pjf"><label class="svelte-w26pjf" for="sankey-ac"><span class="field-label svelte-w26pjf show">US government agency</span></label> <div class="autocomplete svelte-w26pjf"><div class="search_group svelte-w26pjf"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="svelte-w26pjf"><path d="M10.5557 10.5534C11.5256 9.58305 12.1254 8.24283 12.1254 6.76252C12.1254 3.8009 9.72452 1.40002 6.76289 1.40002C3.80126 1.40002 1.40039 3.8009 1.40039 6.76252C1.40039 9.72415 3.80126 12.125 6.76289 12.125C8.24421 12.125 9.58524 11.5244 10.5557 10.5534ZM10.5557 10.5534L14.6004 14.6" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path></svg> <input autocapitalize="none" type="text" autocomplete="off" aria-autocomplete="list" role="combobox" aria-expanded="false" class="svelte-w26pjf" id="sankey-ac" name="autocomplete" aria-controls="autocomplete-options--autocomplete"></div> <!----></div></div><!----></div></div><!----> <!----></div></div><!----> <div class="chart svelte-t3ic35"><!----><div class="columns right svelte-1exlong" style="column-gap: 30px; flex-direction: row;"><div tabindex="-1" class="column narrow svelte-1exlong scrollable" data-level="0" style="row-gap: 30px; width: 36px; flex: 0 0 auto;"><div class="spacer svelte-1exlong" style="margin-bottom: -30px; height: 80px; min-height: 80px; max-height: 80px; order: 0;"></div> <div class="group svelte-1exlong" style="row-gap: 0px;"><div class="block svelte-1exlong" data-key="0" style="margin-top: 0px; height: 732px;"><p class="svelte-1exlong" style="height: auto; max-height: 726px; margin-bottom: 3px; -webkit-line-clamp: 45;"><span class="value svelte-1exlong">$6.8T</span><!----> <!----> Spending</p> <!----></div><!----> <!----></div><!----></div><div tabindex="-1" class="column default svelte-1exlong scrollable" data-level="1" style="row-gap: 30px; width: auto; flex: 1 1 0%;"><div class="spacer svelte-1exlong" style="margin-bottom: -30px; height: 80px; min-height: 80px; max-height: 80px; order: 0;"></div> <div class="group svelte-1exlong" data-parent="Safety" style="row-gap: 10px;"><div class="block svelte-1exlong short" data-parent-key="0" data-key="1" style="margin-top: 10px; height: 11.3619px;"><p class="svelte-1exlong" style="height: 16px; max-height: inherit; margin-bottom: inherit;"><span class="value svelte-1exlong">$105B</span><!----> <!----> Safety</p> <!----></div><div class="block svelte-1exlong" data-parent-key="0" data-key="12" style="height: 75.0174px;"><p class="svelte-1exlong" style="height: auto; max-height: inherit; margin-bottom: inherit; -webkit-line-clamp: 4;"><span class="value svelte-1exlong">$695B</span><!----> <br><!----> Economy &amp; Std of Living</p> <!----></div><div class="block svelte-1exlong" data-parent-key="0" data-key="44" style="height: 157.729px;"><p class="svelte-1exlong" style="height: auto; max-height: inherit; margin-bottom: inherit; -webkit-line-clamp: 9;"><span class="value svelte-1exlong">$1.5T</span><!----> <br><!----> Social Security</p> <!----></div><div class="block svelte-1exlong" data-parent-key="0" data-key="51" style="height: 94.314px;"><p class="svelte-1exlong" style="height: auto; max-height: inherit; margin-bottom: inherit; -webkit-line-clamp: 5;"><span class="value svelte-1exlong">$874B</span><!----> <br><!----> Medicare</p> <!----></div><div class="block svelte-1exlong" data-parent-key="0" data-key="54" style="height: 105.07px;"><p class="svelte-1exlong" style="height: auto; max-height: inherit; margin-bottom: inherit; -webkit-line-clamp: 6;"><span class="value svelte-1exlong">$973B</span><!----> <br><!----> Obligations</p> <!----></div><div class="block svelte-1exlong" data-parent-key="0" data-key="63" style="height: 140.07px;"><p class="svelte-1exlong" style="height: auto; max-height: inherit; margin-bottom: inherit; -webkit-line-clamp: 8;"><span class="value svelte-1exlong">$1.3T</span><!----> <br><!----> Defense and Foreign Affairs</p> <!----></div><div class="block svelte-1exlong" data-parent-key="0" data-key="78" style="height: 118.64px;"><p class="svelte-1exlong" style="height: auto; max-height: inherit; margin-bottom: inherit; -webkit-line-clamp: 7;"><span class="value svelte-1exlong">$1.1T</span><!----> <br><!----> Transfers to States</p> <!----></div><div class="block svelte-1exlong" data-parent-key="0" data-key="122" style="height: 29.7978px;"><p class="svelte-1exlong" style="height: auto; max-height: inherit; margin-bottom: inherit; -webkit-line-clamp: 1;"><span class="value svelte-1exlong">$276B</span><!----> <!----> Other</p> <!----></div><!----> <!----></div><!----></div><div tabindex="-1" class="column default svelte-1exlong scrollable" data-level="2" style="row-gap: 30px; width: auto; flex: 1 1 0%;"><div class="spacer svelte-1exlong" style="margin-bottom: -30px; height: 80px; min-height: 80px; max-height: 80px; order: 0;"></div> <div class="group svelte-1exlong" data-parent="Crime and Disaster" style="row-gap: 10px;"><div class="block svelte-1exlong short" data-parent-key="1" data-key="2" style="margin-top: 20px; height: 10.2604px;"><p class="svelte-1exlong" style="height: 16px; max-height: inherit; margin-bottom: inherit;"><span class="value svelte-1exlong">$95.0B</span><!----> <!----> Crime and Disaster</p> <!----></div><div class="block svelte-1exlong short" data-parent-key="1" data-key="7" style="height: 1.10152px;"><p class="svelte-1exlong" style="height: 16px; max-height: inherit; margin-bottom: inherit;"><span class="value svelte-1exlong">$10.2B</span><!----> <!----> Safeguarding Consumers and Employees</p> <!----></div><!----> <!----></div><div class="group svelte-1exlong" data-parent="Economy and Infrastructure" style="row-gap: 10px;"><div class="block svelte-1exlong" data-parent-key="12" data-key="13" style="height: 16.0761px;"><p class="svelte-1exlong" style="height: auto; max-height: inherit; margin-bottom: inherit; -webkit-line-clamp: 1;"><span class="value svelte-1exlong">$149B</span><!----> <!----> Economy and Infrastructure</p> <!----></div><div class="block svelte-1exlong short" data-parent-key="12" data-key="22" style="height: 9.50454px;"><p class="svelte-1exlong" style="height: 16px; max-height: inherit; margin-bottom: inherit;"><span class="value svelte-1exlong">$88.0B</span><!----> <!----> Health</p> <!----></div><div class="block svelte-1exlong" data-parent-key="12" data-key="27" style="height: 49.4368px;"><p class="svelte-1exlong" style="height: auto; max-height: inherit; margin-bottom: inherit; -webkit-line-clamp: 3;"><span class="value svelte-1exlong">$458B</span><!----> <br><!----> Standard of Living and Aid to the Disadvantaged</p> <!----></div><!----> <!----></div><div class="group svelte-1exlong" data-parent="Disability (FDI)" style="row-gap: 10px;"><div class="block svelte-1exlong" data-parent-key="44" data-key="45" style="height: 16.7813px;"><p class="svelte-1exlong" style="height: auto; max-height: inherit; margin-bottom: inherit; -webkit-line-clamp: 1;"><span class="value svelte-1exlong">$155B</span><!----> <!----> Disability (FDI)</p> <!----></div><div class="block svelte-1exlong" data-parent-key="44" data-key="47" style="height: 135.148px;"><p class="svelte-1exlong" style="height: auto; max-height: inherit; margin-bottom: inherit; -webkit-line-clamp: 8;"><span class="value svelte-1exlong">$1.3T</span><!----> <br><!----> Retirement (FOASI)</p> <!----></div><div class="block svelte-1exlong short" data-parent-key="44" data-key="49" style="height: 5.8001px;"><p class="svelte-1exlong" style="height: 16px; max-height: inherit; margin-bottom: inherit;"><span class="value svelte-1exlong">$53.7B</span><!----> <!----> Other Social Security</p> <!----></div><!----> <!----></div><div class="group svelte-1exlong" data-parent="null" style="row-gap: 10px;"><div class="block svelte-1exlong" data-parent-key="51" data-key="52" style="pointer-events: none; opacity: 0; height: 94.314px; margin-top: -94.314px;"><p class="svelte-1exlong" style="height: auto; max-height: inherit; margin-bottom: inherit; -webkit-line-clamp: 5;"><span class="value svelte-1exlong">$874B</span><!----> <br><!----> null</p> <!----></div><!----> <!----></div><div class="group svelte-1exlong" data-parent="Contributions to Government Retirement and Disability Fund" style="row-gap: 10px;"><div class="block svelte-1exlong negative short" data-parent-key="54" data-key="55" style="height: 11.9532px;"><p class="svelte-1exlong" style="height: 16px; max-height: inherit; margin-bottom: inherit;"><span class="value svelte-1exlong">-$111B</span><!----> <!----> Contributions to Government Retirement and Disability Fund</p> <!----></div><div class="block svelte-1exlong negative short" data-parent-key="54" data-key="57" style="height: 0.858775px;"><p class="svelte-1exlong" style="height: 16px; max-height: inherit; margin-bottom: inherit;"><span class="value svelte-1exlong">-$7.95B</span><!----> <!----> Employee Contributions for Retirement and Disability</p> <!----></div><div class="block svelte-1exlong" data-parent-key="54" data-key="59" style="height: 23.0389px;"><p class="svelte-1exlong" style="height: auto; max-height: inherit; margin-bottom: inherit; -webkit-line-clamp: 1;"><span class="value svelte-1exlong">$213B</span><!----> <!----> Employee Retirement and Disability Benefits</p> <!----></div><div class="block svelte-1exlong" data-parent-key="54" data-key="61" style="height: 94.8426px;"><p class="svelte-1exlong" style="height: auto; max-height: inherit; margin-bottom: inherit; -webkit-line-clamp: 5;"><span class="value svelte-1exlong">$878B</span><!----> <br><!----> Net Interest on Debt</p> <!----></div><!----> <!----></div><div class="group svelte-1exlong" data-parent="Foreign Affairs" style="row-gap: 10px;"><div class="block svelte-1exlong short" data-parent-key="63" data-key="64" style="height: 7.76147px;"><p class="svelte-1exlong" style="height: 16px; max-height: inherit; margin-bottom: inherit;"><span class="value svelte-1exlong">$71.9B</span><!----> <!----> Foreign Affairs</p> <!----></div><div class="block svelte-1exlong short" data-parent-key="63" data-key="68" style="height: 2.79604px;"><p class="svelte-1exlong" style="height: 16px; max-height: inherit; margin-bottom: inherit;"><span class="value svelte-1exlong">$25.9B</span><!----> <!----> Immigration and Border Security</p> <!----></div><div class="block svelte-1exlong" data-parent-key="63" data-key="70" style="height: 94.6328px;"><p class="svelte-1exlong" style="height: auto; max-height: inherit; margin-bottom: inherit; -webkit-line-clamp: 5;"><span class="value svelte-1exlong">$877B</span><!----> <br><!----> National Defense</p> <!----></div><div class="block svelte-1exlong" data-parent-key="63" data-key="72" style="height: 34.8795px;"><p class="svelte-1exlong" style="height: auto; max-height: inherit; margin-bottom: inherit; -webkit-line-clamp: 2;"><span class="value svelte-1exlong">$323B</span><!----> <!----> Support for Veterans</p> <!----></div><!----> <!----></div><div class="group svelte-1exlong" data-parent="Support for Veterans" style="row-gap: 10px;"><div class="block svelte-1exlong short" data-parent-key="78" data-key="79" style="height: 0.237487px;"><p class="svelte-1exlong" style="height: 16px; max-height: inherit; margin-bottom: inherit;"><span class="value svelte-1exlong">$2.20B</span><!----> <!----> Support for Veterans</p> <!----></div><div class="block svelte-1exlong short" data-parent-key="78" data-key="82" style="height: 3.45972px;"><p class="svelte-1exlong" style="height: 16px; max-height: inherit; margin-bottom: inherit;"><span class="value svelte-1exlong">$32.0B</span><!----> <!----> Crime and Disaster</p> <!----></div><div class="block svelte-1exlong short" data-parent-key="78" data-key="86" style="height: 0.0292413px;"><p class="svelte-1exlong" style="height: 16px; max-height: inherit; margin-bottom: inherit;"><span class="value svelte-1exlong">$271M</span><!----> <!----> Safeguarding Consumers and Employees</p> <!----></div><div class="block svelte-1exlong short" data-parent-key="78" data-key="89" style="pointer-events: none; opacity: 0; height: 0.780131px; margin-top: -0.780131px;"><p class="svelte-1exlong" style="height: 16px; max-height: inherit; margin-bottom: inherit;"><span class="value svelte-1exlong">$7.23B</span><!----> <!----> null</p> <!----></div><div class="block svelte-1exlong short" data-parent-key="78" data-key="91" style="height: 12.0519px;"><p class="svelte-1exlong" style="height: 16px; max-height: inherit; margin-bottom: inherit;"><span class="value svelte-1exlong">$112B</span><!----> <!----> Economy and Infrastructure</p> <!----></div><div class="block svelte-1exlong short" data-parent-key="78" data-key="96" style="height: 1.45141px;"><p class="svelte-1exlong" style="height: 16px; max-height: inherit; margin-bottom: inherit;"><span class="value svelte-1exlong">$13.4B</span><!----> <!----> Health</p> <!----></div><div class="block svelte-1exlong" data-parent-key="78" data-key="99" style="height: 92.0049px;"><p class="svelte-1exlong" style="height: auto; max-height: inherit; margin-bottom: inherit; -webkit-line-clamp: 5;"><span class="value svelte-1exlong">$852B</span><!----> <br><!----> Standard of Living and Aid to the Disadvantaged</p> <!----></div><div class="block svelte-1exlong short" data-parent-key="78" data-key="111" style="height: 7.0387px;"><p class="svelte-1exlong" style="height: 16px; max-height: inherit; margin-bottom: inherit;"><span class="value svelte-1exlong">$65.2B</span><!----> <!----> Education</p> <!----></div><div class="block svelte-1exlong short" data-parent-key="78" data-key="116" style="height: 1.58648px;"><p class="svelte-1exlong" style="height: 16px; max-height: inherit; margin-bottom: inherit;"><span class="value svelte-1exlong">$14.7B</span><!----> <!----> Sustainability and Self-Sufficiency</p> <!----></div><div class="block svelte-1exlong short" data-parent-key="78" data-key="120" style="height: 0.0003323px;"><p class="svelte-1exlong" style="height: 16px; max-height: inherit; margin-bottom: inherit;"><span class="value svelte-1exlong">$3.08M</span><!----> <!----> Disability (FDI)</p> <!----></div><!----> <!----></div><div class="group svelte-1exlong" data-parent="null" style="row-gap: 10px;"><div class="block svelte-1exlong short" data-parent-key="122" data-key="123" style="pointer-events: none; opacity: 0; height: 5.53702px; margin-top: -5.53702px;"><p class="svelte-1exlong" style="height: 16px; max-height: inherit; margin-bottom: inherit;"><span class="value svelte-1exlong">$51.3B</span><!----> <!----> null</p> <!----></div><div class="block svelte-1exlong" data-parent-key="122" data-key="125" style="height: 18.4707px;"><p class="svelte-1exlong" style="height: auto; max-height: inherit; margin-bottom: inherit; -webkit-line-clamp: 1;"><span class="value svelte-1exlong">$171B</span><!----> <!----> Education</p> <!----></div><div class="block svelte-1exlong short" data-parent-key="122" data-key="130" style="height: 9.39653px;"><p class="svelte-1exlong" style="height: 16px; max-height: inherit; margin-bottom: inherit;"><span class="value svelte-1exlong">$87.0B</span><!----> <!----> Sustainability and Self-Sufficiency</p> <!----></div><div class="block svelte-1exlong negative short" data-parent-key="122" data-key="134" style="height: 2.84665px;"><p class="svelte-1exlong" style="height: 16px; max-height: inherit; margin-bottom: inherit;"><span class="value svelte-1exlong">-$26.4B</span><!----> <!----> General Housing Support</p> <!----></div><div class="block svelte-1exlong negative short" data-parent-key="122" data-key="136" style="height: 0.737152px;"><p class="svelte-1exlong" style="height: 16px; max-height: inherit; margin-bottom: inherit;"><span class="value svelte-1exlong">-$6.83B</span><!----> <!----> GSE</p> <!----></div><div class="block svelte-1exlong negative short" data-parent-key="122" data-key="138" style="height: 0.0226398px;"><p class="svelte-1exlong" style="height: 16px; max-height: inherit; margin-bottom: inherit;"><span class="value svelte-1exlong">-$210M</span><!----> <!----> Rural Housing</p> <!----></div><!----> <!----></div><!----></div><div tabindex="-1" class="column default svelte-1exlong scrollable" data-level="3" style="row-gap: 30px; width: auto; flex: 1 1 0%;"><div class="spacer svelte-1exlong" style="margin-bottom: -30px; height: 80px; min-height: 80px; max-height: 80px; order: 0;"></div> <div class="group svelte-1exlong" data-parent="Disaster Relief" style="row-gap: 10px;"><div class="block svelte-1exlong short" data-parent-key="2" data-key="3" style="margin-top: 30px; height: 4.6269px;"><p class="svelte-1exlong" style="height: 16px; max-height: inherit; margin-bottom: inherit;"><span class="value svelte-1exlong">$42.9B</span><!----> <!----> Disaster Relief</p> <!----></div><div class="block svelte-1exlong short" data-parent-key="2" data-key="4" style="height: 2.07515px;"><p class="svelte-1exlong" style="height: 16px; max-height: inherit; margin-bottom: inherit;"><span class="value svelte-1exlong">$19.2B</span><!----> <!----> Justice System</p> <!----></div><div class="block svelte-1exlong short" data-parent-key="2" data-key="5" style="height: 0.977511px;"><p class="svelte-1exlong" style="height: 16px; max-height: inherit; margin-bottom: inherit;"><span class="value svelte-1exlong">$9.05B</span><!----> <!----> Corrections</p> <!----></div><div class="block svelte-1exlong short" data-parent-key="2" data-key="6" style="height: 2.58081px;"><p class="svelte-1exlong" style="height: 16px; max-height: inherit; margin-bottom: inherit;"><span class="value svelte-1exlong">$23.9B</span><!----> <!----> Law Enforcement</p> <!----></div><!----> <!----></div><div class="group svelte-1exlong" data-parent="Consumer Protection" style="row-gap: 10px;"><div class="block svelte-1exlong short" data-parent-key="7" data-key="8" style="height: 0.805676px;"><p class="svelte-1exlong" style="height: 16px; max-height: inherit; margin-bottom: inherit;"><span class="value svelte-1exlong">$7.46B</span><!----> <!----> Consumer Protection</p> <!----></div><div class="block svelte-1exlong short" data-parent-key="7" data-key="9" style="height: 0.280203px;"><p class="svelte-1exlong" style="height: 16px; max-height: inherit; margin-bottom: inherit;"><span class="value svelte-1exlong">$2.60B</span><!----> <!----> Employee Protection</p> <!----></div><div class="block svelte-1exlong short" data-parent-key="7" data-key="10" style="height: 0.0398813px;"><p class="svelte-1exlong" style="height: 16px; max-height: inherit; margin-bottom: inherit;"><span class="value svelte-1exlong">$369M</span><!----> <!----> Other Business Regulation</p> <!----></div><div class="block svelte-1exlong negative short" data-parent-key="7" data-key="11" style="height: 0.0242366px;"><p class="svelte-1exlong" style="height: 16px; max-height: inherit; margin-bottom: inherit;"><span class="value svelte-1exlong">-$224M</span><!----> <!----> Patents and Copyrights</p> <!----></div><!----> <!----></div><div class="group svelte-1exlong" data-parent="Banking and Finance" style="row-gap: 10px;"><div class="block svelte-1exlong short" data-parent-key="13" data-key="14" style="height: 3.97238px;"><p class="svelte-1exlong" style="height: 16px; max-height: inherit; margin-bottom: inherit;"><span class="value svelte-1exlong">$36.8B</span><!----> <!----> Banking and Finance</p> <!----></div><div class="block svelte-1exlong short" data-parent-key="13" data-key="15" style="height: 0.525871px;"><p class="svelte-1exlong" style="height: 16px; max-height: inherit; margin-bottom: inherit;"><span class="value svelte-1exlong">$4.87B</span><!----> <!----> Community and Regional Development</p> <!----></div><div class="block svelte-1exlong short" data-parent-key="13" data-key="16" style="height: 0.403134px;"><p class="svelte-1exlong" style="height: 16px; max-height: inherit; margin-bottom: inherit;"><span class="value svelte-1exlong">$3.73B</span><!----> <!----> General Commerce</p> <!----></div><div class="block svelte-1exlong short" data-parent-key="13" data-key="17" style="height: 1.87592px;"><p class="svelte-1exlong" style="height: 16px; max-height: inherit; margin-bottom: inherit;"><span class="value svelte-1exlong">$17.4B</span><!----> <!----> General science and basic research</p> <!----></div><div class="block svelte-1exlong short" data-parent-key="13" data-key="18" style="height: 0.428087px;"><p class="svelte-1exlong" style="height: 16px; max-height: inherit; margin-bottom: inherit;"><span class="value svelte-1exlong">$3.97B</span><!----> <!----> Postal Service</p> <!----></div><div class="block svelte-1exlong short" data-parent-key="13" data-key="19" style="height: 2.59877px;"><p class="svelte-1exlong" style="height: 16px; max-height: inherit; margin-bottom: inherit;"><span class="value svelte-1exlong">$24.1B</span><!----> <!----> Space</p> <!----></div><div class="block svelte-1exlong short" data-parent-key="13" data-key="20" style="height: 1.93836px;"><p class="svelte-1exlong" style="height: 16px; max-height: inherit; margin-bottom: inherit;"><span class="value svelte-1exlong">$18.0B</span><!----> <!----> Technology Infrastructure</p> <!----></div><div class="block svelte-1exlong short" data-parent-key="13" data-key="21" style="height: 4.33356px;"><p class="svelte-1exlong" style="height: 16px; max-height: inherit; margin-bottom: inherit;"><span class="value svelte-1exlong">$40.1B</span><!----> <!----> Transportation</p> <!----></div><!----> <!----></div><div class="group svelte-1exlong" data-parent="Medicare and Medicaid Unallocable" style="row-gap: 10px;"><div class="block svelte-1exlong short" data-parent-key="22" data-key="23" style="height: 0.0460991px;"><p class="svelte-1exlong" style="height: 16px; max-height: inherit; margin-bottom: inherit;"><span class="value svelte-1exlong">$427M</span><!----> <!----> Medicare and Medicaid Unallocable</p> <!----></div><div class="block svelte-1exlong short" data-parent-key="22" data-key="24" style="height: 0.0379148px;"><p class="svelte-1exlong" style="height: 16px; max-height: inherit; margin-bottom: inherit;"><span class="value svelte-1exlong">$351M</span><!----> <!----> Other Health</p> <!----></div><div class="block svelte-1exlong negative short" data-parent-key="22" data-key="25" style="height: 0.0251043px;"><p class="svelte-1exlong" style="height: 16px; max-height: inherit; margin-bottom: inherit;"><span class="value svelte-1exlong">-$233M</span><!----> <!----> Other Medical Assistance to Persons</p> <!----></div><div class="block svelte-1exlong short" data-parent-key="22" data-key="26" style="height: 9.44563px;"><p class="svelte-1exlong" style="height: 16px; max-height: inherit; margin-bottom: inherit;"><span class="value svelte-1exlong">$87.5B</span><!----> <!----> Public Health</p> <!----></div><!----> <!----></div><div class="group svelte-1exlong" data-parent="Employment and Training" style="row-gap: 10px;"><div class="block svelte-1exlong short" data-parent-key="27" data-key="28" style="height: 0.43933px;"><p class="svelte-1exlong" style="height: 16px; max-height: inherit; margin-bottom: inherit;"><span class="value svelte-1exlong">$4.07B</span><!----> <!----> Employment and Training</p> <!----></div><div class="block svelte-1exlong short" data-parent-key="27" data-key="29" style="height: 2.22868px;"><p class="svelte-1exlong" style="height: 16px; max-height: inherit; margin-bottom: inherit;"><span class="value svelte-1exlong">$20.6B</span><!----> <!----> Housing Assistance</p> <!----></div><div class="block svelte-1exlong short" data-parent-key="27" data-key="30" style="height: 0.197481px;"><p class="svelte-1exlong" style="height: 16px; max-height: inherit; margin-bottom: inherit;"><span class="value svelte-1exlong">$1.83B</span><!----> <!----> Child and Social Services</p> <!----></div><div class="block svelte-1exlong short" data-parent-key="27" data-key="31" style="height: 0.0037398px;"><p class="svelte-1exlong" style="height: 16px; max-height: inherit; margin-bottom: inherit;"><span class="value svelte-1exlong">$34.6M</span><!----> <!----> Child Care Assistance</p> <!----></div><div class="block svelte-1exlong short" data-parent-key="27" data-key="32" style="height: 2.8337px;"><p class="svelte-1exlong" style="height: 16px; max-height: inherit; margin-bottom: inherit;"><span class="value svelte-1exlong">$26.2B</span><!----> <!----> Child Tax Credit</p> <!----></div><div class="block svelte-1exlong short" data-parent-key="27" data-key="33" style="height: 6.47918px;"><p class="svelte-1exlong" style="height: 16px; max-height: inherit; margin-bottom: inherit;"><span class="value svelte-1exlong">$60.0B</span><!----> <!----> EITC</p> <!----></div><div class="block svelte-1exlong short" data-parent-key="27" data-key="34" style="height: 0.0009716px;"><p class="svelte-1exlong" style="height: 16px; max-height: inherit; margin-bottom: inherit;"><span class="value svelte-1exlong">$9.00M</span><!----> <!----> Medicaid and CHIP</p> <!----></div><div class="block svelte-1exlong short" data-parent-key="27" data-key="35" style="height: 0.660921px;"><p class="svelte-1exlong" style="height: 16px; max-height: inherit; margin-bottom: inherit;"><span class="value svelte-1exlong">$6.12B</span><!----> <!----> Other Cash Programs</p> <!----></div><div class="block svelte-1exlong short" data-parent-key="27" data-key="36" style="height: 11.9052px;"><p class="svelte-1exlong" style="height: 16px; max-height: inherit; margin-bottom: inherit;"><span class="value svelte-1exlong">$110B</span><!----> <!----> Other Medical Assistance to Poor</p> <!----></div><div class="block svelte-1exlong short" data-parent-key="27" data-key="37" style="height: 0px;"><p class="svelte-1exlong" style="height: 16px; max-height: inherit; margin-bottom: inherit;"><span class="value svelte-1exlong">$0.00</span><!----> <!----> Other Non-Cash Programs</p> <!----></div><div class="block svelte-1exlong short" data-parent-key="27" data-key="38" style="height: 3.7487px;"><p class="svelte-1exlong" style="height: 16px; max-height: inherit; margin-bottom: inherit;"><span class="value svelte-1exlong">$34.7B</span><!----> <!----> Pell Grants</p> <!----></div><div class="block svelte-1exlong short" data-parent-key="27" data-key="39" style="height: 0.521107px;"><p class="svelte-1exlong" style="height: 16px; max-height: inherit; margin-bottom: inherit;"><span class="value svelte-1exlong">$4.83B</span><!----> <!----> Refugee Assistance</p> <!----></div><div class="block svelte-1exlong short" data-parent-key="27" data-key="40" style="height: 10.6273px;"><p class="svelte-1exlong" style="height: 16px; max-height: inherit; margin-bottom: inherit;"><span class="value svelte-1exlong">$98.4B</span><!----> <!----> SNAP (and other nutritional programs)</p> <!----></div><div class="block svelte-1exlong short" data-parent-key="27" data-key="41" style="height: 6.3507px;"><p class="svelte-1exlong" style="height: 16px; max-height: inherit; margin-bottom: inherit;"><span class="value svelte-1exlong">$58.8B</span><!----> <!----> SSI</p> <!----></div><div class="block svelte-1exlong short" data-parent-key="27" data-key="42" style="height: 0.000347px;"><p class="svelte-1exlong" style="height: 16px; max-height: inherit; margin-bottom: inherit;"><span class="value svelte-1exlong">$3.21M</span><!----> <!----> TANF</p> <!----></div><div class="block svelte-1exlong short" data-parent-key="27" data-key="43" style="height: 3.43957px;"><p class="svelte-1exlong" style="height: 16px; max-height: inherit; margin-bottom: inherit;"><span class="value svelte-1exlong">$31.9B</span><!----> <!----> Unemployment Insurance</p> <!----></div><!----> <!----></div><div class="group svelte-1exlong" data-parent="null" style="row-gap: 10px;"><div class="block svelte-1exlong" data-parent-key="45" data-key="46" style="pointer-events: none; opacity: 0; height: 16.7813px; margin-top: -16.7813px;"><p class="svelte-1exlong" style="height: auto; max-height: inherit; margin-bottom: inherit; -webkit-line-clamp: 1;"><span class="value svelte-1exlong">$155B</span><!----> <!----> null</p> <!----></div><!----> <!----></div><div class="group svelte-1exlong" data-parent="null" style="row-gap: 10px;"><div class="block svelte-1exlong" data-parent-key="47" data-key="48" style="pointer-events: none; opacity: 0; height: 135.148px; margin-top: -135.148px;"><p class="svelte-1exlong" style="height: auto; max-height: inherit; margin-bottom: inherit; -webkit-line-clamp: 8;"><span class="value svelte-1exlong">$1.3T</span><!----> <br><!----> null</p> <!----></div><!----> <!----></div><div class="group svelte-1exlong" data-parent="null" style="row-gap: 10px;"><div class="block svelte-1exlong short" data-parent-key="49" data-key="50" style="pointer-events: none; opacity: 0; height: 5.8001px; margin-top: -5.8001px;"><p class="svelte-1exlong" style="height: 16px; max-height: inherit; margin-bottom: inherit;"><span class="value svelte-1exlong">$53.7B</span><!----> <!----> null</p> <!----></div><!----> <!----></div><div class="group svelte-1exlong" data-parent="null" style="row-gap: 10px;"><div class="block svelte-1exlong" data-parent-key="52" data-key="53" style="pointer-events: none; opacity: 0; height: 94.314px; margin-top: -94.314px;"><p class="svelte-1exlong" style="height: auto; max-height: inherit; margin-bottom: inherit; -webkit-line-clamp: 5;"><span class="value svelte-1exlong">$874B</span><!----> <br><!----> null</p> <!----></div><!----> <!----></div><div class="group svelte-1exlong" data-parent="null" style="row-gap: 10px;"><div class="block svelte-1exlong negative short" data-parent-key="55" data-key="56" style="pointer-events: none; opacity: 0; height: 11.9532px; margin-top: -11.9532px;"><p class="svelte-1exlong" style="height: 16px; max-height: inherit; margin-bottom: inherit;"><span class="value svelte-1exlong">-$111B</span><!----> <!----> null</p> <!----></div><!----> <!----></div><div class="group svelte-1exlong" data-parent="null" style="row-gap: 10px;"><div class="block svelte-1exlong negative short" data-parent-key="57" data-key="58" style="pointer-events: none; opacity: 0; height: 0.858775px; margin-top: -0.858775px;"><p class="svelte-1exlong" style="height: 16px; max-height: inherit; margin-bottom: inherit;"><span class="value svelte-1exlong">-$7.95B</span><!----> <!----> null</p> <!----></div><!----> <!----></div><div class="group svelte-1exlong" data-parent="null" style="row-gap: 10px;"><div class="block svelte-1exlong" data-parent-key="59" data-key="60" style="pointer-events: none; opacity: 0; height: 23.0389px; margin-top: -23.0389px;"><p class="svelte-1exlong" style="height: auto; max-height: inherit; margin-bottom: inherit; -webkit-line-clamp: 1;"><span class="value svelte-1exlong">$213B</span><!----> <!----> null</p> <!----></div><!----> <!----></div><div class="group svelte-1exlong" data-parent="null" style="row-gap: 10px;"><div class="block svelte-1exlong" data-parent-key="61" data-key="62" style="pointer-events: none; opacity: 0; height: 94.8426px; margin-top: -94.8426px;"><p class="svelte-1exlong" style="height: auto; max-height: inherit; margin-bottom: inherit; -webkit-line-clamp: 5;"><span class="value svelte-1exlong">$878B</span><!----> <br><!----> null</p> <!----></div><!----> <!----></div><div class="group svelte-1exlong" data-parent="International Development and Humanitarian Assistance" style="row-gap: 10px;"><div class="block svelte-1exlong short" data-parent-key="64" data-key="65" style="height: 4.03014px;"><p class="svelte-1exlong" style="height: 16px; max-height: inherit; margin-bottom: inherit;"><span class="value svelte-1exlong">$37.3B</span><!----> <!----> International Development and Humanitarian Assistance</p> <!----></div><div class="block svelte-1exlong short" data-parent-key="64" data-key="66" style="height: 2.43243px;"><p class="svelte-1exlong" style="height: 16px; max-height: inherit; margin-bottom: inherit;"><span class="value svelte-1exlong">$22.5B</span><!----> <!----> International Security Assistance</p> <!----></div><div class="block svelte-1exlong short" data-parent-key="64" data-key="67" style="height: 1.29891px;"><p class="svelte-1exlong" style="height: 16px; max-height: inherit; margin-bottom: inherit;"><span class="value svelte-1exlong">$12.0B</span><!----> <!----> Other Foreign Affairs</p> <!----></div><!----> <!----></div><div class="group svelte-1exlong" data-parent="null" style="row-gap: 10px;"><div class="block svelte-1exlong short" data-parent-key="68" data-key="69" style="pointer-events: none; opacity: 0; height: 2.79604px; margin-top: -2.79604px;"><p class="svelte-1exlong" style="height: 16px; max-height: inherit; margin-bottom: inherit;"><span class="value svelte-1exlong">$25.9B</span><!----> <!----> null</p> <!----></div><!----> <!----></div><div class="group svelte-1exlong" data-parent="null" style="row-gap: 10px;"><div class="block svelte-1exlong" data-parent-key="70" data-key="71" style="pointer-events: none; opacity: 0; height: 94.6328px; margin-top: -94.6328px;"><p class="svelte-1exlong" style="height: auto; max-height: inherit; margin-bottom: inherit; -webkit-line-clamp: 5;"><span class="value svelte-1exlong">$877B</span><!----> <br><!----> null</p> <!----></div><!----> <!----></div><div class="group svelte-1exlong" data-parent="Other Veterans Services" style="row-gap: 10px;"><div class="block svelte-1exlong short" data-parent-key="72" data-key="73" style="height: 3.37558px;"><p class="svelte-1exlong" style="height: 16px; max-height: inherit; margin-bottom: inherit;"><span class="value svelte-1exlong">$31.3B</span><!----> <!----> Other Veterans Services</p> <!----></div><div class="block svelte-1exlong short" data-parent-key="72" data-key="74" style="height: 0.0689733px;"><p class="svelte-1exlong" style="height: 16px; max-height: inherit; margin-bottom: inherit;"><span class="value svelte-1exlong">$639M</span><!----> <!----> Veterans Housing</p> <!----></div><div class="block svelte-1exlong short" data-parent-key="72" data-key="75" style="height: 12.5343px;"><p class="svelte-1exlong" style="height: 16px; max-height: inherit; margin-bottom: inherit;"><span class="value svelte-1exlong">$116B</span><!----> <!----> Veterans Medical Care</p> <!----></div><div class="block svelte-1exlong" data-parent-key="72" data-key="76" style="height: 17.4435px;"><p class="svelte-1exlong" style="height: auto; max-height: inherit; margin-bottom: inherit; -webkit-line-clamp: 1;"><span class="value svelte-1exlong">$162B</span><!----> <!----> Veterans Pension &amp; Disability Benefits</p> <!----></div><div class="block svelte-1exlong short" data-parent-key="72" data-key="77" style="height: 1.45714px;"><p class="svelte-1exlong" style="height: 16px; max-height: inherit; margin-bottom: inherit;"><span class="value svelte-1exlong">$13.5B</span><!----> <!----> Veterans Readjustment Benefits</p> <!----></div><!----> <!----></div><div class="group svelte-1exlong" data-parent="Other Veterans Services" style="row-gap: 10px;"><div class="block svelte-1exlong short" data-parent-key="79" data-key="80" style="height: 0.0035752px;"><p class="svelte-1exlong" style="height: 16px; max-height: inherit; margin-bottom: inherit;"><span class="value svelte-1exlong">$33.1M</span><!----> <!----> Other Veterans Services</p> <!----></div><div class="block svelte-1exlong short" data-parent-key="79" data-key="81" style="height: 0.233912px;"><p class="svelte-1exlong" style="height: 16px; max-height: inherit; margin-bottom: inherit;"><span class="value svelte-1exlong">$2.17B</span><!----> <!----> Veterans Medical Care</p> <!----></div><!----> <!----></div><div class="group svelte-1exlong" data-parent="Disaster Relief" style="row-gap: 10px;"><div class="block svelte-1exlong short" data-parent-key="82" data-key="83" style="height: 2.77238px;"><p class="svelte-1exlong" style="height: 16px; max-height: inherit; margin-bottom: inherit;"><span class="value svelte-1exlong">$25.7B</span><!----> <!----> Disaster Relief</p> <!----></div><div class="block svelte-1exlong short" data-parent-key="82" data-key="84" style="height: 0.0421156px;"><p class="svelte-1exlong" style="height: 16px; max-height: inherit; margin-bottom: inherit;"><span class="value svelte-1exlong">$390M</span><!----> <!----> Justice System</p> <!----></div><div class="block svelte-1exlong short" data-parent-key="82" data-key="85" style="height: 0.645219px;"><p class="svelte-1exlong" style="height: 16px; max-height: inherit; margin-bottom: inherit;"><span class="value svelte-1exlong">$5.98B</span><!----> <!----> Law Enforcement</p> <!----></div><!----> <!----></div><div class="group svelte-1exlong" data-parent="Consumer Protection" style="row-gap: 10px;"><div class="block svelte-1exlong short" data-parent-key="86" data-key="87" style="height: 0.0068987px;"><p class="svelte-1exlong" style="height: 16px; max-height: inherit; margin-bottom: inherit;"><span class="value svelte-1exlong">$63.9M</span><!----> <!----> Consumer Protection</p> <!----></div><div class="block svelte-1exlong short" data-parent-key="86" data-key="88" style="height: 0.0223425px;"><p class="svelte-1exlong" style="height: 16px; max-height: inherit; margin-bottom: inherit;"><span class="value svelte-1exlong">$207M</span><!----> <!----> Employee Protection</p> <!----></div><!----> <!----></div><div class="group svelte-1exlong" data-parent="null" style="row-gap: 10px;"><div class="block svelte-1exlong short" data-parent-key="89" data-key="90" style="pointer-events: none; opacity: 0; height: 0.780131px; margin-top: -0.780131px;"><p class="svelte-1exlong" style="height: 16px; max-height: inherit; margin-bottom: inherit;"><span class="value svelte-1exlong">$7.23B</span><!----> <!----> null</p> <!----></div><!----> <!----></div><div class="group svelte-1exlong" data-parent="Banking and Finance" style="row-gap: 10px;"><div class="block svelte-1exlong short" data-parent-key="91" data-key="92" style="height: 0.104463px;"><p class="svelte-1exlong" style="height: 16px; max-height: inherit; margin-bottom: inherit;"><span class="value svelte-1exlong">$968M</span><!----> <!----> Banking and Finance</p> <!----></div><div class="block svelte-1exlong short" data-parent-key="91" data-key="93" style="height: 1.31343px;"><p class="svelte-1exlong" style="height: 16px; max-height: inherit; margin-bottom: inherit;"><span class="value svelte-1exlong">$12.2B</span><!----> <!----> Community and Regional Development</p> <!----></div><div class="block svelte-1exlong short" data-parent-key="91" data-key="94" style="height: 0.320668px;"><p class="svelte-1exlong" style="height: 16px; max-height: inherit; margin-bottom: inherit;"><span class="value svelte-1exlong">$2.97B</span><!----> <!----> Technology Infrastructure</p> <!----></div><div class="block svelte-1exlong short" data-parent-key="91" data-key="95" style="height: 10.3133px;"><p class="svelte-1exlong" style="height: 16px; max-height: inherit; margin-bottom: inherit;"><span class="value svelte-1exlong">$95.5B</span><!----> <!----> Transportation</p> <!----></div><!----> <!----></div><div class="group svelte-1exlong" data-parent="Other Medical Assistance to Persons" style="row-gap: 10px;"><div class="block svelte-1exlong short" data-parent-key="96" data-key="97" style="height: 0.000598px;"><p class="svelte-1exlong" style="height: 16px; max-height: inherit; margin-bottom: inherit;"><span class="value svelte-1exlong">$5.54M</span><!----> <!----> Other Medical Assistance to Persons</p> <!----></div><div class="block svelte-1exlong short" data-parent-key="96" data-key="98" style="height: 1.45081px;"><p class="svelte-1exlong" style="height: 16px; max-height: inherit; margin-bottom: inherit;"><span class="value svelte-1exlong">$13.4B</span><!----> <!----> Public Health</p> <!----></div><!----> <!----></div><div class="group svelte-1exlong" data-parent="Employment and Training" style="row-gap: 10px;"><div class="block svelte-1exlong short" data-parent-key="99" data-key="100" style="height: 0.485271px;"><p class="svelte-1exlong" style="height: 16px; max-height: inherit; margin-bottom: inherit;"><span class="value svelte-1exlong">$4.49B</span><!----> <!----> Employment and Training</p> <!----></div><div class="block svelte-1exlong short" data-parent-key="99" data-key="101" style="height: 5.33936px;"><p class="svelte-1exlong" style="height: 16px; max-height: inherit; margin-bottom: inherit;"><span class="value svelte-1exlong">$49.5B</span><!----> <!----> Housing Assistance</p> <!----></div><div class="block svelte-1exlong short" data-parent-key="99" data-key="102" style="height: 4.08439px;"><p class="svelte-1exlong" style="height: 16px; max-height: inherit; margin-bottom: inherit;"><span class="value svelte-1exlong">$37.8B</span><!----> <!----> Child and Social Services</p> <!----></div><div class="block svelte-1exlong short" data-parent-key="99" data-key="103" style="height: 2.14365px;"><p class="svelte-1exlong" style="height: 16px; max-height: inherit; margin-bottom: inherit;"><span class="value svelte-1exlong">$19.9B</span><!----> <!----> Child Care Assistance</p> <!----></div><div class="block svelte-1exlong" data-parent-key="99" data-key="104" style="height: 68.8869px;"><p class="svelte-1exlong" style="height: auto; max-height: inherit; margin-bottom: inherit; -webkit-line-clamp: 4;"><span class="value svelte-1exlong">$638B</span><!----> <br><!----> Medicaid and CHIP</p> <!----></div><div class="block svelte-1exlong short" data-parent-key="99" data-key="105" style="height: 2.13677px;"><p class="svelte-1exlong" style="height: 16px; max-height: inherit; margin-bottom: inherit;"><span class="value svelte-1exlong">$19.8B</span><!----> <!----> Other Medical Assistance to Poor</p> <!----></div><div class="block svelte-1exlong short" data-parent-key="99" data-key="106" style="height: 0.537673px;"><p class="svelte-1exlong" style="height: 16px; max-height: inherit; margin-bottom: inherit;"><span class="value svelte-1exlong">$4.98B</span><!----> <!----> Other Non-Cash Programs</p> <!----></div><div class="block svelte-1exlong short" data-parent-key="99" data-key="107" style="height: 0.245463px;"><p class="svelte-1exlong" style="height: 16px; max-height: inherit; margin-bottom: inherit;"><span class="value svelte-1exlong">$2.27B</span><!----> <!----> Refugee Assistance</p> <!----></div><div class="block svelte-1exlong short" data-parent-key="99" data-key="108" style="height: 5.52219px;"><p class="svelte-1exlong" style="height: 16px; max-height: inherit; margin-bottom: inherit;"><span class="value svelte-1exlong">$51.1B</span><!----> <!----> SNAP (and other nutritional programs)</p> <!----></div><div class="block svelte-1exlong short" data-parent-key="99" data-key="109" style="height: 1.96723px;"><p class="svelte-1exlong" style="height: 16px; max-height: inherit; margin-bottom: inherit;"><span class="value svelte-1exlong">$18.2B</span><!----> <!----> TANF</p> <!----></div><div class="block svelte-1exlong short" data-parent-key="99" data-key="110" style="height: 0.656022px;"><p class="svelte-1exlong" style="height: 16px; max-height: inherit; margin-bottom: inherit;"><span class="value svelte-1exlong">$6.08B</span><!----> <!----> Unemployment Insurance</p> <!----></div><!----> <!----></div><div class="group svelte-1exlong" data-parent="Elementary and Secondary Education" style="row-gap: 10px;"><div class="block svelte-1exlong short" data-parent-key="111" data-key="112" style="height: 6.65201px;"><p class="svelte-1exlong" style="height: 16px; max-height: inherit; margin-bottom: inherit;"><span class="value svelte-1exlong">$61.6B</span><!----> <!----> Elementary and Secondary Education</p> <!----></div><div class="block svelte-1exlong short" data-parent-key="111" data-key="113" style="height: 0.073138px;"><p class="svelte-1exlong" style="height: 16px; max-height: inherit; margin-bottom: inherit;"><span class="value svelte-1exlong">$677M</span><!----> <!----> Higher Education</p> <!----></div><div class="block svelte-1exlong short" data-parent-key="111" data-key="114" style="height: 0.20176px;"><p class="svelte-1exlong" style="height: 16px; max-height: inherit; margin-bottom: inherit;"><span class="value svelte-1exlong">$1.87B</span><!----> <!----> Vocational Education</p> <!----></div><div class="block svelte-1exlong short" data-parent-key="111" data-key="115" style="height: 0.111794px;"><p class="svelte-1exlong" style="height: 16px; max-height: inherit; margin-bottom: inherit;"><span class="value svelte-1exlong">$1.04B</span><!----> <!----> Education outside the Classroom</p> <!----></div><!----> <!----></div><div class="group svelte-1exlong" data-parent="Agriculture" style="row-gap: 10px;"><div class="block svelte-1exlong short" data-parent-key="116" data-key="117" style="height: 0.106069px;"><p class="svelte-1exlong" style="height: 16px; max-height: inherit; margin-bottom: inherit;"><span class="value svelte-1exlong">$982M</span><!----> <!----> Agriculture</p> <!----></div><div class="block svelte-1exlong short" data-parent-key="116" data-key="118" style="height: 0.234055px;"><p class="svelte-1exlong" style="height: 16px; max-height: inherit; margin-bottom: inherit;"><span class="value svelte-1exlong">$2.17B</span><!----> <!----> Energy</p> <!----></div><div class="block svelte-1exlong short" data-parent-key="116" data-key="119" style="height: 1.24636px;"><p class="svelte-1exlong" style="height: 16px; max-height: inherit; margin-bottom: inherit;"><span class="value svelte-1exlong">$11.5B</span><!----> <!----> Environment and Natural Resources</p> <!----></div><!----> <!----></div><div class="group svelte-1exlong" data-parent="null" style="row-gap: 10px;"><div class="block svelte-1exlong short" data-parent-key="120" data-key="121" style="pointer-events: none; opacity: 0; height: 0.0003323px; margin-top: -0.0003323px;"><p class="svelte-1exlong" style="height: 16px; max-height: inherit; margin-bottom: inherit;"><span class="value svelte-1exlong">$3.08M</span><!----> <!----> null</p> <!----></div><!----> <!----></div><div class="group svelte-1exlong" data-parent="null" style="row-gap: 10px;"><div class="block svelte-1exlong short" data-parent-key="123" data-key="124" style="pointer-events: none; opacity: 0; height: 5.53702px; margin-top: -5.53702px;"><p class="svelte-1exlong" style="height: 16px; max-height: inherit; margin-bottom: inherit;"><span class="value svelte-1exlong">$51.3B</span><!----> <!----> null</p> <!----></div><!----> <!----></div><div class="group svelte-1exlong" data-parent="Elementary and Secondary Education" style="row-gap: 10px;"><div class="block svelte-1exlong short" data-parent-key="125" data-key="126" style="height: 4.38607px;"><p class="svelte-1exlong" style="height: 16px; max-height: inherit; margin-bottom: inherit;"><span class="value svelte-1exlong">$40.6B</span><!----> <!----> Elementary and Secondary Education</p> <!----></div><div class="block svelte-1exlong short" data-parent-key="125" data-key="127" style="height: 13.6521px;"><p class="svelte-1exlong" style="height: 16px; max-height: inherit; margin-bottom: inherit;"><span class="value svelte-1exlong">$126B</span><!----> <!----> Higher Education</p> <!----></div><div class="block svelte-1exlong short" data-parent-key="125" data-key="128" style="height: 0.0327428px;"><p class="svelte-1exlong" style="height: 16px; max-height: inherit; margin-bottom: inherit;"><span class="value svelte-1exlong">$303M</span><!----> <!----> Vocational Education</p> <!----></div><div class="block svelte-1exlong short" data-parent-key="125" data-key="129" style="height: 0.39977px;"><p class="svelte-1exlong" style="height: 16px; max-height: inherit; margin-bottom: inherit;"><span class="value svelte-1exlong">$3.70B</span><!----> <!----> Education outside the Classroom</p> <!----></div><!----> <!----></div><div class="group svelte-1exlong" data-parent="Agriculture" style="row-gap: 10px;"><div class="block svelte-1exlong short" data-parent-key="130" data-key="131" style="height: 3.54999px;"><p class="svelte-1exlong" style="height: 16px; max-height: inherit; margin-bottom: inherit;"><span class="value svelte-1exlong">$32.9B</span><!----> <!----> Agriculture</p> <!----></div><div class="block svelte-1exlong short" data-parent-key="130" data-key="132" style="height: 1.01736px;"><p class="svelte-1exlong" style="height: 16px; max-height: inherit; margin-bottom: inherit;"><span class="value svelte-1exlong">$9.42B</span><!----> <!----> Energy</p> <!----></div><div class="block svelte-1exlong short" data-parent-key="130" data-key="133" style="height: 4.82919px;"><p class="svelte-1exlong" style="height: 16px; max-height: inherit; margin-bottom: inherit;"><span class="value svelte-1exlong">$44.7B</span><!----> <!----> Environment and Natural Resources</p> <!----></div><!----> <!----></div><div class="group svelte-1exlong" data-parent="null" style="row-gap: 10px;"><div class="block svelte-1exlong negative short" data-parent-key="134" data-key="135" style="pointer-events: none; opacity: 0; height: 2.84665px; margin-top: -2.84665px;"><p class="svelte-1exlong" style="height: 16px; max-height: inherit; margin-bottom: inherit;"><span class="value svelte-1exlong">-$26.4B</span><!----> <!----> null</p> <!----></div><!----> <!----></div><div class="group svelte-1exlong" data-parent="null" style="row-gap: 10px;"><div class="block svelte-1exlong negative short" data-parent-key="136" data-key="137" style="pointer-events: none; opacity: 0; height: 0.737152px; margin-top: -0.737152px;"><p class="svelte-1exlong" style="height: 16px; max-height: inherit; margin-bottom: inherit;"><span class="value svelte-1exlong">-$6.83B</span><!----> <!----> null</p> <!----></div><!----> <!----></div><div class="group svelte-1exlong" data-parent="null" style="row-gap: 10px;"><div class="block svelte-1exlong negative short" data-parent-key="138" data-key="139" style="pointer-events: none; opacity: 0; height: 0.0226398px; margin-top: -0.0226398px;"><p class="svelte-1exlong" style="height: 16px; max-height: inherit; margin-bottom: inherit;"><span class="value svelte-1exlong">-$210M</span><!----> <!----> null</p> <!----></div><!----> <!----></div><!----></div></div><div class="columns left svelte-1exlong" style="column-gap: 30px; flex-direction: row-reverse;"><div tabindex="-1" class="column narrow svelte-1exlong scrollable" data-level="0" style="row-gap: 30px; width: 36px; flex: 0 0 auto;"><div class="spacer svelte-1exlong" style="margin-bottom: -30px; height: 80px; min-height: 80px; max-height: 80px; order: 0;"></div> <div class="group svelte-1exlong" style="row-gap: 0px;"><div class="block svelte-1exlong" data-key="140" style="margin-top: 0px; height: 534.332px;"><p class="svelte-1exlong" style="height: auto; max-height: 528.332px; margin-bottom: 3px; -webkit-line-clamp: 33;"><span class="value svelte-1exlong">$4.9T</span><!----> <!----> Revenue</p> <!----></div><!----> <div class="block difference svelte-1exlong" style="height: 197.668px;"><p class="svelte-1exlong"><span class="value svelte-1exlong">$1.8T</span> Deficit</p></div><!----></div><!----></div><div tabindex="-1" class="column default svelte-1exlong scrollable" data-level="1" style="row-gap: 30px; width: auto; flex: 1 1 0%;"><div class="spacer svelte-1exlong" style="margin-bottom: -30px; height: 80px; min-height: 80px; max-height: 80px; order: 0;"></div> <div class="group svelte-1exlong" data-parent="Federal Reserve earnings" style="row-gap: 10px;"><div class="block svelte-1exlong short" data-parent-key="140" data-key="141" style="margin-top: 10px; height: 0.434307px;"><p class="svelte-1exlong" style="height: 16px; max-height: inherit; margin-bottom: inherit;"><span class="value svelte-1exlong">$4.02B</span><!----> <!----> Federal Reserve earnings</p> <!----></div><div class="block svelte-1exlong short" data-parent-key="140" data-key="144" style="height: 3.37271px;"><p class="svelte-1exlong" style="height: 16px; max-height: inherit; margin-bottom: inherit;"><span class="value svelte-1exlong">$31.2B</span><!----> <!----> Other Non-Tax Revenue</p> <!----></div><div class="block svelte-1exlong short" data-parent-key="140" data-key="147" style="height: 0.757925px;"><p class="svelte-1exlong" style="height: 16px; max-height: inherit; margin-bottom: inherit;"><span class="value svelte-1exlong">$7.02B</span><!----> <!----> Sales of Government Resources</p> <!----></div><div class="block svelte-1exlong" data-parent-key="140" data-key="150" style="height: 57.2079px;"><p class="svelte-1exlong" style="height: auto; max-height: inherit; margin-bottom: inherit; -webkit-line-clamp: 3;"><span class="value svelte-1exlong">$530B</span><!----> <br><!----> Corporate Income Taxes</p> <!----></div><div class="block svelte-1exlong short" data-parent-key="140" data-key="153" style="height: 8.31752px;"><p class="svelte-1exlong" style="height: 16px; max-height: inherit; margin-bottom: inherit;"><span class="value svelte-1exlong">$77.0B</span><!----> <!----> Customs Duties</p> <!----></div><div class="block svelte-1exlong short" data-parent-key="140" data-key="156" style="height: 3.41347px;"><p class="svelte-1exlong" style="height: 16px; max-height: inherit; margin-bottom: inherit;"><span class="value svelte-1exlong">$31.6B</span><!----> <!----> Estate and Gift Taxes</p> <!----></div><div class="block svelte-1exlong" data-parent-key="140" data-key="159" style="height: 261.934px;"><p class="svelte-1exlong" style="height: auto; max-height: inherit; margin-bottom: inherit; -webkit-line-clamp: 16;"><span class="value svelte-1exlong">$2.4T</span><!----> <br><!----> Individual Income Taxes</p> <!----></div><div class="block svelte-1exlong short" data-parent-key="140" data-key="162" style="height: 1.05303px;"><p class="svelte-1exlong" style="height: 16px; max-height: inherit; margin-bottom: inherit;"><span class="value svelte-1exlong">$9.75B</span><!----> <!----> Other Taxes</p> <!----></div><div class="block svelte-1exlong" data-parent-key="140" data-key="165" style="height: 186.89px;"><p class="svelte-1exlong" style="height: auto; max-height: inherit; margin-bottom: inherit; -webkit-line-clamp: 11;"><span class="value svelte-1exlong">$1.7T</span><!----> <br><!----> Payroll Taxes</p> <!----></div><div class="block svelte-1exlong short" data-parent-key="140" data-key="175" style="height: 10.9517px;"><p class="svelte-1exlong" style="height: 16px; max-height: inherit; margin-bottom: inherit;"><span class="value svelte-1exlong">$101B</span><!----> <!----> Sales and Excise Taxes</p> <!----></div><!----> <!----></div><!----></div><div tabindex="-1" class="column default svelte-1exlong scrollable" data-level="2" style="row-gap: 30px; width: auto; flex: 1 1 0%;"><div class="spacer svelte-1exlong" style="margin-bottom: -30px; height: 80px; min-height: 80px; max-height: 80px; order: 0;"></div> <div class="group svelte-1exlong" data-parent="null" style="row-gap: 10px;"><div class="block svelte-1exlong short" data-parent-key="141" data-key="142" style="pointer-events: none; margin-top: 20px; opacity: 0; height: 0.434307px;"><p class="svelte-1exlong" style="height: 16px; max-height: inherit; margin-bottom: inherit;"><span class="value svelte-1exlong">$4.02B</span><!----> <!----> null</p> <!----></div><!----> <!----></div><div class="group svelte-1exlong" data-parent="null" style="row-gap: 10px;"><div class="block svelte-1exlong short" data-parent-key="144" data-key="145" style="pointer-events: none; opacity: 0; height: 3.37271px; margin-top: -3.37271px;"><p class="svelte-1exlong" style="height: 16px; max-height: inherit; margin-bottom: inherit;"><span class="value svelte-1exlong">$31.2B</span><!----> <!----> null</p> <!----></div><!----> <!----></div><div class="group svelte-1exlong" data-parent="Rents and Royalties" style="row-gap: 10px;"><div class="block svelte-1exlong short" data-parent-key="147" data-key="148" style="height: 0.757925px;"><p class="svelte-1exlong" style="height: 16px; max-height: inherit; margin-bottom: inherit;"><span class="value svelte-1exlong">$7.02B</span><!----> <!----> Rents and Royalties</p> <!----></div><!----> <!----></div><div class="group svelte-1exlong" data-parent="null" style="row-gap: 10px;"><div class="block svelte-1exlong" data-parent-key="150" data-key="151" style="pointer-events: none; opacity: 0; height: 57.2079px; margin-top: -57.2079px;"><p class="svelte-1exlong" style="height: auto; max-height: inherit; margin-bottom: inherit; -webkit-line-clamp: 3;"><span class="value svelte-1exlong">$530B</span><!----> <br><!----> null</p> <!----></div><!----> <!----></div><div class="group svelte-1exlong" data-parent="null" style="row-gap: 10px;"><div class="block svelte-1exlong short" data-parent-key="153" data-key="154" style="pointer-events: none; opacity: 0; height: 8.31752px; margin-top: -8.31752px;"><p class="svelte-1exlong" style="height: 16px; max-height: inherit; margin-bottom: inherit;"><span class="value svelte-1exlong">$77.0B</span><!----> <!----> null</p> <!----></div><!----> <!----></div><div class="group svelte-1exlong" data-parent="null" style="row-gap: 10px;"><div class="block svelte-1exlong short" data-parent-key="156" data-key="157" style="pointer-events: none; opacity: 0; height: 3.41347px; margin-top: -3.41347px;"><p class="svelte-1exlong" style="height: 16px; max-height: inherit; margin-bottom: inherit;"><span class="value svelte-1exlong">$31.6B</span><!----> <!----> null</p> <!----></div><!----> <!----></div><div class="group svelte-1exlong" data-parent="null" style="row-gap: 10px;"><div class="block svelte-1exlong" data-parent-key="159" data-key="160" style="pointer-events: none; opacity: 0; height: 261.934px; margin-top: -261.934px;"><p class="svelte-1exlong" style="height: auto; max-height: inherit; margin-bottom: inherit; -webkit-line-clamp: 16;"><span class="value svelte-1exlong">$2.4T</span><!----> <br><!----> null</p> <!----></div><!----> <!----></div><div class="group svelte-1exlong" data-parent="null" style="row-gap: 10px;"><div class="block svelte-1exlong short" data-parent-key="162" data-key="163" style="pointer-events: none; opacity: 0; height: 1.05303px; margin-top: -1.05303px;"><p class="svelte-1exlong" style="height: 16px; max-height: inherit; margin-bottom: inherit;"><span class="value svelte-1exlong">$9.75B</span><!----> <!----> null</p> <!----></div><!----> <!----></div><div class="group svelte-1exlong" data-parent="Medicare Taxes" style="row-gap: 10px;"><div class="block svelte-1exlong" data-parent-key="165" data-key="166" style="height: 42.3821px;"><p class="svelte-1exlong" style="height: auto; max-height: inherit; margin-bottom: inherit; -webkit-line-clamp: 2;"><span class="value svelte-1exlong">$393B</span><!----> <br><!----> Medicare Taxes</p> <!----></div><div class="block svelte-1exlong short" data-parent-key="165" data-key="168" style="height: 0.675654px;"><p class="svelte-1exlong" style="height: 16px; max-height: inherit; margin-bottom: inherit;"><span class="value svelte-1exlong">$6.26B</span><!----> <!----> Railroad Retirement Taxes</p> <!----></div><div class="block svelte-1exlong" data-parent-key="165" data-key="170" style="height: 138.541px;"><p class="svelte-1exlong" style="height: auto; max-height: inherit; margin-bottom: inherit; -webkit-line-clamp: 8;"><span class="value svelte-1exlong">$1.3T</span><!----> <br><!----> Social Security Taxes</p> <!----></div><div class="block svelte-1exlong short" data-parent-key="165" data-key="173" style="height: 5.29159px;"><p class="svelte-1exlong" style="height: 16px; max-height: inherit; margin-bottom: inherit;"><span class="value svelte-1exlong">$49.0B</span><!----> <!----> Unemployment Taxes</p> <!----></div><!----> <!----></div><div class="group svelte-1exlong" data-parent="Selective Sales Taxes" style="row-gap: 10px;"><div class="block svelte-1exlong short" data-parent-key="175" data-key="176" style="height: 10.9517px;"><p class="svelte-1exlong" style="height: 16px; max-height: inherit; margin-bottom: inherit;"><span class="value svelte-1exlong">$101B</span><!----> <!----> Selective Sales Taxes</p> <!----></div><!----> <!----></div><!----></div><div tabindex="-1" class="column default svelte-1exlong scrollable" data-level="3" style="row-gap: 30px; width: auto; flex: 1 1 0%;"><div class="spacer svelte-1exlong" style="margin-bottom: -30px; height: 80px; min-height: 80px; max-height: 80px; order: 0;"></div> <div class="group svelte-1exlong" data-parent="null" style="row-gap: 10px;"><div class="block svelte-1exlong short" data-parent-key="142" data-key="143" style="pointer-events: none; margin-top: 30px; opacity: 0; height: 0.434307px;"><p class="svelte-1exlong" style="height: 16px; max-height: inherit; margin-bottom: inherit;"><span class="value svelte-1exlong">$4.02B</span><!----> <!----> null</p> <!----></div><!----> <!----></div><div class="group svelte-1exlong" data-parent="null" style="row-gap: 10px;"><div class="block svelte-1exlong short" data-parent-key="145" data-key="146" style="pointer-events: none; opacity: 0; height: 3.37271px; margin-top: -3.37271px;"><p class="svelte-1exlong" style="height: 16px; max-height: inherit; margin-bottom: inherit;"><span class="value svelte-1exlong">$31.2B</span><!----> <!----> null</p> <!----></div><!----> <!----></div><div class="group svelte-1exlong" data-parent="Rents and Royalties OCS" style="row-gap: 10px;"><div class="block svelte-1exlong short" data-parent-key="148" data-key="149" style="height: 0.757925px;"><p class="svelte-1exlong" style="height: 16px; max-height: inherit; margin-bottom: inherit;"><span class="value svelte-1exlong">$7.02B</span><!----> <!----> Rents and Royalties OCS</p> <!----></div><!----> <!----></div><div class="group svelte-1exlong" data-parent="null" style="row-gap: 10px;"><div class="block svelte-1exlong" data-parent-key="151" data-key="152" style="pointer-events: none; opacity: 0; height: 57.2079px; margin-top: -57.2079px;"><p class="svelte-1exlong" style="height: auto; max-height: inherit; margin-bottom: inherit; -webkit-line-clamp: 3;"><span class="value svelte-1exlong">$530B</span><!----> <br><!----> null</p> <!----></div><!----> <!----></div><div class="group svelte-1exlong" data-parent="null" style="row-gap: 10px;"><div class="block svelte-1exlong short" data-parent-key="154" data-key="155" style="pointer-events: none; opacity: 0; height: 8.31752px; margin-top: -8.31752px;"><p class="svelte-1exlong" style="height: 16px; max-height: inherit; margin-bottom: inherit;"><span class="value svelte-1exlong">$77.0B</span><!----> <!----> null</p> <!----></div><!----> <!----></div><div class="group svelte-1exlong" data-parent="null" style="row-gap: 10px;"><div class="block svelte-1exlong short" data-parent-key="157" data-key="158" style="pointer-events: none; opacity: 0; height: 3.41347px; margin-top: -3.41347px;"><p class="svelte-1exlong" style="height: 16px; max-height: inherit; margin-bottom: inherit;"><span class="value svelte-1exlong">$31.6B</span><!----> <!----> null</p> <!----></div><!----> <!----></div><div class="group svelte-1exlong" data-parent="null" style="row-gap: 10px;"><div class="block svelte-1exlong" data-parent-key="160" data-key="161" style="pointer-events: none; opacity: 0; height: 261.934px; margin-top: -261.934px;"><p class="svelte-1exlong" style="height: auto; max-height: inherit; margin-bottom: inherit; -webkit-line-clamp: 16;"><span class="value svelte-1exlong">$2.4T</span><!----> <br><!----> null</p> <!----></div><!----> <!----></div><div class="group svelte-1exlong" data-parent="null" style="row-gap: 10px;"><div class="block svelte-1exlong short" data-parent-key="163" data-key="164" style="pointer-events: none; opacity: 0; height: 1.05303px; margin-top: -1.05303px;"><p class="svelte-1exlong" style="height: 16px; max-height: inherit; margin-bottom: inherit;"><span class="value svelte-1exlong">$9.75B</span><!----> <!----> null</p> <!----></div><!----> <!----></div><div class="group svelte-1exlong" data-parent="null" style="row-gap: 10px;"><div class="block svelte-1exlong" data-parent-key="166" data-key="167" style="pointer-events: none; opacity: 0; height: 42.3821px; margin-top: -42.3821px;"><p class="svelte-1exlong" style="height: auto; max-height: inherit; margin-bottom: inherit; -webkit-line-clamp: 2;"><span class="value svelte-1exlong">$393B</span><!----> <br><!----> null</p> <!----></div><!----> <!----></div><div class="group svelte-1exlong" data-parent="null" style="row-gap: 10px;"><div class="block svelte-1exlong short" data-parent-key="168" data-key="169" style="pointer-events: none; opacity: 0; height: 0.675654px; margin-top: -0.675654px;"><p class="svelte-1exlong" style="height: 16px; max-height: inherit; margin-bottom: inherit;"><span class="value svelte-1exlong">$6.26B</span><!----> <!----> null</p> <!----></div><!----> <!----></div><div class="group svelte-1exlong" data-parent="Disability" style="row-gap: 10px;"><div class="block svelte-1exlong" data-parent-key="170" data-key="171" style="height: 20.112px;"><p class="svelte-1exlong" style="height: auto; max-height: inherit; margin-bottom: inherit; -webkit-line-clamp: 1;"><span class="value svelte-1exlong">$186B</span><!----> <!----> Disability</p> <!----></div><div class="block svelte-1exlong" data-parent-key="170" data-key="172" style="height: 118.429px;"><p class="svelte-1exlong" style="height: auto; max-height: inherit; margin-bottom: inherit; -webkit-line-clamp: 7;"><span class="value svelte-1exlong">$1.1T</span><!----> <br><!----> Retirement</p> <!----></div><!----> <!----></div><div class="group svelte-1exlong" data-parent="null" style="row-gap: 10px;"><div class="block svelte-1exlong short" data-parent-key="173" data-key="174" style="pointer-events: none; opacity: 0; height: 5.29159px; margin-top: -5.29159px;"><p class="svelte-1exlong" style="height: 16px; max-height: inherit; margin-bottom: inherit;"><span class="value svelte-1exlong">$49.0B</span><!----> <!----> null</p> <!----></div><!----> <!----></div><div class="group svelte-1exlong" data-parent="Alcohol Taxes" style="row-gap: 10px;"><div class="block svelte-1exlong short" data-parent-key="176" data-key="177" style="height: 1.01402px;"><p class="svelte-1exlong" style="height: 16px; max-height: inherit; margin-bottom: inherit;"><span class="value svelte-1exlong">$9.39B</span><!----> <!----> Alcohol Taxes</p> <!----></div><div class="block svelte-1exlong short" data-parent-key="176" data-key="178" style="height: 0.980983px;"><p class="svelte-1exlong" style="height: 16px; max-height: inherit; margin-bottom: inherit;"><span class="value svelte-1exlong">$9.09B</span><!----> <!----> Corporate Stock Repurchase Excise Tax</p> <!----></div><div class="block svelte-1exlong short" data-parent-key="176" data-key="179" style="height: 4.39603px;"><p class="svelte-1exlong" style="height: 16px; max-height: inherit; margin-bottom: inherit;"><span class="value svelte-1exlong">$40.7B</span><!----> <!----> Motor Fuel Taxes</p> <!----></div><div class="block svelte-1exlong short" data-parent-key="176" data-key="180" style="height: 3.50161px;"><p class="svelte-1exlong" style="height: 16px; max-height: inherit; margin-bottom: inherit;"><span class="value svelte-1exlong">$32.4B</span><!----> <!----> Other Selective Sales Taxes</p> <!----></div><div class="block svelte-1exlong short" data-parent-key="176" data-key="181" style="height: 1.05903px;"><p class="svelte-1exlong" style="height: 16px; max-height: inherit; margin-bottom: inherit;"><span class="value svelte-1exlong">$9.81B</span><!----> <!----> Tobacco Taxes</p> <!----></div><!----> <!----></div><!----></div></div><!----> <canvas class="svelte-1fgj9lk" width="1972" height="947" style="width: 1972px; height: 947px;"></canvas><!----><!----></div> <div class="controller svelte-1or193y" tabindex="0" role="application" aria-roledescription="data visualization" aria-activedescendant="null" aria-label="A flow chart"><p class="sr-only svelte-1or193y">Use your arrow keys to explore. TAB or ESC to exit.</p></div> <!----><!----> <!----><!----> <!----></div></div>



<script>window.Flourish = {"static_prefix":"https://flo.uri.sh/template/84985/v48/static","environment":"api","is_read_only":true,"metadata":{"credit_text":"Made with Flourish  Create your own","credit_url":"https://flourish.studio/"}};</script><script>var template=function(j){"use strict";var em=Object.defineProperty,nm=Object.defineProperties;var rm=Object.getOwnPropertyDescriptors;var bu=Object.getOwnPropertySymbols,im=Object.getPrototypeOf,om=Object.prototype.hasOwnProperty,am=Object.prototype.propertyIsEnumerable,sm=Reflect.get;var Mu=j=>{throw TypeError(j)};var Wo=(j,$,st)=>$ in j?em(j,$,{enumerable:!0,configurable:!0,writable:!0,value:st}):j[$]=st,At=(j,$)=>{for(var st in $||($={}))om.call($,st)&&Wo(j,st,$[st]);if(bu)for(var st of bu($))am.call($,st)&&Wo(j,st,$[st]);return j},Xe=(j,$)=>nm(j,rm($));var Eu=(j,$,st)=>Wo(j,typeof $!="symbol"?$+"":$,st),qo=(j,$,st)=>$.has(j)||Mu("Cannot "+st);var at=(j,$,st)=>(qo(j,$,"read from private field"),st?st.call(j):$.get(j)),Pe=(j,$,st)=>$.has(j)?Mu("Cannot add the same private member more than once"):$ instanceof WeakSet?$.add(j):$.set(j,st),Vo=(j,$,st,hi)=>(qo(j,$,"write to private field"),hi?hi.call(j,st):$.set(j,st),st),hr=(j,$,st)=>(qo(j,$,"access private method"),st);var ku=(j,$,st)=>sm(im(j),st,$);var qe,Cn,fr,ui,Su,ye,we,Ie,In,fi;const Dt=Symbol(),Tu=["touchstart","touchmove"];function Au(t){return Tu.includes(t)}const Go=!1;var di=Array.isArray,pi=Array.from,Nu=Object.defineProperty,hn=Object.getOwnPropertyDescriptor,Fu=Object.getOwnPropertyDescriptors,Cu=Object.prototype,Iu=Array.prototype,jo=Object.getPrototypeOf;function Du(t){for(var e=0;e<t.length;e++)t[e]()}function Pu(t,e,n=!1){return t===void 0?n?e():e:t}const ie=2,Xo=4,Pn=8,_i=16,ue=32,dr=64,gi=128,Ke=256,pr=512,Ht=1024,be=2048,Rn=4096,ce=8192,dn=16384,Ru=32768,vi=65536,Ko=1<<19,Zo=1<<20,On=Symbol("$state"),Ou=Symbol("legacy props"),Lu=Symbol("");function Qo(t){return t===this.v}function Hu(t,e){return t!=t?e==e:t!==e||t!==null&&typeof t=="object"||typeof t=="function"}function Uu(t,e){return t!==e}function Jo(t){return!Hu(t,this.v)}function Bu(t){throw new Error("https://svelte.dev/e/effect_in_teardown")}function Yu(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function zu(t){throw new Error("https://svelte.dev/e/effect_orphan")}function Wu(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function qu(t){throw new Error("https://svelte.dev/e/props_invalid_value")}function Vu(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Gu(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function ju(){throw new Error("https://svelte.dev/e/state_unsafe_local_read")}function Xu(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}let $o=!1,Ku=!1;function Mt(t,e){var n={f:0,v:t,reactions:null,equals:Qo,version:0};return n}function lt(t){return Qu(Mt(t))}function Zu(t,e=!1){const n=Mt(t);return e||(n.equals=Jo),n}function Qu(t){return ut!==null&&ut.f&ie&&(he===null?lc([t]):he.push(t)),t}function N(t,e){return ut!==null&&cc()&&ut.f&(ie|_i)&&(he===null||!he.includes(t))&&Xu(),mi(t,e)}function mi(t,e){return t.equals(e)||(t.v,t.v=e,t.version=ma(),ta(t,be),tt!==null&&tt.f&Ht&&!(tt.f&ue)&&(Nt!==null&&Nt.includes(t)?(de(tt,be),Er(tt)):Le===null?uc([t]):Le.push(t))),e}function ta(t,e){var n=t.reactions;if(n!==null)for(var r=n.length,i=0;i<r;i++){var o=n[i],a=o.f;a&be||(de(o,e),a&(Ht|Ke)&&(a&ie?ta(o,Rn):Er(o)))}}let yi=!1;function q(t,e=null,n){if(typeof t!="object"||t===null||On in t)return t;const r=jo(t);if(r!==Cu&&r!==Iu)return t;var i=new Map,o=di(t),a=Mt(0);o&&i.set("length",Mt(t.length));var s;return new Proxy(t,{defineProperty(l,u,c){(!("value"in c)||c.configurable===!1||c.enumerable===!1||c.writable===!1)&&Vu();var f=i.get(u);return f===void 0?(f=Mt(c.value),i.set(u,f)):N(f,q(c.value,s)),!0},deleteProperty(l,u){var c=i.get(u);if(c===void 0)u in l&&i.set(u,Mt(Dt));else{if(o&&typeof u=="string"){var f=i.get("length"),h=Number(u);Number.isInteger(h)&&h<f.v&&N(f,h)}N(c,Dt),ea(a)}return!0},get(l,u,c){var _;if(u===On)return t;var f=i.get(u),h=u in l;if(f===void 0&&(!h||(_=hn(l,u))!=null&&_.writable)&&(f=Mt(q(h?l[u]:Dt,s)),i.set(u,f)),f!==void 0){var p=d(f);return p===Dt?void 0:p}return Reflect.get(l,u,c)},getOwnPropertyDescriptor(l,u){var c=Reflect.getOwnPropertyDescriptor(l,u);if(c&&"value"in c){var f=i.get(u);f&&(c.value=d(f))}else if(c===void 0){var h=i.get(u),p=h==null?void 0:h.v;if(h!==void 0&&p!==Dt)return{enumerable:!0,configurable:!0,value:p,writable:!0}}return c},has(l,u){var p;if(u===On)return!0;var c=i.get(u),f=c!==void 0&&c.v!==Dt||Reflect.has(l,u);if(c!==void 0||tt!==null&&(!f||(p=hn(l,u))!=null&&p.writable)){c===void 0&&(c=Mt(f?q(l[u],s):Dt),i.set(u,c));var h=d(c);if(h===Dt)return!1}return f},set(l,u,c,f){var m;var h=i.get(u),p=u in l;if(o&&u==="length")for(var _=c;_<h.v;_+=1){var g=i.get(_+"");g!==void 0?N(g,Dt):_ in l&&(g=Mt(Dt),i.set(_+"",g))}h===void 0?(!p||(m=hn(l,u))!=null&&m.writable)&&(h=Mt(void 0),N(h,q(c,s)),i.set(u,h)):(p=h.v!==Dt,N(h,q(c,s)));var y=Reflect.getOwnPropertyDescriptor(l,u);if(y!=null&&y.set&&y.set.call(f,c),!p){if(o&&typeof u=="string"){var k=i.get("length"),S=Number(u);Number.isInteger(S)&&S>=k.v&&N(k,S+1)}ea(a)}return!0},ownKeys(l){d(a);var u=Reflect.ownKeys(l).filter(h=>{var p=i.get(h);return p===void 0||p.v!==Dt});for(var[c,f]of i)f.v!==Dt&&!(c in l)&&u.push(c);return u},setPrototypeOf(){Gu()}})}function ea(t,e=1){N(t,t.v+e)}var na,ra,ia;function Ju(){if(na===void 0){na=window;var t=Element.prototype,e=Node.prototype;ra=hn(e,"firstChild").get,ia=hn(e,"nextSibling").get,t.__click=void 0,t.__className="",t.__attributes=null,t.__styles=null,t.__e=void 0,Text.prototype.__t=void 0}}function _r(t=""){return document.createTextNode(t)}function fe(t){return ra.call(t)}function gr(t){return ia.call(t)}function Z(t,e){return fe(t)}function Jt(t,e){{var n=fe(t);return n instanceof Comment&&n.data===""?gr(n):n}}function it(t,e=1,n=!1){let r=t;for(;e--;)r=gr(r);return r}function $u(t){t.textContent=""}function z(t){var i;var e=ie|be;tt===null?e|=Ke:tt.f|=Zo;var n=ut!==null&&ut.f&ie?ut:null;const r={children:null,ctx:Bt,deps:null,equals:Qo,f:e,fn:t,reactions:null,v:null,version:0,parent:n!=null?n:tt};return n!==null&&((i=n.children)!=null?i:n.children=[]).push(r),r}function tc(t){const e=z(t);return e.equals=Jo,e}function oa(t){var e=t.children;if(e!==null){t.children=null;for(var n=0;n<e.length;n+=1){var r=e[n];r.f&ie?wi(r):Me(r)}}}function ec(t){for(var e=t.parent;e!==null;){if(!(e.f&ie))return e;e=e.parent}return null}function aa(t){var e,n=tt;Oe(ec(t));try{oa(t),e=ya(t)}finally{Oe(n)}return e}function sa(t){var e=aa(t),n=(Qe||t.f&Ke)&&t.deps!==null?Rn:Ht;de(t,n),t.equals(e)||(t.v=e,t.version=ma())}function wi(t){oa(t),Bn(t,0),de(t,dn),t.v=t.children=t.deps=t.ctx=t.reactions=null}function nc(t){tt===null&&ut===null&&zu(),ut!==null&&ut.f&Ke&&Yu(),ki&&Bu()}function rc(t,e){var n=e.last;n===null?e.last=e.first=t:(n.next=t,t.prev=n,e.last=t)}function pn(t,e,n,r=!0){var c;var i=(t&dr)!==0,o=tt,a={ctx:Bt,deps:null,deriveds:null,nodes_start:null,nodes_end:null,f:t|be,first:null,fn:e,last:null,next:null,parent:i?null:o,prev:null,teardown:null,transitions:null,version:0};if(n){var s=gn;try{_a(!0),Mr(a),a.f|=Ru}catch(f){throw Me(a),f}finally{_a(s)}}else e!==null&&Er(a);var l=n&&a.deps===null&&a.first===null&&a.nodes_start===null&&a.teardown===null&&(a.f&Zo)===0;if(!l&&!i&&r&&(o!==null&&rc(a,o),ut!==null&&ut.f&ie)){var u=ut;((c=u.children)!=null?c:u.children=[]).push(a)}return a}function ic(t){const e=pn(Pn,null,!1);return de(e,Ht),e.teardown=t,e}function Ut(t){var i;nc();var e=tt!==null&&(tt.f&ue)!==0&&Bt!==null&&!Bt.m;if(e){var n=Bt;((i=n.e)!=null?i:n.e=[]).push({fn:t,effect:tt,reaction:ut})}else{var r=vr(t);return r}}function oc(t){const e=pn(dr,t,!0);return(n={})=>new Promise(r=>{n.outro?Ln(e,()=>{Me(e),r(void 0)}):(Me(e),r(void 0))})}function vr(t){return pn(Xo,t,!1)}function la(t){return pn(Pn,t,!0)}function ct(t){return _n(t)}function _n(t,e=0){return pn(Pn|_i|e,t,!0)}function Ze(t,e=!0){return pn(Pn|ue,t,!0,e)}function ua(t){var e=t.teardown;if(e!==null){const n=ki,r=ut;ga(!0),Re(null);try{e.call(null)}finally{ga(n),Re(r)}}}function ca(t){var e=t.deriveds;if(e!==null){t.deriveds=null;for(var n=0;n<e.length;n+=1)wi(e[n])}}function fa(t,e=!1){var n=t.first;for(t.first=t.last=null;n!==null;){var r=n.next;Me(n,e),n=r}}function ac(t){for(var e=t.first;e!==null;){var n=e.next;e.f&ue||Me(e),e=n}}function Me(t,e=!0){var n=!1;if((e||t.f&Ko)&&t.nodes_start!==null){for(var r=t.nodes_start,i=t.nodes_end;r!==null;){var o=r===i?null:gr(r);r.remove(),r=o}n=!0}fa(t,e&&!n),ca(t),Bn(t,0),de(t,dn);var a=t.transitions;if(a!==null)for(const l of a)l.stop();ua(t);var s=t.parent;s!==null&&s.first!==null&&ha(t),t.next=t.prev=t.teardown=t.ctx=t.deps=t.fn=t.nodes_start=t.nodes_end=null}function ha(t){var e=t.parent,n=t.prev,r=t.next;n!==null&&(n.next=r),r!==null&&(r.prev=n),e!==null&&(e.first===t&&(e.first=r),e.last===t&&(e.last=n))}function Ln(t,e){var n=[];xi(t,n,!0),da(n,()=>{Me(t),e&&e()})}function da(t,e){var n=t.length;if(n>0){var r=()=>--n||e();for(var i of t)i.out(r)}else e()}function xi(t,e,n){if(!(t.f&ce)){if(t.f^=ce,t.transitions!==null)for(const a of t.transitions)(a.is_global||n)&&e.push(a);for(var r=t.first;r!==null;){var i=r.next,o=(r.f&vi)!==0||(r.f&ue)!==0;xi(r,e,o?n:!1),r=i}}}function mr(t){pa(t,!0)}function pa(t,e){if(t.f&ce){Un(t)&&Mr(t),t.f^=ce;for(var n=t.first;n!==null;){var r=n.next,i=(n.f&vi)!==0||(n.f&ue)!==0;pa(n,i?e:!1),n=r}if(t.transitions!==null)for(const o of t.transitions)(o.is_global||e)&&o.in()}}let bi=!1,Mi=[];function sc(){bi=!1;const t=Mi.slice();Mi=[],Du(t)}function Ei(t){bi||(bi=!0,queueMicrotask(sc)),Mi.push(t)}let yr=!1,wr=!1,xr=null,gn=!1,ki=!1;function _a(t){gn=t}function ga(t){ki=t}let Si=[],Hn=0,dm=[],ut=null;function Re(t){ut=t}let tt=null;function Oe(t){tt=t}let he=null;function lc(t){he=t}let Nt=null,Gt=0,Le=null;function uc(t){Le=t}let va=1,Qe=!1,Bt=null;function ma(){return++va}function cc(){return!$o}function Un(t){var u,c;var e=t.f;if(e&be)return!0;if(e&Rn){var n=t.deps,r=(e&Ke)!==0;if(n!==null){var i,o,a=(e&pr)!==0,s=r&&tt!==null&&!Qe,l=n.length;if(a||s){for(i=0;i<l;i++)o=n[i],(a||!((u=o==null?void 0:o.reactions)!=null&&u.includes(t)))&&((c=o.reactions)!=null?c:o.reactions=[]).push(t);a&&(t.f^=pr)}for(i=0;i<l;i++)if(o=n[i],Un(o)&&sa(o),o.version>t.version)return!0}(!r||tt!==null&&!Qe)&&de(t,Ht)}return!1}function fc(t,e){for(var n=e;n!==null;){if(n.f&gi)try{n.fn(t);return}catch(r){n.f^=gi}n=n.parent}throw yr=!1,t}function hc(t){return(t.f&dn)===0&&(t.parent===null||(t.parent.f&gi)===0)}function br(t,e,n,r){if(yr){if(n===null&&(yr=!1),hc(e))throw t;return}n!==null&&(yr=!0);{fc(t,e);return}}function ya(t){var h,p;var e=Nt,n=Gt,r=Le,i=ut,o=Qe,a=he,s=Bt,l=t.f;Nt=null,Gt=0,Le=null,ut=l&(ue|dr)?null:t,Qe=!gn&&(l&Ke)!==0,he=null,Bt=t.ctx;try{var u=(0,t.fn)(),c=t.deps;if(Nt!==null){var f;if(Bn(t,Gt),c!==null&&Gt>0)for(c.length=Gt+Nt.length,f=0;f<Nt.length;f++)c[Gt+f]=Nt[f];else t.deps=c=Nt;if(!Qe)for(f=Gt;f<c.length;f++)((p=(h=c[f]).reactions)!=null?p:h.reactions=[]).push(t)}else c!==null&&Gt<c.length&&(Bn(t,Gt),c.length=Gt);return u}finally{Nt=e,Gt=n,Le=r,ut=i,Qe=o,he=a,Bt=s}}function dc(t,e){let n=e.reactions;if(n!==null){var r=n.indexOf(t);if(r!==-1){var i=n.length-1;i===0?n=e.reactions=null:(n[r]=n[i],n.pop())}}n===null&&e.f&ie&&(Nt===null||!Nt.includes(e))&&(de(e,Rn),e.f&(Ke|pr)||(e.f^=pr),Bn(e,0))}function Bn(t,e){var n=t.deps;if(n!==null)for(var r=e;r<n.length;r++)dc(t,n[r])}function Mr(t){var e=t.f;if(!(e&dn)){de(t,Ht);var n=tt,r=Bt;tt=t;try{e&_i?ac(t):fa(t),ca(t),ua(t);var i=ya(t);t.teardown=typeof i=="function"?i:null,t.version=va;var o=t.deps,a;Go&&Ku&&t.f&be}catch(s){br(s,t,n,r||t.ctx)}finally{tt=n}}}function pc(){if(Hn>1e3){Hn=0;try{Wu()}catch(t){if(xr!==null)br(t,xr,null);else throw t}}Hn++}function _c(t){var e=t.length;if(e!==0){pc();var n=gn;gn=!0;try{for(var r=0;r<e;r++){var i=t[r];i.f&Ht||(i.f^=Ht);var o=[];wa(i,o),gc(o)}}finally{gn=n}}}function gc(t){var e=t.length;if(e!==0)for(var n=0;n<e;n++){var r=t[n];if(!(r.f&(dn|ce)))try{Un(r)&&(Mr(r),r.deps===null&&r.first===null&&r.nodes_start===null&&(r.teardown===null?ha(r):r.fn=null))}catch(i){br(i,r,null,r.ctx)}}}function vc(){if(wr=!1,Hn>1001)return;const t=Si;Si=[],_c(t),wr||(Hn=0,xr=null)}function Er(t){wr||(wr=!0,queueMicrotask(vc)),xr=t;for(var e=t;e.parent!==null;){e=e.parent;var n=e.f;if(n&(dr|ue)){if(!(n&Ht))return;e.f^=Ht}}Si.push(e)}function wa(t,e){var n=t.first,r=[];t:for(;n!==null;){var i=n.f,o=(i&ue)!==0,a=o&&(i&Ht)!==0,s=n.next;if(!a&&!(i&ce))if(i&Pn){if(o)n.f^=Ht;else try{Un(n)&&Mr(n)}catch(f){br(f,n,null,n.ctx)}var l=n.first;if(l!==null){n=l;continue}}else i&Xo&&r.push(n);if(s===null){let f=n.parent;for(;f!==null;){if(t===f)break t;var u=f.next;if(u!==null){n=u;continue t}f=f.parent}}n=s}for(var c=0;c<r.length;c++)l=r[c],e.push(l),wa(l,e)}function d(t){var c,f;var e=t.f,n=(e&ie)!==0;if(n&&e&dn){var r=aa(t);return wi(t),r}if(ut!==null){he!==null&&he.includes(t)&&ju();var i=ut.deps;Nt===null&&i!==null&&i[Gt]===t?Gt++:Nt===null?Nt=[t]:Nt.push(t),Le!==null&&tt!==null&&tt.f&Ht&&!(tt.f&ue)&&Le.includes(t)&&(de(tt,be),Er(tt))}else if(n&&t.deps===null)for(var o=t,a=o.parent,s=o;a!==null;)if(a.f&ie){var l=a;s=l,a=l.parent}else{var u=a;(c=u.deriveds)!=null&&c.includes(s)||((f=u.deriveds)!=null?f:u.deriveds=[]).push(s);break}return n&&(o=t,Un(o)&&sa(o)),t.v}function kr(t){const e=ut;try{return ut=null,t()}finally{ut=e}}const mc=~(be|Rn|Ht);function de(t,e){t.f=t.f&mc|e}function Sr(t,e=1){var n=d(t),r=e===1?n++:n--;return N(t,n),r}function $t(t,e=!1,n){Bt={p:Bt,c:null,e:null,m:!1,s:t,x:null,l:null}}function te(t){const e=Bt;if(e!==null){t!==void 0&&(e.x=t);const a=e.e;if(a!==null){var n=tt,r=ut;e.e=null;try{for(var i=0;i<a.length;i++){var o=a[i];Oe(o.effect),Re(o.reaction),vr(o.fn)}}finally{Oe(n),Re(r)}}Bt=e.p,e.m=!0}return t||{}}let xa=!1;function yc(){xa||(xa=!0,document.addEventListener("reset",t=>{Promise.resolve().then(()=>{var e;if(!t.defaultPrevented)for(const n of t.target.elements)(e=n.__on_r)==null||e.call(n)})},{capture:!0}))}function ba(t){var e=ut,n=tt;Re(null),Oe(null);try{return t()}finally{Re(e),Oe(n)}}function wc(t,e,n,r=n){t.addEventListener(e,()=>ba(n));const i=t.__on_r;i?t.__on_r=()=>{i(),r(!0)}:t.__on_r=()=>r(!0),yc()}const Ma=new Set,Ti=new Set;function xc(t,e,n,r){function i(o){if(r.capture||zn.call(e,o),!o.cancelBubble)return ba(()=>n.call(this,o))}return t.startsWith("pointer")||t.startsWith("touch")||t==="wheel"?Ei(()=>{e.addEventListener(t,i,r)}):e.addEventListener(t,i,r),i}function Yn(t,e,n,r,i){var o={capture:r,passive:i},a=xc(t,e,n,o);(e===document.body||e===window||e===document)&&ic(()=>{e.removeEventListener(t,a,o)})}function Tr(t){for(var e=0;e<t.length;e++)Ma.add(t[e]);for(var n of Ti)n(t)}function zn(t){var S;var e=this,n=e.ownerDocument,r=t.type,i=((S=t.composedPath)==null?void 0:S.call(t))||[],o=i[0]||t.target,a=0,s=t.__root;if(s){var l=i.indexOf(s);if(l!==-1&&(e===document||e===window)){t.__root=e;return}var u=i.indexOf(e);if(u===-1)return;l<=u&&(a=l)}if(o=i[a]||t.target,o!==e){Nu(t,"currentTarget",{configurable:!0,get(){return o||n}});var c=ut,f=tt;Re(null),Oe(null);try{for(var h,p=[];o!==null;){var _=o.assignedSlot||o.parentNode||o.host||null;try{var g=o["__"+r];if(g!==void 0&&!o.disabled)if(di(g)){var[y,...k]=g;y.apply(o,[t,...k])}else g.call(o,t)}catch(m){h?p.push(m):h=m}if(t.cancelBubble||_===e||_===null)break;o=_}if(h){for(let m of p)queueMicrotask(()=>{throw m});throw h}}finally{t.__root=e,delete t.currentTarget,Re(c),Oe(f)}}}function bc(t){var e;e=document.head.appendChild(_r());try{_n(()=>t(e),Ko)}finally{}}function Ai(t){var e=document.createElement("template");return e.innerHTML=t,e.content}function vn(t,e){var n=tt;n.nodes_start===null&&(n.nodes_start=t,n.nodes_end=e)}function ft(t,e){var n=(e&1)!==0,r=(e&2)!==0,i,o=!t.startsWith("<!>");return()=>{i===void 0&&(i=Ai(o?t:"<!>"+t),n||(i=fe(i)));var a=r?document.importNode(i,!0):i.cloneNode(!0);if(n){var s=fe(a),l=a.lastChild;vn(s,l)}else vn(a,a);return a}}function pe(t,e,n="svg"){var r=!t.startsWith("<!>"),i=(e&1)!==0,o=`<${n}>${r?t:"<!>"+t}</${n}>`,a;return()=>{if(!a){var s=Ai(o),l=fe(s);if(i)for(a=document.createDocumentFragment();fe(l);)a.appendChild(fe(l));else a=fe(l)}var u=a.cloneNode(!0);if(i){var c=fe(u),f=u.lastChild;vn(c,f)}else vn(u,u);return u}}function Ar(){var t=document.createDocumentFragment(),e=document.createComment(""),n=_r();return t.append(e,n),vn(e,n),t}function X(t,e){t!==null&&t.before(e)}function Yt(t,e){var r;var n=e==null?"":typeof e=="object"?e+"":e;n!==((r=t.__t)!=null?r:t.__t=t.nodeValue)&&(t.__t=n,t.nodeValue=n==null?"":n+"")}function Mc(t,e){return Ec(t,e)}const mn=new Map;function Ec(t,{target:e,anchor:n,props:r={},events:i,context:o,intro:a=!0}){Ju();var s=new Set,l=f=>{for(var h=0;h<f.length;h++){var p=f[h];if(!s.has(p)){s.add(p);var _=Au(p);e.addEventListener(p,zn,{passive:_});var g=mn.get(p);g===void 0?(document.addEventListener(p,zn,{passive:_}),mn.set(p,1)):mn.set(p,g+1)}}};l(pi(Ma)),Ti.add(l);var u=void 0,c=oc(()=>{var f=n!=null?n:e.appendChild(_r());return Ze(()=>{if(o){$t({});var h=Bt;h.c=o}i&&(r.$$events=i),u=t(f,r)||{},o&&te()}),()=>{var _;for(var h of s){e.removeEventListener(h,zn);var p=mn.get(h);--p===0?(document.removeEventListener(h,zn),mn.delete(h)):mn.set(h,p)}Ti.delete(l),f!==n&&((_=f.parentNode)==null||_.removeChild(f))}});return kc.set(u,c),u}let kc=new WeakMap;function yt(t,e,n=!1){var r=t,i=null,o=null,a=Dt,s=n?vi:0,l=!1;const u=(f,h=!0)=>{l=!0,c(h,f)},c=(f,h)=>{a!==(a=f)&&(a?(i?mr(i):h&&(i=Ze(()=>h(r))),o&&Ln(o,()=>{o=null})):(o?mr(o):h&&(o=Ze(()=>h(r))),i&&Ln(i,()=>{i=null})))};_n(()=>{l=!1,e(u),l||c(null,null)},s)}function Sc(t,e,n){var r=t,i=Dt,o,a=Uu;_n(()=>{a(i,i=e())&&(o&&Ln(o),o=Ze(()=>n(r)))})}function Ee(t,e){return e}function Tc(t,e,n,r){for(var i=[],o=e.length,a=0;a<o;a++)xi(e[a].e,i,!0);var s=o>0&&i.length===0&&n!==null;if(s){var l=n.parentNode;$u(l),l.append(n),r.clear(),He(t,e[0].prev,e[o-1].next)}da(i,()=>{for(var u=0;u<o;u++){var c=e[u];s||(r.delete(c.k),He(t,c.prev,c.next)),Me(c.e,!s)}})}function oe(t,e,n,r,i,o=null){var a=t,s={flags:e,items:new Map,first:null},l=(e&4)!==0;if(l){var u=t;a=u.appendChild(_r())}var c=null,f=!1;_n(()=>{var h=n(),p=di(h)?h:h==null?[]:pi(h),_=p.length;if(!(f&&_===0)){f=_===0;{var g=ut;Ac(p,s,a,i,e,(g.f&ce)!==0,r)}o!==null&&(_===0?c?mr(c):c=Ze(()=>o(a)):c!==null&&Ln(c,()=>{c=null})),n()}})}function Ac(t,e,n,r,i,o,a,s){var E,M,F,U;var l=(i&8)!==0,u=(i&3)!==0,c=t.length,f=e.items,h=e.first,p=h,_,g=null,y,k=[],S=[],m,C,v,b;if(l)for(b=0;b<c;b+=1)m=t[b],C=a(m,b),v=f.get(C),v!==void 0&&((E=v.a)==null||E.measure(),(y!=null?y:y=new Set).add(v));for(b=0;b<c;b+=1){if(m=t[b],C=a(m,b),v=f.get(C),v===void 0){var D=p?p.e.nodes_start:n;g=Fc(D,e,g,g===null?e.first:g.next,m,C,b,r,i),f.set(C,g),k=[],S=[],p=g.next;continue}if(u&&Nc(v,m,b,i),v.e.f&ce&&(mr(v.e),l&&((M=v.a)==null||M.unfix(),(y!=null?y:y=new Set).delete(v))),v!==p){if(_!==void 0&&_.has(v)){if(k.length<S.length){var L=S[0],B;g=L.prev;var V=k[0],w=k[k.length-1];for(B=0;B<k.length;B+=1)Ea(k[B],L,n);for(B=0;B<S.length;B+=1)_.delete(S[B]);He(e,V.prev,w.next),He(e,g,V),He(e,w,L),p=L,g=w,b-=1,k=[],S=[]}else _.delete(v),Ea(v,p,n),He(e,v.prev,v.next),He(e,v,g===null?e.first:g.next),He(e,g,v),g=v;continue}for(k=[],S=[];p!==null&&p.k!==C;)(o||!(p.e.f&ce))&&(_!=null?_:_=new Set).add(p),S.push(p),p=p.next;if(p===null)continue;v=p}k.push(v),g=v,p=v.next}if(p!==null||_!==void 0){for(var R=_===void 0?[]:pi(_);p!==null;)(o||!(p.e.f&ce))&&R.push(p),p=p.next;var A=R.length;if(A>0){var T=i&4&&c===0?n:null;if(l){for(b=0;b<A;b+=1)(F=R[b].a)==null||F.measure();for(b=0;b<A;b+=1)(U=R[b].a)==null||U.fix()}Tc(e,R,T,f)}}l&&Ei(()=>{var Y;if(y!==void 0)for(v of y)(Y=v.a)==null||Y.apply()}),tt.first=e.first&&e.first.e,tt.last=g&&g.e}function Nc(t,e,n,r){r&1&&mi(t.v,e),r&2?mi(t.i,n):t.i=n}function Fc(t,e,n,r,i,o,a,s,l,u){var c=(l&1)!==0,f=(l&16)===0,h=c?f?Zu(i):Mt(i):i,p=l&2?Mt(a):a,_={i:p,v:h,k:o,a:null,e:null,prev:n,next:r};try{return _.e=Ze(()=>s(t,h,p),yi),_.e.prev=n&&n.e,_.e.next=r&&r.e,n===null?e.first=_:(n.next=_,n.e.next=_.e),r!==null&&(r.prev=_,r.e.prev=_.e),_}finally{}}function Ea(t,e,n){for(var r=t.next?t.next.e.nodes_start:n,i=e?e.e.nodes_start:n,o=t.e.nodes_start;o!==r;){var a=gr(o);i.before(o),o=a}}function He(t,e,n){e===null?t.first=n:(e.next=n,e.e.next=n&&n.e),n!==null&&(n.prev=e,n.e.prev=e&&e.e)}function Cc(t,e,n,r,i){var o=t,a="",s;_n(()=>{var l;a!==(a=(l=e())!=null?l:"")&&(s!==void 0&&(Me(s),s=void 0),a!==""&&(s=Ze(()=>{var u=a+"",c=Ai(u);vn(fe(c),c.lastChild),o.before(c)})))})}function _t(t,e,n,r){var o;var i=(o=t.__attributes)!=null?o:t.__attributes={};i[e]!==(i[e]=n)&&(e==="style"&&"__styles"in t&&(t.__styles={}),e==="loading"&&(t[Lu]=n),n==null?t.removeAttribute(e):typeof n!="string"&&Ic(t).includes(e)?t[e]=n:t.setAttribute(e,n))}var ka=new Map;function Ic(t){var e=ka.get(t.nodeName);if(e)return e;ka.set(t.nodeName,e=[]);for(var n,r=t,i=Element.prototype;i!==r;){n=Fu(r);for(var o in n)n[o].set&&e.push(o);r=jo(r)}return e}function Dc(t,e,n){var r=t.__className,i=Sa(e);(r!==i||yi)&&(i===""?t.removeAttribute("class"):t.setAttribute("class",i),t.__className=i)}function Ni(t,e,n){var r=t.__className,i=Sa(e);(r!==i||yi)&&(e==null&&!n?t.removeAttribute("class"):t.className=i,t.__className=i)}function Sa(t,e){return(t==null?"":t)+""}function zt(t,e,n){if(n){if(t.classList.contains(e))return;t.classList.add(e)}else{if(!t.classList.contains(e))return;t.classList.remove(e)}}function dt(t,e,n,r){var o;var i=(o=t.__styles)!=null?o:t.__styles={};i[e]!==n&&(i[e]=n,n==null?t.style.removeProperty(e):t.style.setProperty(e,n,""))}function Pc(t,e,n=e){wc(t,"input",r=>{var i=r?t.defaultValue:t.value;if(i=Fi(t)?Ci(i):i,n(i),i!==(i=e())){var o=t.selectionStart,a=t.selectionEnd;t.value=i!=null?i:"",a!==null&&(t.selectionStart=o,t.selectionEnd=Math.min(a,t.value.length))}}),kr(e)==null&&t.value&&n(Fi(t)?Ci(t.value):t.value),la(()=>{var r=e();Fi(t)&&r===Ci(t.value)||t.type==="date"&&!r&&!t.value||r!==t.value&&(t.value=r!=null?r:"")})}function Fi(t){var e=t.type;return e==="number"||e==="range"}function Ci(t){return t===""?null:+t}const ci=class ci{constructor(e){Pe(this,ui);Pe(this,qe,new WeakMap);Pe(this,Cn);Pe(this,fr);Vo(this,fr,e)}observe(e,n){var r=at(this,qe).get(e)||new Set;return r.add(n),at(this,qe).set(e,r),hr(this,ui,Su).call(this).observe(e,at(this,fr)),()=>{var i=at(this,qe).get(e);i.delete(n),i.size===0&&(at(this,qe).delete(e),at(this,Cn).unobserve(e))}}};qe=new WeakMap,Cn=new WeakMap,fr=new WeakMap,ui=new WeakSet,Su=function(){var e;return(e=at(this,Cn))!=null?e:Vo(this,Cn,new ResizeObserver(n=>{for(var r of n){ci.entries.set(r.target,r);for(var i of at(this,qe).get(r.target)||[])i(r)}}))},Eu(ci,"entries",new WeakMap);let Ii=ci;var Rc=new Ii({box:"border-box"});function Di(t,e,n){var r=Rc.observe(t,()=>n(t[e]));vr(()=>(kr(()=>n(t[e])),r))}function Ta(t,e){return t===e||(t==null?void 0:t[On])===e}function ke(t={},e,n,r){return vr(()=>{var i,o;return la(()=>{i=o,o=(r==null?void 0:r())||[],kr(()=>{t!==n(...o)&&(e(t,...o),i&&Ta(n(...i),t)&&e(null,...i))})}),()=>{Ei(()=>{o&&Ta(n(...o),t)&&e(null,...o)})}}),t}function Pi(t,e,n,r){var p,_;var i=!$o,o=(n&8)!==0,a;a=t[e];var s=On in t||Ou in t,l=(_=(p=hn(t,e))==null?void 0:p.set)!=null?_:s&&o&&e in t?g=>t[e]=g:void 0,u=r,c=!0,f=()=>(c&&(c=!1,u=r),u);a===void 0&&r!==void 0&&(l&&i&&qu(),a=f(),l&&l(a));var h;return h=()=>{var g=t[e];return g===void 0?f():(c=!0,g)},h}const Oc="5";typeof window!="undefined"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Oc);function Wn(t){N(t,t.v+1)}const zo=class zo extends Map{constructor(n){super();Pe(this,In);Pe(this,ye,new Map);Pe(this,we,Mt(0));Pe(this,Ie,Mt(0));if(n){for(var[r,i]of n)super.set(r,i);at(this,Ie).v=super.size}}has(n){var r=at(this,ye),i=r.get(n);if(i===void 0){var o=super.get(n);if(o!==void 0)i=Mt(0),r.set(n,i);else return d(at(this,we)),!1}return d(i),!0}forEach(n,r){hr(this,In,fi).call(this),super.forEach(n,r)}get(n){var r=at(this,ye),i=r.get(n);if(i===void 0){var o=super.get(n);if(o!==void 0)i=Mt(0),r.set(n,i);else{d(at(this,we));return}}return d(i),super.get(n)}set(n,r){var f;var i=at(this,ye),o=i.get(n),a=super.get(n),s=super.set(n,r),l=at(this,we);if(o===void 0)i.set(n,Mt(0)),N(at(this,Ie),super.size),Wn(l);else if(a!==r){Wn(o);var u=l.reactions===null?null:new Set(l.reactions),c=u===null||!((f=o.reactions)!=null&&f.every(h=>u.has(h)));c&&Wn(l)}return s}delete(n){var r=at(this,ye),i=r.get(n),o=super.delete(n);return i!==void 0&&(r.delete(n),N(at(this,Ie),super.size),N(i,-1),Wn(at(this,we))),o}clear(){if(super.size!==0){super.clear();var n=at(this,ye);N(at(this,Ie),0);for(var r of n.values())N(r,-1);Wn(at(this,we)),n.clear()}}keys(){return d(at(this,we)),super.keys()}values(){return hr(this,In,fi).call(this),super.values()}entries(){return hr(this,In,fi).call(this),super.entries()}[Symbol.iterator](){return this.entries()}get size(){return d(at(this,Ie)),super.size}};ye=new WeakMap,we=new WeakMap,Ie=new WeakMap,In=new WeakSet,fi=function(){d(at(this,we));var n=at(this,ye);if(at(this,Ie).v!==n.size)for(var r of ku(zo.prototype,this,"keys").call(this))n.has(r)||n.set(r,Mt(0));for(var[,i]of at(this,ye))d(i)};let Nr=zo;function qn(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Lc(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Aa(t){let e,n,r;t.length!==2?(e=qn,n=(s,l)=>qn(t(s),l),r=(s,l)=>t(s)-l):(e=t===qn||t===Lc?t:Hc,n=t,r=t);function i(s,l,u=0,c=s.length){if(u<c){if(e(l,l)!==0)return c;do{const f=u+c>>>1;n(s[f],l)<0?u=f+1:c=f}while(u<c)}return u}function o(s,l,u=0,c=s.length){if(u<c){if(e(l,l)!==0)return c;do{const f=u+c>>>1;n(s[f],l)<=0?u=f+1:c=f}while(u<c)}return u}function a(s,l,u=0,c=s.length){const f=i(s,l,u,c-1);return f>u&&r(s[f-1],l)>-r(s[f],l)?f-1:f}return{left:i,center:a,right:o}}function Hc(){return 0}function Uc(t){return t===null?NaN:+t}const Bc=Aa(qn).right;Aa(Uc).center;class Yc extends Map{constructor(e,n=qc){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(Na(this,e))}has(e){return super.has(Na(this,e))}set(e,n){return super.set(zc(this,e),n)}delete(e){return super.delete(Wc(this,e))}}function Na({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function zc({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function Wc({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function qc(t){return t!==null&&typeof t=="object"?t.valueOf():t}function Ri(t){return t}function Vc(t,...e){return Fa(t,Ri,Ri,e)}function Gc(t,e,...n){return Fa(t,Ri,e,n)}function Fa(t,e,n,r){return function i(o,a){if(a>=r.length)return n(o);const s=new Yc,l=r[a++];let u=-1;for(const c of o){const f=l(c,++u,o),h=s.get(f);h?h.push(c):s.set(f,[c])}for(const[c,f]of s)s.set(c,i(f,a));return e(s)}(t,0)}const jc=Math.sqrt(50),Xc=Math.sqrt(10),Kc=Math.sqrt(2);function Fr(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),o=r/Math.pow(10,i),a=o>=jc?10:o>=Xc?5:o>=Kc?2:1;let s,l,u;return i<0?(u=Math.pow(10,-i)/a,s=Math.round(t*u),l=Math.round(e*u),s/u<t&&++s,l/u>e&&--l,u=-u):(u=Math.pow(10,i)*a,s=Math.round(t/u),l=Math.round(e/u),s*u<t&&++s,l*u>e&&--l),l<s&&.5<=n&&n<2?Fr(t,e,n*2):[s,l,u]}function Zc(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,o,a]=r?Fr(e,t,n):Fr(t,e,n);if(!(o>=i))return[];const s=o-i+1,l=new Array(s);if(r)if(a<0)for(let u=0;u<s;++u)l[u]=(o-u)/-a;else for(let u=0;u<s;++u)l[u]=(o-u)*a;else if(a<0)for(let u=0;u<s;++u)l[u]=(i+u)/-a;else for(let u=0;u<s;++u)l[u]=(i+u)*a;return l}function Oi(t,e,n){return e=+e,t=+t,n=+n,Fr(t,e,n)[2]}function Qc(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?Oi(e,t,n):Oi(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function Li(t,e){let n;if(e===void 0)for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of t)(i=e(i,++r,t))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function Hi(t,e){let n=0;if(e===void 0)for(let r of t)(r=+r)&&(n+=r);else{let r=-1;for(let i of t)(i=+e(i,++r,t))&&(n+=i)}return n}function Jc(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function Ui(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Ca(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Vn(){}var Gn=.7,Cr=1/Gn,yn="\\s*([+-]?\\d+)\\s*",jn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",_e="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",$c=/^#([0-9a-f]{3,8})$/,tf=new RegExp(`^rgb\\(${yn},${yn},${yn}\\)$`),ef=new RegExp(`^rgb\\(${_e},${_e},${_e}\\)$`),nf=new RegExp(`^rgba\\(${yn},${yn},${yn},${jn}\\)$`),rf=new RegExp(`^rgba\\(${_e},${_e},${_e},${jn}\\)$`),of=new RegExp(`^hsl\\(${jn},${_e},${_e}\\)$`),af=new RegExp(`^hsla\\(${jn},${_e},${_e},${jn}\\)$`),Ia={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Ui(Vn,Je,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Da,formatHex:Da,formatHex8:sf,formatHsl:lf,formatRgb:Pa,toString:Pa});function Da(){return this.rgb().formatHex()}function sf(){return this.rgb().formatHex8()}function lf(){return Ua(this).formatHsl()}function Pa(){return this.rgb().formatRgb()}function Je(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=$c.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?Ra(e):n===3?new Wt(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Ir(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Ir(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=tf.exec(t))?new Wt(e[1],e[2],e[3],1):(e=ef.exec(t))?new Wt(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=nf.exec(t))?Ir(e[1],e[2],e[3],e[4]):(e=rf.exec(t))?Ir(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=of.exec(t))?Ha(e[1],e[2]/100,e[3]/100,1):(e=af.exec(t))?Ha(e[1],e[2]/100,e[3]/100,e[4]):Ia.hasOwnProperty(t)?Ra(Ia[t]):t==="transparent"?new Wt(NaN,NaN,NaN,0):null}function Ra(t){return new Wt(t>>16&255,t>>8&255,t&255,1)}function Ir(t,e,n,r){return r<=0&&(t=e=n=NaN),new Wt(t,e,n,r)}function uf(t){return t instanceof Vn||(t=Je(t)),t?(t=t.rgb(),new Wt(t.r,t.g,t.b,t.opacity)):new Wt}function Bi(t,e,n,r){return arguments.length===1?uf(t):new Wt(t,e,n,r==null?1:r)}function Wt(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}Ui(Wt,Bi,Ca(Vn,{brighter(t){return t=t==null?Cr:Math.pow(Cr,t),new Wt(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Gn:Math.pow(Gn,t),new Wt(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Wt($e(this.r),$e(this.g),$e(this.b),Dr(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Oa,formatHex:Oa,formatHex8:cf,formatRgb:La,toString:La}));function Oa(){return`#${tn(this.r)}${tn(this.g)}${tn(this.b)}`}function cf(){return`#${tn(this.r)}${tn(this.g)}${tn(this.b)}${tn((isNaN(this.opacity)?1:this.opacity)*255)}`}function La(){const t=Dr(this.opacity);return`${t===1?"rgb(":"rgba("}${$e(this.r)}, ${$e(this.g)}, ${$e(this.b)}${t===1?")":`, ${t})`}`}function Dr(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function $e(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function tn(t){return t=$e(t),(t<16?"0":"")+t.toString(16)}function Ha(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new ae(t,e,n,r)}function Ua(t){if(t instanceof ae)return new ae(t.h,t.s,t.l,t.opacity);if(t instanceof Vn||(t=Je(t)),!t)return new ae;if(t instanceof ae)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),a=NaN,s=o-i,l=(o+i)/2;return s?(e===o?a=(n-r)/s+(n<r)*6:n===o?a=(r-e)/s+2:a=(e-n)/s+4,s/=l<.5?o+i:2-o-i,a*=60):s=l>0&&l<1?0:a,new ae(a,s,l,t.opacity)}function ff(t,e,n,r){return arguments.length===1?Ua(t):new ae(t,e,n,r==null?1:r)}function ae(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}Ui(ae,ff,Ca(Vn,{brighter(t){return t=t==null?Cr:Math.pow(Cr,t),new ae(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Gn:Math.pow(Gn,t),new ae(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new Wt(Yi(t>=240?t-240:t+120,i,r),Yi(t,i,r),Yi(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new ae(Ba(this.h),Pr(this.s),Pr(this.l),Dr(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Dr(this.opacity);return`${t===1?"hsl(":"hsla("}${Ba(this.h)}, ${Pr(this.s)*100}%, ${Pr(this.l)*100}%${t===1?")":`, ${t})`}`}}));function Ba(t){return t=(t||0)%360,t<0?t+360:t}function Pr(t){return Math.max(0,Math.min(1,t||0))}function Yi(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const zi=t=>()=>t;function hf(t,e){return function(n){return t+n*e}}function df(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function pf(t){return(t=+t)==1?Ya:function(e,n){return n-e?df(e,n,t):zi(isNaN(e)?n:e)}}function Ya(t,e){var n=e-t;return n?hf(t,n):zi(isNaN(t)?e:t)}const za=function t(e){var n=pf(e);function r(i,o){var a=n((i=Bi(i)).r,(o=Bi(o)).r),s=n(i.g,o.g),l=n(i.b,o.b),u=Ya(i.opacity,o.opacity);return function(c){return i.r=a(c),i.g=s(c),i.b=l(c),i.opacity=u(c),i+""}}return r.gamma=t,r}(1);function _f(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(o){for(i=0;i<n;++i)r[i]=t[i]*(1-o)+e[i]*o;return r}}function gf(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function vf(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),o=new Array(n),a;for(a=0;a<r;++a)i[a]=Vi(t[a],e[a]);for(;a<n;++a)o[a]=e[a];return function(s){for(a=0;a<r;++a)o[a]=i[a](s);return o}}function mf(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function Rr(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function yf(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=Vi(t[i],e[i]):r[i]=e[i];return function(o){for(i in n)r[i]=n[i](o);return r}}var Wi=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,qi=new RegExp(Wi.source,"g");function wf(t){return function(){return t}}function xf(t){return function(e){return t(e)+""}}function bf(t,e){var n=Wi.lastIndex=qi.lastIndex=0,r,i,o,a=-1,s=[],l=[];for(t=t+"",e=e+"";(r=Wi.exec(t))&&(i=qi.exec(e));)(o=i.index)>n&&(o=e.slice(n,o),s[a]?s[a]+=o:s[++a]=o),(r=r[0])===(i=i[0])?s[a]?s[a]+=i:s[++a]=i:(s[++a]=null,l.push({i:a,x:Rr(r,i)})),n=qi.lastIndex;return n<e.length&&(o=e.slice(n),s[a]?s[a]+=o:s[++a]=o),s.length<2?l[0]?xf(l[0].x):wf(e):(e=l.length,function(u){for(var c=0,f;c<e;++c)s[(f=l[c]).i]=f.x(u);return s.join("")})}function Vi(t,e){var n=typeof e,r;return e==null||n==="boolean"?zi(e):(n==="number"?Rr:n==="string"?(r=Je(e))?(e=r,za):bf:e instanceof Je?za:e instanceof Date?mf:gf(e)?_f:Array.isArray(e)?vf:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?yf:Rr)(t,e)}function Mf(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function Ef(t){return function(){return t}}function kf(t){return+t}var Wa=[0,1];function wn(t){return t}function Gi(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:Ef(isNaN(e)?NaN:.5)}function Sf(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function Tf(t,e,n){var r=t[0],i=t[1],o=e[0],a=e[1];return i<r?(r=Gi(i,r),o=n(a,o)):(r=Gi(r,i),o=n(o,a)),function(s){return o(r(s))}}function Af(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),o=new Array(r),a=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<r;)i[a]=Gi(t[a],t[a+1]),o[a]=n(e[a],e[a+1]);return function(s){var l=Bc(t,s,1,r)-1;return o[l](i[l](s))}}function Nf(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Ff(){var t=Wa,e=Wa,n=Vi,r,i,o,a=wn,s,l,u;function c(){var h=Math.min(t.length,e.length);return a!==wn&&(a=Sf(t[0],t[h-1])),s=h>2?Af:Tf,l=u=null,f}function f(h){return h==null||isNaN(h=+h)?o:(l||(l=s(t.map(r),e,n)))(r(a(h)))}return f.invert=function(h){return a(i((u||(u=s(e,t.map(r),Rr)))(h)))},f.domain=function(h){return arguments.length?(t=Array.from(h,kf),c()):t.slice()},f.range=function(h){return arguments.length?(e=Array.from(h),c()):e.slice()},f.rangeRound=function(h){return e=Array.from(h),n=Mf,c()},f.clamp=function(h){return arguments.length?(a=h?!0:wn,c()):a!==wn},f.interpolate=function(h){return arguments.length?(n=h,c()):n},f.unknown=function(h){return arguments.length?(o=h,f):o},function(h,p){return r=h,i=p,c()}}function Cf(){return Ff()(wn,wn)}function If(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Or(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function xn(t){return t=Or(Math.abs(t)),t?t[1]:NaN}function Df(t,e){return function(n,r){for(var i=n.length,o=[],a=0,s=t[0],l=0;i>0&&s>0&&(l+s+1>r&&(s=Math.max(1,r-l)),o.push(n.substring(i-=s,i+s)),!((l+=s+1)>r));)s=t[a=(a+1)%t.length];return o.reverse().join(e)}}function Pf(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var Rf=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Lr(t){if(!(e=Rf.exec(t)))throw new Error("invalid format: "+t);var e;return new ji({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Lr.prototype=ji.prototype;function ji(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}ji.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Of(t){t:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break t;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var qa;function Lf(t,e){var n=Or(t,e);if(!n)return t+"";var r=n[0],i=n[1],o=i-(qa=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,a=r.length;return o===a?r:o>a?r+new Array(o-a+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+Or(t,Math.max(0,e+o-1))[0]}function Va(t,e){var n=Or(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const Ga={"%":function(t,e){return(t*100).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:If,e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return Va(t*100,e)},r:Va,s:Lf,X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}};function ja(t){return t}var Xa=Array.prototype.map,Ka=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Xi(t){var e=t.grouping===void 0||t.thousands===void 0?ja:Df(Xa.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",o=t.numerals===void 0?ja:Pf(Xa.call(t.numerals,String)),a=t.percent===void 0?"%":t.percent+"",s=t.minus===void 0?"-":t.minus+"",l=t.nan===void 0?"NaN":t.nan+"";function u(f){f=Lr(f);var h=f.fill,p=f.align,_=f.sign,g=f.symbol,y=f.zero,k=f.width,S=f.comma,m=f.precision,C=f.trim,v=f.type;v==="n"?(S=!0,v="g"):Ga[v]||(m===void 0&&(m=12),C=!0,v="g"),(y||h==="0"&&p==="=")&&(y=!0,h="0",p="=");var b=g==="$"?n:g==="#"&&/[boxX]/.test(v)?"0"+v.toLowerCase():"",D=g==="$"?r:/[%p]/.test(v)?a:"",L=Ga[v],B=/[defgprs%]/.test(v);m=m===void 0?6:/[gprs]/.test(v)?Math.max(1,Math.min(21,m)):Math.max(0,Math.min(20,m));function V(w){var R=b,A=D,T,E,M;if(v==="c")A=L(w)+A,w="";else{w=+w;var F=w<0||1/w<0;if(w=isNaN(w)?l:L(Math.abs(w),m),C&&(w=Of(w)),F&&+w==0&&_!=="+"&&(F=!1),R=(F?_==="("?_:s:_==="-"||_==="("?"":_)+R,A=(v==="s"?Ka[8+qa/3]:"")+A+(F&&_==="("?")":""),B){for(T=-1,E=w.length;++T<E;)if(M=w.charCodeAt(T),48>M||M>57){A=(M===46?i+w.slice(T+1):w.slice(T))+A,w=w.slice(0,T);break}}}S&&!y&&(w=e(w,1/0));var U=R.length+w.length+A.length,Y=U<k?new Array(k-U+1).join(h):"";switch(S&&y&&(w=e(Y+w,Y.length?k-A.length:1/0),Y=""),p){case"<":w=R+w+A+Y;break;case"=":w=R+Y+w+A;break;case"^":w=Y.slice(0,U=Y.length>>1)+R+w+A+Y.slice(U);break;default:w=Y+R+w+A;break}return o(w)}return V.toString=function(){return f+""},V}function c(f,h){var p=u((f=Lr(f),f.type="f",f)),_=Math.max(-8,Math.min(8,Math.floor(xn(h)/3)))*3,g=Math.pow(10,-_),y=Ka[8+_/3];return function(k){return p(g*k)+y}}return{format:u,formatPrefix:c}}var Hr,en,Za;Hf({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"});function Hf(t){return Hr=Xi(t),en=Hr.format,Za=Hr.formatPrefix,Hr}function Uf(t){return Math.max(0,-xn(Math.abs(t)))}function Bf(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(xn(e)/3)))*3-xn(Math.abs(t)))}function Yf(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,xn(e)-xn(t))+1}function zf(t,e,n,r){var i=Qc(t,e,n),o;switch(r=Lr(r==null?",f":r),r.type){case"s":{var a=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(o=Bf(i,a))&&(r.precision=o),Za(r,a)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(o=Yf(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=o-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(o=Uf(i))&&(r.precision=o-(r.type==="%")*2);break}}return en(r)}function Wf(t){var e=t.domain;return t.ticks=function(n){var r=e();return Zc(r[0],r[r.length-1],n==null?10:n)},t.tickFormat=function(n,r){var i=e();return zf(i[0],i[i.length-1],n==null?10:n,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,o=r.length-1,a=r[i],s=r[o],l,u,c=10;for(s<a&&(u=a,a=s,s=u,u=i,i=o,o=u);c-- >0;){if(u=Oi(a,s,n),u===l)return r[i]=a,r[o]=s,e(r);if(u>0)a=Math.floor(a/u)*u,s=Math.ceil(s/u)*u;else if(u<0)a=Math.ceil(a*u)/u,s=Math.floor(s*u)/u;else break;l=u}return t},t}function Qa(){var t=Cf();return t.copy=function(){return Nf(t,Qa())},Jc.apply(t,arguments),Wf(t)}var Ki=new Date,Zi=new Date;function Se(t,e,n,r){function i(o){return t(o=arguments.length===0?new Date:new Date(+o)),o}return i.floor=function(o){return t(o=new Date(+o)),o},i.ceil=function(o){return t(o=new Date(o-1)),e(o,1),t(o),o},i.round=function(o){var a=i(o),s=i.ceil(o);return o-a<s-o?a:s},i.offset=function(o,a){return e(o=new Date(+o),a==null?1:Math.floor(a)),o},i.range=function(o,a,s){var l=[],u;if(o=i.ceil(o),s=s==null?1:Math.floor(s),!(o<a)||!(s>0))return l;do l.push(u=new Date(+o)),e(o,s),t(o);while(u<o&&o<a);return l},i.filter=function(o){return Se(function(a){if(a>=a)for(;t(a),!o(a);)a.setTime(a-1)},function(a,s){if(a>=a)if(s<0)for(;++s<=0;)for(;e(a,-1),!o(a););else for(;--s>=0;)for(;e(a,1),!o(a););})},n&&(i.count=function(o,a){return Ki.setTime(+o),Zi.setTime(+a),t(Ki),t(Zi),Math.floor(n(Ki,Zi))},i.every=function(o){return o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?i.filter(r?function(a){return r(a)%o===0}:function(a){return i.count(0,a)%o===0}):i}),i}var Ja=6e4,$a=864e5,ts=6048e5,Qi=Se(function(t){t.setHours(0,0,0,0)},function(t,e){t.setDate(t.getDate()+e)},function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Ja)/$a},function(t){return t.getDate()-1});Qi.range;function nn(t){return Se(function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},function(e,n){e.setDate(e.getDate()+n*7)},function(e,n){return(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*Ja)/ts})}var es=nn(0),Ur=nn(1),qf=nn(2),Vf=nn(3),bn=nn(4),Gf=nn(5),jf=nn(6);es.range,Ur.range,qf.range,Vf.range,bn.range,Gf.range,jf.range;var rn=Se(function(t){t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t,e){return e.getFullYear()-t.getFullYear()},function(t){return t.getFullYear()});rn.every=function(t){return!isFinite(t=Math.floor(t))||!(t>0)?null:Se(function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,n){e.setFullYear(e.getFullYear()+n*t)})},rn.range;var Ji=Se(function(t){t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+e)},function(t,e){return(e-t)/$a},function(t){return t.getUTCDate()-1});Ji.range;function on(t){return Se(function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},function(e,n){e.setUTCDate(e.getUTCDate()+n*7)},function(e,n){return(n-e)/ts})}var ns=on(0),Br=on(1),Xf=on(2),Kf=on(3),Mn=on(4),Zf=on(5),Qf=on(6);ns.range,Br.range,Xf.range,Kf.range,Mn.range,Zf.range,Qf.range;var an=Se(function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)},function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()},function(t){return t.getUTCFullYear()});an.every=function(t){return!isFinite(t=Math.floor(t))||!(t>0)?null:Se(function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,n){e.setUTCFullYear(e.getUTCFullYear()+n*t)})},an.range;function $i(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function to(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Xn(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function Jf(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,o=t.days,a=t.shortDays,s=t.months,l=t.shortMonths,u=Kn(i),c=Zn(i),f=Kn(o),h=Zn(o),p=Kn(a),_=Zn(a),g=Kn(s),y=Zn(s),k=Kn(l),S=Zn(l),m={a:F,A:U,b:Y,B:Q,c:null,d:ls,e:ls,f:xh,g:Ch,G:Dh,H:mh,I:yh,j:wh,L:us,m:bh,M:Mh,p:ht,q:Vt,Q:_s,s:gs,S:Eh,u:kh,U:Sh,V:Th,w:Ah,W:Nh,x:null,X:null,y:Fh,Y:Ih,Z:Ph,"%":ps},C={a:wt,A:It,b:vt,B:Lt,c:null,d:fs,e:fs,f:Hh,g:Xh,G:Zh,H:Rh,I:Oh,j:Lh,L:hs,m:Uh,M:Bh,p:Ve,q:Qt,Q:_s,s:gs,S:Yh,u:zh,U:Wh,V:qh,w:Vh,W:Gh,x:null,X:null,y:jh,Y:Kh,Z:Qh,"%":ps},v={a:V,A:w,b:R,B:A,c:T,d:as,e:as,f:ph,g:os,G:is,H:ss,I:ss,j:ch,L:dh,m:uh,M:fh,p:B,q:lh,Q:gh,s:vh,S:hh,u:rh,U:ih,V:oh,w:nh,W:ah,x:E,X:M,y:os,Y:is,Z:sh,"%":_h};m.x=b(n,m),m.X=b(r,m),m.c=b(e,m),C.x=b(n,C),C.X=b(r,C),C.c=b(e,C);function b(I,G){return function(K){var x=[],xt=-1,rt=0,kt=I.length,bt,mt,Ge;for(K instanceof Date||(K=new Date(+K));++xt<kt;)I.charCodeAt(xt)===37&&(x.push(I.slice(rt,xt)),(mt=rs[bt=I.charAt(++xt)])!=null?bt=I.charAt(++xt):mt=bt==="e"?" ":"0",(Ge=G[bt])&&(bt=Ge(K,mt)),x.push(bt),rt=xt+1);return x.push(I.slice(rt,xt)),x.join("")}}function D(I,G){return function(K){var x=Xn(1900,void 0,1),xt=L(x,I,K+="",0),rt,kt;if(xt!=K.length)return null;if("Q"in x)return new Date(x.Q);if("s"in x)return new Date(x.s*1e3+("L"in x?x.L:0));if(G&&!("Z"in x)&&(x.Z=0),"p"in x&&(x.H=x.H%12+x.p*12),x.m===void 0&&(x.m="q"in x?x.q:0),"V"in x){if(x.V<1||x.V>53)return null;"w"in x||(x.w=1),"Z"in x?(rt=to(Xn(x.y,0,1)),kt=rt.getUTCDay(),rt=kt>4||kt===0?Br.ceil(rt):Br(rt),rt=Ji.offset(rt,(x.V-1)*7),x.y=rt.getUTCFullYear(),x.m=rt.getUTCMonth(),x.d=rt.getUTCDate()+(x.w+6)%7):(rt=$i(Xn(x.y,0,1)),kt=rt.getDay(),rt=kt>4||kt===0?Ur.ceil(rt):Ur(rt),rt=Qi.offset(rt,(x.V-1)*7),x.y=rt.getFullYear(),x.m=rt.getMonth(),x.d=rt.getDate()+(x.w+6)%7)}else("W"in x||"U"in x)&&("w"in x||(x.w="u"in x?x.u%7:"W"in x?1:0),kt="Z"in x?to(Xn(x.y,0,1)).getUTCDay():$i(Xn(x.y,0,1)).getDay(),x.m=0,x.d="W"in x?(x.w+6)%7+x.W*7-(kt+5)%7:x.w+x.U*7-(kt+6)%7);return"Z"in x?(x.H+=x.Z/100|0,x.M+=x.Z%100,to(x)):$i(x)}}function L(I,G,K,x){for(var xt=0,rt=G.length,kt=K.length,bt,mt;xt<rt;){if(x>=kt)return-1;if(bt=G.charCodeAt(xt++),bt===37){if(bt=G.charAt(xt++),mt=v[bt in rs?G.charAt(xt++):bt],!mt||(x=mt(I,K,x))<0)return-1}else if(bt!=K.charCodeAt(x++))return-1}return x}function B(I,G,K){var x=u.exec(G.slice(K));return x?(I.p=c[x[0].toLowerCase()],K+x[0].length):-1}function V(I,G,K){var x=p.exec(G.slice(K));return x?(I.w=_[x[0].toLowerCase()],K+x[0].length):-1}function w(I,G,K){var x=f.exec(G.slice(K));return x?(I.w=h[x[0].toLowerCase()],K+x[0].length):-1}function R(I,G,K){var x=k.exec(G.slice(K));return x?(I.m=S[x[0].toLowerCase()],K+x[0].length):-1}function A(I,G,K){var x=g.exec(G.slice(K));return x?(I.m=y[x[0].toLowerCase()],K+x[0].length):-1}function T(I,G,K){return L(I,e,G,K)}function E(I,G,K){return L(I,n,G,K)}function M(I,G,K){return L(I,r,G,K)}function F(I){return a[I.getDay()]}function U(I){return o[I.getDay()]}function Y(I){return l[I.getMonth()]}function Q(I){return s[I.getMonth()]}function ht(I){return i[+(I.getHours()>=12)]}function Vt(I){return 1+~~(I.getMonth()/3)}function wt(I){return a[I.getUTCDay()]}function It(I){return o[I.getUTCDay()]}function vt(I){return l[I.getUTCMonth()]}function Lt(I){return s[I.getUTCMonth()]}function Ve(I){return i[+(I.getUTCHours()>=12)]}function Qt(I){return 1+~~(I.getUTCMonth()/3)}return{format:function(I){var G=b(I+="",m);return G.toString=function(){return I},G},parse:function(I){var G=D(I+="",!1);return G.toString=function(){return I},G},utcFormat:function(I){var G=b(I+="",C);return G.toString=function(){return I},G},utcParse:function(I){var G=D(I+="",!0);return G.toString=function(){return I},G}}}var rs={"-":"",_:" ",0:"0"},Et=/^\s*\d+/,$f=/^%/,th=/[\\^$*+?|[\]().{}]/g;function et(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(e)+i:i)}function eh(t){return t.replace(th,"\\$&")}function Kn(t){return new RegExp("^(?:"+t.map(eh).join("|")+")","i")}function Zn(t){for(var e={},n=-1,r=t.length;++n<r;)e[t[n].toLowerCase()]=n;return e}function nh(t,e,n){var r=Et.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function rh(t,e,n){var r=Et.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function ih(t,e,n){var r=Et.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function oh(t,e,n){var r=Et.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function ah(t,e,n){var r=Et.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function is(t,e,n){var r=Et.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function os(t,e,n){var r=Et.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function sh(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function lh(t,e,n){var r=Et.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function uh(t,e,n){var r=Et.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function as(t,e,n){var r=Et.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function ch(t,e,n){var r=Et.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function ss(t,e,n){var r=Et.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function fh(t,e,n){var r=Et.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function hh(t,e,n){var r=Et.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function dh(t,e,n){var r=Et.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function ph(t,e,n){var r=Et.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function _h(t,e,n){var r=$f.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function gh(t,e,n){var r=Et.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function vh(t,e,n){var r=Et.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function ls(t,e){return et(t.getDate(),e,2)}function mh(t,e){return et(t.getHours(),e,2)}function yh(t,e){return et(t.getHours()%12||12,e,2)}function wh(t,e){return et(1+Qi.count(rn(t),t),e,3)}function us(t,e){return et(t.getMilliseconds(),e,3)}function xh(t,e){return us(t,e)+"000"}function bh(t,e){return et(t.getMonth()+1,e,2)}function Mh(t,e){return et(t.getMinutes(),e,2)}function Eh(t,e){return et(t.getSeconds(),e,2)}function kh(t){var e=t.getDay();return e===0?7:e}function Sh(t,e){return et(es.count(rn(t)-1,t),e,2)}function cs(t){var e=t.getDay();return e>=4||e===0?bn(t):bn.ceil(t)}function Th(t,e){return t=cs(t),et(bn.count(rn(t),t)+(rn(t).getDay()===4),e,2)}function Ah(t){return t.getDay()}function Nh(t,e){return et(Ur.count(rn(t)-1,t),e,2)}function Fh(t,e){return et(t.getFullYear()%100,e,2)}function Ch(t,e){return t=cs(t),et(t.getFullYear()%100,e,2)}function Ih(t,e){return et(t.getFullYear()%1e4,e,4)}function Dh(t,e){var n=t.getDay();return t=n>=4||n===0?bn(t):bn.ceil(t),et(t.getFullYear()%1e4,e,4)}function Ph(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+et(e/60|0,"0",2)+et(e%60,"0",2)}function fs(t,e){return et(t.getUTCDate(),e,2)}function Rh(t,e){return et(t.getUTCHours(),e,2)}function Oh(t,e){return et(t.getUTCHours()%12||12,e,2)}function Lh(t,e){return et(1+Ji.count(an(t),t),e,3)}function hs(t,e){return et(t.getUTCMilliseconds(),e,3)}function Hh(t,e){return hs(t,e)+"000"}function Uh(t,e){return et(t.getUTCMonth()+1,e,2)}function Bh(t,e){return et(t.getUTCMinutes(),e,2)}function Yh(t,e){return et(t.getUTCSeconds(),e,2)}function zh(t){var e=t.getUTCDay();return e===0?7:e}function Wh(t,e){return et(ns.count(an(t)-1,t),e,2)}function ds(t){var e=t.getUTCDay();return e>=4||e===0?Mn(t):Mn.ceil(t)}function qh(t,e){return t=ds(t),et(Mn.count(an(t),t)+(an(t).getUTCDay()===4),e,2)}function Vh(t){return t.getUTCDay()}function Gh(t,e){return et(Br.count(an(t)-1,t),e,2)}function jh(t,e){return et(t.getUTCFullYear()%100,e,2)}function Xh(t,e){return t=ds(t),et(t.getUTCFullYear()%100,e,2)}function Kh(t,e){return et(t.getUTCFullYear()%1e4,e,4)}function Zh(t,e){var n=t.getUTCDay();return t=n>=4||n===0?Mn(t):Mn.ceil(t),et(t.getUTCFullYear()%1e4,e,4)}function Qh(){return"+0000"}function ps(){return"%"}function _s(t){return+t}function gs(t){return Math.floor(+t/1e3)}var En,vs,ms;Jh({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Jh(t){return En=Jf(t),En.format,En.parse,vs=En.utcFormat,ms=En.utcParse,En}const nt=q({}),H=q({value:"",side:""}),Qn=new Nr,Pt=q({selected:null});q({name:"",total:0,percentage:0,units:""});const J=q({}),Ue=q({}),Be=q({formattingFunction:t=>t}),$h=t=>t>=1e12?en("$,.2s")(t).replace("G","B").replace("k","K"):en("$,.3s")(t).replace("G","B").replace("k","K"),eo=t=>{const e=t*100;return e>=1?en(".1f")(e)+"%":e>=.01?en(".2f")(e)+"%":en(".4f")(e)+"%"},Jn=(t,e)=>{const n=e.flow_direction;return n==="both"&&t===0?"right":n==="both"&&t===1?"left":n};var td=ft('<div class="sr-only svelte-1or193y"><p> </p> <p> </p> <p> </p></div>'),ed=ft('<div class="controller svelte-1or193y" tabindex="0" role="application" aria-roledescription="data visualization" aria-activedescendant="null"><p class="sr-only svelte-1or193y">Use your arrow keys to explore. TAB or ESC to exit.</p></div> <!>',1);function nd(t,e){$t(e,!0);let n=lt(null),r=lt(0),i=lt(0),o=lt(0),a=lt(null),s=lt(!1);const l=v=>v.map(b=>Xe(At({},b),{blocks:b.blocks.filter(D=>D.name!=="null")})).filter(b=>b.blocks.length>0),u=z(()=>e.data.map(v=>{const{groupedBlocks:b}=v;return b&&Array.isArray(b)?Xe(At({},v),{groupedBlocks:v.groupedBlocks.map(l)}):v})),c=(v,b,D,L)=>{var V,w,R;const B=(R=(w=(V=d(u)[v])==null?void 0:V.groupedBlocks[b])==null?void 0:w[D])==null?void 0:R.blocks[L];B&&(H.value=B.id,H.side=d(n),H.sideName=d(u)[v].sideName)},f=()=>{var v,b,D;N(a,q(((D=(b=(v=d(u)[d(n)])==null?void 0:v.groupedBlocks[d(r)])==null?void 0:b[d(i)])==null?void 0:D.blocks[d(o)])||null)),d(a)||console.warn("No current block found for the current navigation state.")},h=()=>{var L,B,V,w,R;if(!d(a)){console.warn("Cannot navigate to child: currentBlock is null.");return}const v=d(r),b=(L=d(a).child_ids)==null?void 0:L.find(A=>{var E,M,F;const T=(F=(M=(E=d(u)[d(n)])==null?void 0:E.groupedBlocks[v])==null?void 0:M.flatMap(U=>U.blocks))==null?void 0:F.find(U=>U.id===A);return T&&T.name!=="null"});let D=!1;if(b){const A=(B=d(u)[d(n)])==null?void 0:B.groupedBlocks[v];A==null||A.forEach((T,E)=>{T.blocks.forEach((M,F)=>{M.id===b&&(N(r,q(v)),N(i,q(E)),N(o,q(F)),D=!0)})})}if(!D&&v<((V=d(u)[d(n)])==null?void 0:V.groupedBlocks.length)){const A=(w=d(u)[d(n)])==null?void 0:w.groupedBlocks[v],T=(R=A==null?void 0:A.flatMap(E=>E.blocks))==null?void 0:R.find(E=>E.name!=="null");T&&(N(i,q(A.findIndex(E=>E.blocks.includes(T)))),N(o,q(A[d(i)].blocks.findIndex(E=>E.id===T.id))),N(r,q(v)))}f()},p=()=>{var L,B,V;if(!d(a)){console.warn("Cannot navigate to parent: currentBlock is null.");return}const v=d(r),b=d(a).parent_id;let D=!1;if(b){const w=(L=d(u)[d(n)])==null?void 0:L.groupedBlocks[v];w==null||w.forEach((R,A)=>{R.blocks.forEach((T,E)=>{T.id===b&&(N(r,q(v)),N(i,q(A)),N(o,q(E)),D=!0)})})}if(!D&&v>=0){const w=(B=d(u)[d(n)])==null?void 0:B.groupedBlocks[v],R=(V=w==null?void 0:w.flatMap(A=>A.blocks))==null?void 0:V.reverse().find(A=>A.name!=="null");R&&(N(i,q(w.findIndex(A=>A.blocks.includes(R)))),N(o,q(w[d(i)].blocks.findIndex(A=>A.id===R.id))),N(r,q(v)))}f()},_=v=>{var D;const b=(D=d(u)[d(n)])==null?void 0:D.groupedBlocks.length;if(d(n)===null){N(n,q(v==="right"?0:1)),N(r,0),N(i,0),N(o,0),f(),c(d(n),d(r),d(i),d(o));return}v==="right"?d(n)===0?d(r)<b-1&&(Sr(r),h()):d(n)===1&&(d(r)===0?(N(n,0),N(r,0),N(i,0),N(o,0)):(Sr(r,-1),p())):v==="left"&&(d(n)===0?d(r)===0?(N(n,1),N(r,0),N(i,0),N(o,0)):(Sr(r,-1),p()):d(n)===1&&d(r)<b-1&&(Sr(r),h())),c(d(n),d(r),d(i),d(o))},g=v=>{var B,V,w,R,A;const b=(B=d(u)[d(n)])==null?void 0:B.groupedBlocks[d(r)];if(!b)return;const D=(V=b[d(i)])==null?void 0:V.blocks;if(!D)return;let L=d(o)+(v==="down"?1:-1);for(;L>=0&&L<D.length&&((w=D[L])==null?void 0:w.name)==="null";)L+=v==="down"?1:-1;if(L>=0&&L<D.length)N(o,q(L));else{const T=d(i)+(v==="down"?1:-1);if(T>=0&&T<b.length){const E=(R=b[T])==null?void 0:R.blocks;let M=v==="down"?0:E.length-1;for(;M>=0&&M<E.length&&((A=E[M])==null?void 0:A.name)==="null";)M+=v==="down"?1:-1;M>=0&&M<E.length&&(N(i,T),N(o,q(M)))}}f(),c(d(n),d(r),d(i),d(o))},y=v=>{const{key:b}=v;b==="ArrowRight"||b==="ArrowLeft"?(_(b==="ArrowRight"?"right":"left"),N(s,!0)):b==="ArrowDown"||b==="ArrowUp"?(g(b==="ArrowDown"?"down":"up"),N(s,!0)):(b==="Shift"&&b==="Tab"||b==="Escape"||b==="Tab")&&(H.value="",H.side="",H.sideName="",N(s,!1))};var k=ed(),S=Jt(k);_t(S,"aria-label","A flow chart"),S.__keydown=y;var m=it(S,2);{var C=v=>{var b=td(),D=Z(b),L=Z(D),B=it(D,2),V=Z(B);ct(()=>{var A,T;return Yt(V,`${(A=Be.formattingFunction(e.userSelectedDataToDisplay.total))!=null?A:""}
			${(T=e.userSelectedDataToDisplay.units)!=null?T:""}`)});var w=it(B,2),R=Z(w);ct(()=>{var A;return Yt(R,`${(A=eo(e.userSelectedDataToDisplay.percentage))!=null?A:""} of total`)}),ct(()=>Yt(L,e.userSelectedDataToDisplay.name)),X(v,b)};yt(m,v=>{e.userSelectedDataToDisplay&&v(C)})}X(t,k),te()}Tr(["keydown"]);let ys,Rt,Yr;const ws=1,rd=(t,e,n,r)=>{const{parentPropTop:i,parentPropHeight:o,childTop:a,childHeight:s,childNegative:l,start:u,end:c}=Es(t,e,n,r);return{route:bs(i,o,a,s,u,c),childKey:e,parentKey:t,childNegative:l}},xs=(t,e,n,r)=>{ys=t,Rt=r;const i={};return Object.values(nt).forEach((o,a)=>{const s=Jn(a,Rt);ys.includes(a)&&(i[a]=[],Object.values(o).forEach(l=>{Object.keys(l.dimensions).length&&l.parentKey!==null&&l.hidden===!1&&l.isItNull===!1&&i[a].push(At(At({},l),rd(l.parentKey,l.key,s,a)))}))}),i},bs=(t,e,n,r,i,o)=>Number.isNaN(t)||Number.isNaN(e)||o===0?"":`M ${i},${t}
			 C ${(i+o)/2},${t} ${(i+o)/2},${n} ${o},${n}
			 L ${o},${n+r}
			 C ${(i+o)/2},${n+r} ${(i+o)/2},${t+e} ${i},${t+e}
			 L ${i},${t}`.replace(/[\t\n\r]/gm,""),Ms=(t,e,n,r,i)=>{const o=i==="left"?-n:n;return`
			 M ${t},${e}
			 L ${t+o},${e}
			 L ${t+o},${e+r}
			 L ${t},${e+r}
			 L ${t},${e}
		`.replace(/[\t\n\r]/gm,"")},Es=(t,e,n,r)=>{Yr=nt[r];const i=Object.values(Yr).find(w=>w.key===t),o=Object.values(Yr).find(w=>w.key===e),{x:a,y:s}=i==null?void 0:i.position,{negative:l,isItNull:u,value:c}=i,{width:f,height:h}=i==null?void 0:i.dimensions,{x:p,y:_}=o==null?void 0:o.position,{width:g,height:y}=o==null?void 0:o.dimensions,{negative:k,isItNull:S,value:m}=o,C=Object.values(Yr).filter(w=>w.parentKey===t).sort((w,R)=>w.y-R.y),v=C.filter(w=>w.negative===l).reduce((w,R)=>w+R.value,0),b=v===0?0:m/v,D=s+C.slice(0,C.findIndex(w=>w.key==e)).reduce((w,R)=>w+(R.negative===l?R.value/v:0)*h,0),L=k===l?b*h:0,B=n==="left"?a:a+f,V=n==="left"?p+g:p;return{parentY:s,parentPropTop:D,parentPropHeight:k?L:Math.max(L,ws),parentWidth:f,parentNull:u,childTop:_,childHeight:y,childWidth:g,childNegative:k,childNull:S,start:B,end:V}},ks=(t,e,n,r=1/0)=>{if(t){r=Math.max(r,ws);let i=[],o=[],a=0,s=r,l=1/0;for(let u=1;u<t.length;u++){const c=t[u],f=t[u-1],h=Es(c,f,e,n);s=Math.min(s,h.parentPropHeight),h.childNull||(u===1&&(l=Math.min(h.childHeight,r),s=Math.min(h.childHeight,h.parentPropHeight,r),o.push(Ms(h.end,h.childTop,h.childWidth,Math.min(h.childHeight,r),e))),i.push(bs(h.parentPropTop+a,s,h.childTop+a,l,h.start,h.end))),h.parentNull||o.push(Ms(h.start,h.parentPropTop+a,-h.parentWidth,s,e)),a+=h.parentPropTop-h.parentY,l=s}return{flowPaths:i,rectPaths:o}}},Ss=()=>{if(H&&H.value!==""&&H.side!==""){const t=nt[H.side][H.value];if(t){const{ancestors:e,descendants:n}=t;if(e&&e.length||n&&n.length)return[...e||[],H.value,...n||[]]}}else return[]},Ts=()=>{if(H&&nt[H.side]){const{ancestors:t}=nt[H.side][H.value];return t&&t.length?[H.value,...t||[]].sort((e,n)=>n-e):[H.value]}},id=(t,e,n,r)=>{const i=Ss(),a=i&&i.length&&i.includes(n)&&i.includes(r);return Jn(t,Rt)==="left"?e&&a?Rt.color_neg_active_left:e?Rt.color_neg_base_left:a?Rt.color_active_left:Rt.color_base_left:e&&a?Rt.color_neg_active:e?Rt.color_neg_base:a?Rt.color_active:Rt.color_base},od=t=>{const e=nt[H.side][H.value].negative;return t===0?e?Rt.color_neg_hover_left:Rt.color_hover:e?Rt.color_neg_hover:Rt.color_hover_left};var ad=ft('<canvas class="svelte-1fgj9lk"></canvas>');function sd(t,e){$t(e,!0);let n=lt(void 0),r=lt(void 0);const i=z(()=>window.devicePixelRatio||1),o=z(()=>xs(e.sides,e.parentWidth,e.parentHeight,e.FlourishState));Ut(()=>{N(r,q(d(n).getContext("2d")))}),Ut(()=>{d(n)&&d(r)&&e.parentWidth>0&&e.parentHeight>0&&(d(n).width=e.parentWidth*d(i),d(n).height=e.parentHeight*d(i),d(n).style.width=`${e.parentWidth}px`,d(n).style.height=`${e.parentHeight}px`,d(r).scale(d(i),d(i)))});const a=(u,c)=>{Object.entries(d(o)).forEach(([f,h],p)=>{c[p],h.forEach(({route:_,childKey:g,parentKey:y,childNegative:k,position:S})=>{try{const m=new Path2D(_);u.fillStyle=id(p,k,g,y),u.globalAlpha=.5,u.beginPath(),u.fill(m)}catch(m){console.error("Error creating path:",m,"Route:",_)}})})},s=u=>{const c=Jn(H.side,e.FlourishState),f=Ts(H.side),{flowPaths:h,rectPaths:p}=ks(f,c,H.side);u.globalAlpha=.8,u.fillStyle=od(H.side),h.forEach(_=>{const g=new Path2D(_);u.beginPath(),u.fill(g)}),p.forEach(_=>{const g=new Path2D(_);u.beginPath(),u.fill(g)})};Ut(()=>{d(r)&&nt&&e.FlourishState&&J&&(d(r).clearRect(0,0,e.parentWidth,e.parentHeight),a(d(r),J),H&&H.value!==""&&H.side!==""&&s(d(r)))});var l=ad();ke(l,u=>N(n,u),()=>d(n)),X(t,l),te()}const ld=(t,e,n,r)=>{let i=Object.keys(J).length||1,o=t.narrow_first_column?e-n*i:e;return o-=r*(i-1),o},ud=(t,e,n)=>{let r=t,i=0;for(;r>=e&&(r-=e,i++,r>=n);)r-=n;return i},cd=t=>{Array.isArray(t)&&t.forEach((e,n)=>{if(!J[n]){J[n]={};const r=e==null?void 0:e.groupedBlocks.length;Array.from({length:r},(o,a)=>a).forEach(o=>{if(!J[n][o])J[n][o]="";else return})}})},As=(t,e,n,r)=>{const i=ud(t,e,n),o=Object.keys(J).length,a=Math.floor(i/o),s=i%o;return Object.keys(J).forEach((l,u)=>{const c=J[l];let f=a+(u===0?s:0);Object.keys(c).forEach((h,p)=>{p===0&&r.narrow_first_column?c[h]="narrow":f>0?(c[h]="default",f--):c[h]="hidden"})}),J},fd=(t,e,n,r)=>{const i=e.narrow_first_column&&t===0;let o=!1,a=0;if(Object.keys(J).length>1&&(o=!0,a=Object.keys(J).filter(s=>+s!==n)[0]),t===0&&r(),J[n][t]==="default"&&J[n][t+1]==="hidden"){if(J[n][t]="narrow",J[n][t+1]="default",o){const s=J[a],l=Object.keys(s).map(u=>parseInt(u,10)).filter((u,c)=>(s[u]==="narrow"||s[u]==="default")&&c!==0).sort((u,c)=>c-u)[0];l!==void 0&&(s[l]="hidden")}}else if(J[n][t]==="narrow"&&!i)if(J[n][t]="default",J[n][t+1]==="default"){if(J[n][t+1]="hidden",o&&t===1){const s=J[a];s[t]="default"}}else J[n][t+1]==="narrow"&&(Object.keys(J[n]).filter(l=>l>t+1).forEach(l=>J[n][l]="hidden"),J[n][t+1]="default");else J[n][t]==="narrow"&&i&&(J[n][t+1]="default")};var Ft=25,gt=5,pt=10,O=10,qt={};qt.bottom=function(e,n){return{shape:[-pt,-O,pt,-O],pos:[e/2,n+O]}},qt.top=function(e,n){return{shape:[-pt,O,pt,O],pos:[e/2,-O]}},qt.left=function(e,n){return{shape:[O,pt,O,-pt],pos:[-O,n/2]}},qt.right=function(e,n){return{shape:[-O,pt,-O,-pt],pos:[e+O,n/2]}},qt.topLeft=function(e,n){return{shape:[O+gt,O,O,O+gt],pos:[-O,-O]}},qt.bottomLeft=function(e,n){return{shape:[O+gt,-O,O,-O-gt],pos:[-O,n+O]}},qt.topRight=function(e,n){return{shape:[-O-gt,O,-O,O+gt],pos:[e+O,-O]}},qt.bottomRight=function(e,n){return{shape:[-O-gt,-O,-O,-O-gt],pos:[e+O,n+O]}};function Ns(t,e,n,r,i,o,a){var s=n-t/2-O,l=n+t/2+O,u=t/2+Math.min(0,s-i.left)+Math.max(0,l-i.right),c;return u-pt<gt?c=[-u,(-O-gt)*o,Math.max(pt,gt-u),-O*o]:u+pt>t-gt?c=[Math.min(-pt,t-u-gt),-O*o,Math.min(pt,t-u),(-O-gt)*o]:c=[-pt,-O*o,pt,-O*o],{pos:[u,a],shape:c}}function Fs(t,e,n,r,i,o,a){var s=r-e/2-O,l=r+e/2+O,u=e/2+Math.min(0,s-i.top)+Math.max(0,l-i.bottom),c;return u-pt<gt?c=[(-O-gt)*o,-u,-O*o,Math.max(pt,gt-u)]:u+pt>e-gt?c=[-O*o,Math.min(-pt,e-u-gt),(-O-gt)*o,Math.min(pt,e-u)]:c=[-O*o,-pt,-O*o,pt],{pos:[a,u],shape:c}}qt.bottomFlexible=function(e,n,r,i,o){return Ns(e,n,r,i,o,1,n+O)},qt.topFlexible=function(e,n,r,i,o){return Ns(e,n,r,i,o,-1,-O)},qt.rightFlexible=function(e,n,r,i,o){return Fs(e,n,r,i,o,1,e+O)},qt.leftFlexible=function(e,n,r,i,o){return Fs(e,n,r,i,o,-1,-O)};function hd(t,e,n,r,i,o){var a=qt[t](e,n,r,i,o),s=r-Ft-a.pos[0],l=i-Ft-a.pos[1];return{left:s,top:l,right:s+e+2*Ft,bottom:l+n+2*Ft}}function dd(t,e,n,r,i,o,a,s,l,u){var c=qt[t](r,i,s,l,u);e.left=o-Ft-c.pos[0]+"px",e.top=a-Ft-c.pos[1]+"px",n.setAttribute("d","M0,0L"+c.shape.join(",")+"Z"),n.setAttribute("transform","translate("+(c.pos[0]+Ft)+","+(c.pos[1]+Ft)+")")}function pd(){var t=this;t.is_visible=!0;function e(E){return t._maxWidth.match(/^\d+(?:\.\d+)?%$/)?E.width*parseFloat(t._maxWidth)/100:t._maxWidth.match(/^\d+(?:\.\d+)?(?:px)?$/)?parseFloat(t._maxWidth):(t._maxWidth!=null&&console.error("Popup: Unknown value for maxWidth: "+t._maxWidth),E.width)}if(!t._point){console.error("Popup: cannot draw popup till point() has been specified");return}var n=document.documentElement.getBoundingClientRect(),r=t._point[0],i=t._point[1],o=t._container.getBoundingClientRect();r<o.left?r=o.left:r>o.right&&(r=o.right),i<o.top?i=o.top:i>o.bottom&&(i=o.bottom);var a=r-n.left,s=i-n.top,l=t._getElement(),u=l.style,c=l.querySelector(".flourish-popup-svg"),f=c.querySelector("g"),h=f.querySelector("rect"),p=f.querySelector("path"),_=l.querySelector(".flourish-popup-content");u.display="block",_.style.maxWidth=e(o)+"px",t._inner_html!=t._html&&(_.innerHTML=t._inner_html=t._html);var g=_.getBoundingClientRect(),y,k;do y=Math.ceil(g.width),k=Math.ceil(g.height),u.width=y+2*Ft+"px",u.height=k+2*Ft+"px",g=_.getBoundingClientRect();while(y!=Math.ceil(g.width)||k!=Math.ceil(g.height));h.setAttribute("width",y),h.setAttribute("height",k),c.setAttribute("width",y+2*Ft),c.setAttribute("height",k+2*Ft);for(var S=Ft-O,m=null,C=null,v=null,b=1/0,D=1/0,L,B,V=0;V<t._directions.length;V++){var w=t._directions[V],R=hd(w,y,k,r,i,o),A=Math.max(0,Math.floor(o.left)-R.left-S)+Math.max(0,R.right-Math.ceil(o.right)-S),T=Math.max(0,Math.floor(o.top)-R.top-S)+Math.max(0,R.bottom-Math.ceil(o.bottom)-S);if(A==0&&T==0){m=w;break}(A<b||A==b&&T<L)&&(b=A,L=T,C=w),(T<D||T==D&&A<B)&&(D=T,B=A,v=w)}return m?w=m:t._fallbackFit=="horizontal"?w=C:t._fallbackFit=="vertical"?w=v:(console.warn("Popup: failed to point box of size ("+y+", "+k+") at ("+r+", "+i+") within ("+o.left+", "+o.top+", "+o.right+", "+o.bottom+")"),w=t._directions[0]),dd(w,u,p,y,k,a,s,r,i,o),t}function ee(t,e,n){var r=document.createElementNS("http://www.w3.org/2000/svg",t),i;if(e)for(i in e)r.setAttribute(i,e[i]);var o=r.style;if(n)for(i in n)o[i]=n[i];return r}function _d(){var t=this,e=t.element;if(!e){e=t.element=document.createElement("div");var n="flourish-popup-"+t.unique_id;e.className="flourish-popup",e.id=n;var r=e.style;r.display="none",r.margin=r.padding=0,r.position="absolute",r.width="80px",r.height="40px",r.boxSizing="border-box",e.addEventListener("click",function(c){t.fire("click",c)},!1);var i=ee("svg",{class:"flourish-popup-svg"},{position:"absolute",top:0,left:0,bottom:0,right:0}),o=ee("filter",{id:"dropshadow-"+t.unique_id,height:"130%"});o.appendChild(ee("feGaussianBlur",{in:"SourceAlpha",stdDeviation:5})),o.appendChild(ee("feOffset",{dx:0,dy:2,result:"offsetblur"}));var a=ee("feComponentTransfer");a.appendChild(ee("feFuncA",{type:"linear",slope:.2})),o.appendChild(a);var s=ee("feMerge");o.appendChild(s),s.appendChild(ee("feMergeNode")),s.appendChild(ee("feMergeNode",{in:"SourceGraphic"})),i.appendChild(o);var l=ee("g",{filter:"url(#dropshadow-"+t.unique_id+")",fill:"white",stroke:"none"});l.appendChild(ee("rect",{x:Ft,y:Ft,rx:gt})),l.appendChild(ee("path")),i.appendChild(l),e.appendChild(i);var u=document.createElement("div");u.className="flourish-popup-content",r=u.style,r.position="absolute",r.top=r.left=Ft+"px",r.padding="10px",e.appendChild(u),t._getConstrainer().appendChild(e)}return t._resizeConstrainer(),e}var Te,jt;function Cs(){return Te||(Te=document.createElement("div"),Te.id="flourish-popup-constrainer",Te.setAttribute("aria-hidden",!0),jt=Te.style,jt.overflow="hidden",jt.pointerEvents="none",jt.position="absolute",jt.left="0",jt.top="0",jt.margin="0",jt.padding="0",document.body.appendChild(Te),this._resizeConstrainer(),Te)}function gd(){Te||Cs.call(this);var t=jt.display;jt.display="none",jt.width=document.documentElement.scrollWidth+"px",jt.height=document.documentElement.scrollHeight+"px",jt.display=t}var vd="2.1.5",no={container:document.body,maxWidth:"70%",point:null,html:null,directions:["bottom","top","left","right","topLeft","bottomLeft","topRight","bottomRight","bottomFlexible","topFlexible","leftFlexible","rightFlexible"],fallbackFit:"horizontal"};function md(){let t,e;return"Flourish"in window?(t=window.Flourish,e="__popup_next_unique_id"):(t=window,e="__flourish_popup_next_unique_id"),t[e]?(t[e]+=1,t[e]):t[e]=1e3}function ne(){this.unique_id=md(),this.is_visible=!0,this.element=null;for(var t in no)this["_"+t]=no[t];this.handlers={click:[]}}function yd(t){ne.prototype[t]=function(e){return typeof e=="undefined"?this["_"+t]:(this["_"+t]=e,this)}}for(var wd in no)yd(wd);ne.prototype.point=function(t,e){if(typeof t=="undefined")return this._point;if(Array.isArray(t))this._point=[t[0],t[1]];else if(typeof e!="undefined")this._point=[t,e];else if(t instanceof HTMLElement||t instanceof SVGElement){var n=t.getBoundingClientRect();this._point=[Math.floor(n.left+n.width/2),Math.floor(n.top+n.height/2)]}else console.error("Popup: could not understand argument");return this},ne.prototype.directions=function(t){return typeof t=="undefined"?this._directions:(typeof t=="string"&&(t=[t]),this._directions=t.slice(),this)};function xd(t){return t.replace(/[&<>]/g,function(e){return{"&":"&amp;","<":"&lt;",">":"&gt;"}[e]})}ne.prototype.text=function(e){return this._html=xd(e),this},ne.prototype.on=function(e,n){if(!(e in this.handlers))throw new Error("Popup.on: No such event: "+e);return this.handlers[e].push(n),this},ne.prototype.fire=function(e,n){if(!(e in this.handlers))throw new Error("Popup.fire: No such event: "+e);for(var r=this.handlers[e],i=0;i<r.length;i++)r[i].call(this,n);return this},ne.prototype._getElement=_d,ne.prototype._getConstrainer=Cs,ne.prototype._resizeConstrainer=gd,ne.prototype.draw=pd,ne.prototype.hide=function(){return this.is_visible?(this.is_visible=!1,this._getElement().style.display="none",this):this};function Is(){return new ne}Is.version=vd;var ro="http://www.w3.org/1999/xhtml";const Ds={svg:"http://www.w3.org/2000/svg",xhtml:ro,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function zr(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),Ds.hasOwnProperty(e)?{space:Ds[e],local:t}:t}function bd(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===ro&&e.documentElement.namespaceURI===ro?e.createElement(t):e.createElementNS(n,t)}}function Md(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function io(t){var e=zr(t);return(e.local?Md:bd)(e)}function Ed(){}function oo(t){return t==null?Ed:function(){return this.querySelector(t)}}function kd(t){typeof t!="function"&&(t=oo(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o=e[i],a=o.length,s=r[i]=new Array(a),l,u,c=0;c<a;++c)(l=o[c])&&(u=t.call(l,l.__data__,c,o))&&("__data__"in l&&(u.__data__=l.__data__),s[c]=u);return new Xt(r,this._parents)}function Sd(){return[]}function Ps(t){return t==null?Sd:function(){return this.querySelectorAll(t)}}function Td(t){typeof t!="function"&&(t=Ps(t));for(var e=this._groups,n=e.length,r=[],i=[],o=0;o<n;++o)for(var a=e[o],s=a.length,l,u=0;u<s;++u)(l=a[u])&&(r.push(t.call(l,l.__data__,u,a)),i.push(l));return new Xt(r,i)}function Rs(t){return function(){return this.matches(t)}}function Ad(t){typeof t!="function"&&(t=Rs(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o=e[i],a=o.length,s=r[i]=[],l,u=0;u<a;++u)(l=o[u])&&t.call(l,l.__data__,u,o)&&s.push(l);return new Xt(r,this._parents)}function Os(t){return new Array(t.length)}function Nd(){return new Xt(this._enter||this._groups.map(Os),this._parents)}function Wr(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}Wr.prototype={constructor:Wr,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function Fd(t){return function(){return t}}var Ls="$";function Cd(t,e,n,r,i,o){for(var a=0,s,l=e.length,u=o.length;a<u;++a)(s=e[a])?(s.__data__=o[a],r[a]=s):n[a]=new Wr(t,o[a]);for(;a<l;++a)(s=e[a])&&(i[a]=s)}function Id(t,e,n,r,i,o,a){var s,l,u={},c=e.length,f=o.length,h=new Array(c),p;for(s=0;s<c;++s)(l=e[s])&&(h[s]=p=Ls+a.call(l,l.__data__,s,e),p in u?i[s]=l:u[p]=l);for(s=0;s<f;++s)p=Ls+a.call(t,o[s],s,o),(l=u[p])?(r[s]=l,l.__data__=o[s],u[p]=null):n[s]=new Wr(t,o[s]);for(s=0;s<c;++s)(l=e[s])&&u[h[s]]===l&&(i[s]=l)}function Dd(t,e){if(!t)return p=new Array(this.size()),u=-1,this.each(function(b){p[++u]=b}),p;var n=e?Id:Cd,r=this._parents,i=this._groups;typeof t!="function"&&(t=Fd(t));for(var o=i.length,a=new Array(o),s=new Array(o),l=new Array(o),u=0;u<o;++u){var c=r[u],f=i[u],h=f.length,p=t.call(c,c&&c.__data__,u,r),_=p.length,g=s[u]=new Array(_),y=a[u]=new Array(_),k=l[u]=new Array(h);n(c,f,g,y,k,p,e);for(var S=0,m=0,C,v;S<_;++S)if(C=g[S]){for(S>=m&&(m=S+1);!(v=y[m])&&++m<_;);C._next=v||null}}return a=new Xt(a,r),a._enter=s,a._exit=l,a}function Pd(){return new Xt(this._exit||this._groups.map(Os),this._parents)}function Rd(t,e,n){var r=this.enter(),i=this,o=this.exit();return r=typeof t=="function"?t(r):r.append(t+""),e!=null&&(i=e(i)),n==null?o.remove():n(o),r&&i?r.merge(i).order():i}function Od(t){for(var e=this._groups,n=t._groups,r=e.length,i=n.length,o=Math.min(r,i),a=new Array(r),s=0;s<o;++s)for(var l=e[s],u=n[s],c=l.length,f=a[s]=new Array(c),h,p=0;p<c;++p)(h=l[p]||u[p])&&(f[p]=h);for(;s<r;++s)a[s]=e[s];return new Xt(a,this._parents)}function Ld(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],i=r.length-1,o=r[i],a;--i>=0;)(a=r[i])&&(o&&a.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(a,o),o=a);return this}function Hd(t){t||(t=Ud);function e(f,h){return f&&h?t(f.__data__,h.__data__):!f-!h}for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var a=n[o],s=a.length,l=i[o]=new Array(s),u,c=0;c<s;++c)(u=a[c])&&(l[c]=u);l.sort(e)}return new Xt(i,this._parents).order()}function Ud(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function Bd(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function Yd(){var t=new Array(this.size()),e=-1;return this.each(function(){t[++e]=this}),t}function zd(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null}function Wd(){var t=0;return this.each(function(){++t}),t}function qd(){return!this.node()}function Vd(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],o=0,a=i.length,s;o<a;++o)(s=i[o])&&t.call(s,s.__data__,o,i);return this}function Gd(t){return function(){this.removeAttribute(t)}}function jd(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Xd(t,e){return function(){this.setAttribute(t,e)}}function Kd(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function Zd(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function Qd(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function Jd(t,e){var n=zr(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?jd:Gd:typeof e=="function"?n.local?Qd:Zd:n.local?Kd:Xd)(n,e))}function Hs(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function $d(t){return function(){this.style.removeProperty(t)}}function tp(t,e,n){return function(){this.style.setProperty(t,e,n)}}function ep(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function np(t,e,n){return arguments.length>1?this.each((e==null?$d:typeof e=="function"?ep:tp)(t,e,n==null?"":n)):kn(this.node(),t)}function kn(t,e){return t.style.getPropertyValue(e)||Hs(t).getComputedStyle(t,null).getPropertyValue(e)}function rp(t){return function(){delete this[t]}}function ip(t,e){return function(){this[t]=e}}function op(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function ap(t,e){return arguments.length>1?this.each((e==null?rp:typeof e=="function"?op:ip)(t,e)):this.node()[t]}function Us(t){return t.trim().split(/^|\s+/)}function ao(t){return t.classList||new Bs(t)}function Bs(t){this._node=t,this._names=Us(t.getAttribute("class")||"")}Bs.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function Ys(t,e){for(var n=ao(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function zs(t,e){for(var n=ao(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function sp(t){return function(){Ys(this,t)}}function lp(t){return function(){zs(this,t)}}function up(t,e){return function(){(e.apply(this,arguments)?Ys:zs)(this,t)}}function cp(t,e){var n=Us(t+"");if(arguments.length<2){for(var r=ao(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof e=="function"?up:e?sp:lp)(n,e))}function fp(){this.textContent=""}function hp(t){return function(){this.textContent=t}}function dp(t){return function(){var e=t.apply(this,arguments);this.textContent=e==null?"":e}}function pp(t){return arguments.length?this.each(t==null?fp:(typeof t=="function"?dp:hp)(t)):this.node().textContent}function _p(){this.innerHTML=""}function gp(t){return function(){this.innerHTML=t}}function vp(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e==null?"":e}}function mp(t){return arguments.length?this.each(t==null?_p:(typeof t=="function"?vp:gp)(t)):this.node().innerHTML}function yp(){this.nextSibling&&this.parentNode.appendChild(this)}function wp(){return this.each(yp)}function xp(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function bp(){return this.each(xp)}function Mp(t){var e=typeof t=="function"?t:io(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function Ep(){return null}function kp(t,e){var n=typeof t=="function"?t:io(t),r=e==null?Ep:typeof e=="function"?e:oo(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function Sp(){var t=this.parentNode;t&&t.removeChild(this)}function Tp(){return this.each(Sp)}function Ap(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Np(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Fp(t){return this.select(t?Np:Ap)}function Cp(t){return arguments.length?this.property("__data__",t):this.node().__data__}var Ws={},Ye=null;if(typeof document!="undefined"){var Ip=document.documentElement;"onmouseenter"in Ip||(Ws={mouseenter:"mouseover",mouseleave:"mouseout"})}function Dp(t,e,n){return t=qs(t,e,n),function(r){var i=r.relatedTarget;(!i||i!==this&&!(i.compareDocumentPosition(this)&8))&&t.call(this,r)}}function qs(t,e,n){return function(r){var i=Ye;Ye=r;try{t.call(this,this.__data__,e,n)}finally{Ye=i}}}function Pp(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function Rp(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,i=e.length,o;n<i;++n)o=e[n],(!t.type||o.type===t.type)&&o.name===t.name?this.removeEventListener(o.type,o.listener,o.capture):e[++r]=o;++r?e.length=r:delete this.__on}}}function Op(t,e,n){var r=Ws.hasOwnProperty(t.type)?Dp:qs;return function(i,o,a){var s=this.__on,l,u=r(e,o,a);if(s){for(var c=0,f=s.length;c<f;++c)if((l=s[c]).type===t.type&&l.name===t.name){this.removeEventListener(l.type,l.listener,l.capture),this.addEventListener(l.type,l.listener=u,l.capture=n),l.value=e;return}}this.addEventListener(t.type,u,n),l={type:t.type,name:t.name,value:e,listener:u,capture:n},s?s.push(l):this.__on=[l]}}function Lp(t,e,n){var r=Pp(t+""),i,o=r.length,a;if(arguments.length<2){var s=this.node().__on;if(s){for(var l=0,u=s.length,c;l<u;++l)for(i=0,c=s[l];i<o;++i)if((a=r[i]).type===c.type&&a.name===c.name)return c.value}return}for(s=e?Op:Rp,n==null&&(n=!1),i=0;i<o;++i)this.each(s(r[i],e,n));return this}function Vs(t,e,n){var r=Hs(t),i=r.CustomEvent;typeof i=="function"?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function Hp(t,e){return function(){return Vs(this,t,e)}}function Up(t,e){return function(){return Vs(this,t,e.apply(this,arguments))}}function Bp(t,e){return this.each((typeof e=="function"?Up:Hp)(t,e))}var Gs=[null];function Xt(t,e){this._groups=t,this._parents=e}function $n(){return new Xt([[document.documentElement]],Gs)}Xt.prototype=$n.prototype={constructor:Xt,select:kd,selectAll:Td,filter:Ad,data:Dd,enter:Nd,exit:Pd,join:Rd,merge:Od,order:Ld,sort:Hd,call:Bd,nodes:Yd,node:zd,size:Wd,empty:qd,each:Vd,attr:Jd,style:np,property:ap,classed:cp,text:pp,html:mp,raise:wp,lower:bp,append:Mp,insert:kp,remove:Tp,clone:Fp,datum:Cp,on:Lp,dispatch:Bp};function Ct(t){return typeof t=="string"?new Xt([[document.querySelector(t)]],[document.documentElement]):new Xt([[t]],Gs)}function Yp(t){return Ct(io(t).call(document.documentElement))}var Sn=0,tr=0,er=0,js=1e3,qr,nr,Vr=0,sn=0,Gr=0,rr=typeof performance=="object"&&performance.now?performance:Date,Xs=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function jr(){return sn||(Xs(zp),sn=rr.now()+Gr)}function zp(){sn=0}function Xr(){this._call=this._time=this._next=null}Xr.prototype=Ks.prototype={constructor:Xr,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?jr():+n)+(e==null?0:+e),!this._next&&nr!==this&&(nr?nr._next=this:qr=this,nr=this),this._call=t,this._time=n,so()},stop:function(){this._call&&(this._call=null,this._time=1/0,so())}};function Ks(t,e,n){var r=new Xr;return r.restart(t,e,n),r}function Zs(){jr(),++Sn;for(var t=qr,e;t;)(e=sn-t._time)>=0&&t._call.call(null,e),t=t._next;--Sn}function Qs(){sn=(Vr=rr.now())+Gr,Sn=tr=0;try{Zs()}finally{Sn=0,qp(),sn=0}}function Wp(){var t=rr.now(),e=t-Vr;e>js&&(Gr-=e,Vr=t)}function qp(){for(var t,e=qr,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:qr=n);nr=t,so(r)}function so(t){if(!Sn){tr&&(tr=clearTimeout(tr));var e=t-sn;e>24?(t<1/0&&(tr=setTimeout(Qs,t-rr.now()-Gr)),er&&(er=clearInterval(er))):(er||(Vr=rr.now(),er=setInterval(Wp,js)),Sn=1,Xs(Qs))}}function Js(t,e,n){var r=new Xr;return e=e==null?0:+e,r.restart(function(i){r.stop(),t(i+e)},e,n),r}var Vp={value:function(){}};function $s(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Kr(n)}function Kr(t){this._=t}function Gp(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Kr.prototype=$s.prototype={constructor:Kr,on:function(t,e){var n=this._,r=Gp(t+"",n),i,o=-1,a=r.length;if(arguments.length<2){for(;++o<a;)if((i=(t=r[o]).type)&&(i=jp(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++o<a;)if(i=(t=r[o]).type)n[i]=tl(n[i],t.name,e);else if(e==null)for(i in n)n[i]=tl(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Kr(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,o;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=this._[t],r=0,i=o.length;r<i;++r)o[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(e,n)}};function jp(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function tl(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=Vp,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var Xp=$s("start","end","cancel","interrupt"),Kp=[],el=0,nl=1,lo=2,Zr=3,rl=4,uo=5,Qr=6;function Jr(t,e,n,r,i,o){var a=t.__transition;if(!a)t.__transition={};else if(n in a)return;Zp(t,n,{name:e,index:r,group:i,on:Xp,tween:Kp,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:el})}function co(t,e){var n=se(t,e);if(n.state>el)throw new Error("too late; already scheduled");return n}function Ae(t,e){var n=se(t,e);if(n.state>Zr)throw new Error("too late; already running");return n}function se(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function Zp(t,e,n){var r=t.__transition,i;r[e]=n,n.timer=Ks(o,0,n.time);function o(u){n.state=nl,n.timer.restart(a,n.delay,n.time),n.delay<=u&&a(u-n.delay)}function a(u){var c,f,h,p;if(n.state!==nl)return l();for(c in r)if(p=r[c],p.name===n.name){if(p.state===Zr)return Js(a);p.state===rl?(p.state=Qr,p.timer.stop(),p.on.call("interrupt",t,t.__data__,p.index,p.group),delete r[c]):+c<e&&(p.state=Qr,p.timer.stop(),p.on.call("cancel",t,t.__data__,p.index,p.group),delete r[c])}if(Js(function(){n.state===Zr&&(n.state=rl,n.timer.restart(s,n.delay,n.time),s(u))}),n.state=lo,n.on.call("start",t,t.__data__,n.index,n.group),n.state===lo){for(n.state=Zr,i=new Array(h=n.tween.length),c=0,f=-1;c<h;++c)(p=n.tween[c].value.call(t,t.__data__,n.index,n.group))&&(i[++f]=p);i.length=f+1}}function s(u){for(var c=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(l),n.state=uo,1),f=-1,h=i.length;++f<h;)i[f].call(t,c);n.state===uo&&(n.on.call("end",t,t.__data__,n.index,n.group),l())}function l(){n.state=Qr,n.timer.stop(),delete r[e];for(var u in r)return;delete t.__transition}}function Qp(t,e){var n=t.__transition,r,i,o=!0,a;if(n){e=e==null?null:e+"";for(a in n){if((r=n[a]).name!==e){o=!1;continue}i=r.state>lo&&r.state<uo,r.state=Qr,r.timer.stop(),r.on.call(i?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[a]}o&&delete t.__transition}}function Jp(t){return this.each(function(){Qp(this,t)})}function fo(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function il(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function ir(){}var or=.7,$r=1/or,Tn="\\s*([+-]?\\d+)\\s*",ar="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",ge="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",$p=/^#([0-9a-f]{3,8})$/,t0=new RegExp("^rgb\\("+[Tn,Tn,Tn]+"\\)$"),e0=new RegExp("^rgb\\("+[ge,ge,ge]+"\\)$"),n0=new RegExp("^rgba\\("+[Tn,Tn,Tn,ar]+"\\)$"),r0=new RegExp("^rgba\\("+[ge,ge,ge,ar]+"\\)$"),i0=new RegExp("^hsl\\("+[ar,ge,ge]+"\\)$"),o0=new RegExp("^hsla\\("+[ar,ge,ge,ar]+"\\)$"),ol={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};fo(ir,sr,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:al,formatHex:al,formatHsl:a0,formatRgb:sl,toString:sl});function al(){return this.rgb().formatHex()}function a0(){return hl(this).formatHsl()}function sl(){return this.rgb().formatRgb()}function sr(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=$p.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?ll(e):n===3?new Kt(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?ti(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?ti(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=t0.exec(t))?new Kt(e[1],e[2],e[3],1):(e=e0.exec(t))?new Kt(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=n0.exec(t))?ti(e[1],e[2],e[3],e[4]):(e=r0.exec(t))?ti(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=i0.exec(t))?fl(e[1],e[2]/100,e[3]/100,1):(e=o0.exec(t))?fl(e[1],e[2]/100,e[3]/100,e[4]):ol.hasOwnProperty(t)?ll(ol[t]):t==="transparent"?new Kt(NaN,NaN,NaN,0):null}function ll(t){return new Kt(t>>16&255,t>>8&255,t&255,1)}function ti(t,e,n,r){return r<=0&&(t=e=n=NaN),new Kt(t,e,n,r)}function s0(t){return t instanceof ir||(t=sr(t)),t?(t=t.rgb(),new Kt(t.r,t.g,t.b,t.opacity)):new Kt}function ho(t,e,n,r){return arguments.length===1?s0(t):new Kt(t,e,n,r==null?1:r)}function Kt(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}fo(Kt,ho,il(ir,{brighter:function(t){return t=t==null?$r:Math.pow($r,t),new Kt(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=t==null?or:Math.pow(or,t),new Kt(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:ul,formatHex:ul,formatRgb:cl,toString:cl}));function ul(){return"#"+po(this.r)+po(this.g)+po(this.b)}function cl(){var t=this.opacity;return t=isNaN(t)?1:Math.max(0,Math.min(1,t)),(t===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(t===1?")":", "+t+")")}function po(t){return t=Math.max(0,Math.min(255,Math.round(t)||0)),(t<16?"0":"")+t.toString(16)}function fl(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new ve(t,e,n,r)}function hl(t){if(t instanceof ve)return new ve(t.h,t.s,t.l,t.opacity);if(t instanceof ir||(t=sr(t)),!t)return new ve;if(t instanceof ve)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),a=NaN,s=o-i,l=(o+i)/2;return s?(e===o?a=(n-r)/s+(n<r)*6:n===o?a=(r-e)/s+2:a=(e-n)/s+4,s/=l<.5?o+i:2-o-i,a*=60):s=l>0&&l<1?0:a,new ve(a,s,l,t.opacity)}function l0(t,e,n,r){return arguments.length===1?hl(t):new ve(t,e,n,r==null?1:r)}function ve(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}fo(ve,l0,il(ir,{brighter:function(t){return t=t==null?$r:Math.pow($r,t),new ve(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=t==null?or:Math.pow(or,t),new ve(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new Kt(_o(t>=240?t-240:t+120,i,r),_o(t,i,r),_o(t<120?t+240:t-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return t=isNaN(t)?1:Math.max(0,Math.min(1,t)),(t===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(t===1?")":", "+t+")")}}));function _o(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}function dl(t){return function(){return t}}function u0(t,e){return function(n){return t+n*e}}function c0(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function f0(t){return(t=+t)==1?pl:function(e,n){return n-e?c0(e,n,t):dl(isNaN(e)?n:e)}}function pl(t,e){var n=e-t;return n?u0(t,n):dl(isNaN(t)?e:t)}const _l=function t(e){var n=f0(e);function r(i,o){var a=n((i=ho(i)).r,(o=ho(o)).r),s=n(i.g,o.g),l=n(i.b,o.b),u=pl(i.opacity,o.opacity);return function(c){return i.r=a(c),i.g=s(c),i.b=l(c),i.opacity=u(c),i+""}}return r.gamma=t,r}(1);function ze(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}var go=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,vo=new RegExp(go.source,"g");function h0(t){return function(){return t}}function d0(t){return function(e){return t(e)+""}}function p0(t,e){var n=go.lastIndex=vo.lastIndex=0,r,i,o,a=-1,s=[],l=[];for(t=t+"",e=e+"";(r=go.exec(t))&&(i=vo.exec(e));)(o=i.index)>n&&(o=e.slice(n,o),s[a]?s[a]+=o:s[++a]=o),(r=r[0])===(i=i[0])?s[a]?s[a]+=i:s[++a]=i:(s[++a]=null,l.push({i:a,x:ze(r,i)})),n=vo.lastIndex;return n<e.length&&(o=e.slice(n),s[a]?s[a]+=o:s[++a]=o),s.length<2?l[0]?d0(l[0].x):h0(e):(e=l.length,function(u){for(var c=0,f;c<e;++c)s[(f=l[c]).i]=f.x(u);return s.join("")})}var gl=180/Math.PI,mo={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function vl(t,e,n,r,i,o){var a,s,l;return(a=Math.sqrt(t*t+e*e))&&(t/=a,e/=a),(l=t*n+e*r)&&(n-=t*l,r-=e*l),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,l/=s),t*r<e*n&&(t=-t,e=-e,l=-l,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(e,t)*gl,skewX:Math.atan(l)*gl,scaleX:a,scaleY:s}}var lr,yo,ml,ei;function _0(t){return t==="none"?mo:(lr||(lr=document.createElement("DIV"),yo=document.documentElement,ml=document.defaultView),lr.style.transform=t,t=ml.getComputedStyle(yo.appendChild(lr),null).getPropertyValue("transform"),yo.removeChild(lr),t=t.slice(7,-1).split(","),vl(+t[0],+t[1],+t[2],+t[3],+t[4],+t[5]))}function g0(t){return t==null||(ei||(ei=document.createElementNS("http://www.w3.org/2000/svg","g")),ei.setAttribute("transform",t),!(t=ei.transform.baseVal.consolidate()))?mo:(t=t.matrix,vl(t.a,t.b,t.c,t.d,t.e,t.f))}function yl(t,e,n,r){function i(u){return u.length?u.pop()+" ":""}function o(u,c,f,h,p,_){if(u!==f||c!==h){var g=p.push("translate(",null,e,null,n);_.push({i:g-4,x:ze(u,f)},{i:g-2,x:ze(c,h)})}else(f||h)&&p.push("translate("+f+e+h+n)}function a(u,c,f,h){u!==c?(u-c>180?c+=360:c-u>180&&(u+=360),h.push({i:f.push(i(f)+"rotate(",null,r)-2,x:ze(u,c)})):c&&f.push(i(f)+"rotate("+c+r)}function s(u,c,f,h){u!==c?h.push({i:f.push(i(f)+"skewX(",null,r)-2,x:ze(u,c)}):c&&f.push(i(f)+"skewX("+c+r)}function l(u,c,f,h,p,_){if(u!==f||c!==h){var g=p.push(i(p)+"scale(",null,",",null,")");_.push({i:g-4,x:ze(u,f)},{i:g-2,x:ze(c,h)})}else(f!==1||h!==1)&&p.push(i(p)+"scale("+f+","+h+")")}return function(u,c){var f=[],h=[];return u=t(u),c=t(c),o(u.translateX,u.translateY,c.translateX,c.translateY,f,h),a(u.rotate,c.rotate,f,h),s(u.skewX,c.skewX,f,h),l(u.scaleX,u.scaleY,c.scaleX,c.scaleY,f,h),u=c=null,function(p){for(var _=-1,g=h.length,y;++_<g;)f[(y=h[_]).i]=y.x(p);return f.join("")}}}var v0=yl(_0,"px, ","px)","deg)"),m0=yl(g0,", ",")",")");function y0(t,e){var n,r;return function(){var i=Ae(this,t),o=i.tween;if(o!==n){r=n=o;for(var a=0,s=r.length;a<s;++a)if(r[a].name===e){r=r.slice(),r.splice(a,1);break}}i.tween=r}}function w0(t,e,n){var r,i;if(typeof n!="function")throw new Error;return function(){var o=Ae(this,t),a=o.tween;if(a!==r){i=(r=a).slice();for(var s={name:e,value:n},l=0,u=i.length;l<u;++l)if(i[l].name===e){i[l]=s;break}l===u&&i.push(s)}o.tween=i}}function x0(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=se(this.node(),n).tween,i=0,o=r.length,a;i<o;++i)if((a=r[i]).name===t)return a.value;return null}return this.each((e==null?y0:w0)(n,t,e))}function wo(t,e,n){var r=t._id;return t.each(function(){var i=Ae(this,r);(i.value||(i.value={}))[e]=n.apply(this,arguments)}),function(i){return se(i,r).value[e]}}function wl(t,e){var n;return(typeof e=="number"?ze:e instanceof sr?_l:(n=sr(e))?(e=n,_l):p0)(t,e)}function b0(t){return function(){this.removeAttribute(t)}}function M0(t){return function(){this.removeAttributeNS(t.space,t.local)}}function E0(t,e,n){var r,i=n+"",o;return function(){var a=this.getAttribute(t);return a===i?null:a===r?o:o=e(r=a,n)}}function k0(t,e,n){var r,i=n+"",o;return function(){var a=this.getAttributeNS(t.space,t.local);return a===i?null:a===r?o:o=e(r=a,n)}}function S0(t,e,n){var r,i,o;return function(){var a,s=n(this),l;return s==null?void this.removeAttribute(t):(a=this.getAttribute(t),l=s+"",a===l?null:a===r&&l===i?o:(i=l,o=e(r=a,s)))}}function T0(t,e,n){var r,i,o;return function(){var a,s=n(this),l;return s==null?void this.removeAttributeNS(t.space,t.local):(a=this.getAttributeNS(t.space,t.local),l=s+"",a===l?null:a===r&&l===i?o:(i=l,o=e(r=a,s)))}}function A0(t,e){var n=zr(t),r=n==="transform"?m0:wl;return this.attrTween(t,typeof e=="function"?(n.local?T0:S0)(n,r,wo(this,"attr."+t,e)):e==null?(n.local?M0:b0)(n):(n.local?k0:E0)(n,r,e))}function N0(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function F0(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function C0(t,e){var n,r;function i(){var o=e.apply(this,arguments);return o!==r&&(n=(r=o)&&F0(t,o)),n}return i._value=e,i}function I0(t,e){var n,r;function i(){var o=e.apply(this,arguments);return o!==r&&(n=(r=o)&&N0(t,o)),n}return i._value=e,i}function D0(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=zr(t);return this.tween(n,(r.local?C0:I0)(r,e))}function P0(t,e){return function(){co(this,t).delay=+e.apply(this,arguments)}}function R0(t,e){return e=+e,function(){co(this,t).delay=e}}function O0(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?P0:R0)(e,t)):se(this.node(),e).delay}function L0(t,e){return function(){Ae(this,t).duration=+e.apply(this,arguments)}}function H0(t,e){return e=+e,function(){Ae(this,t).duration=e}}function U0(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?L0:H0)(e,t)):se(this.node(),e).duration}function B0(t,e){if(typeof e!="function")throw new Error;return function(){Ae(this,t).ease=e}}function Y0(t){var e=this._id;return arguments.length?this.each(B0(e,t)):se(this.node(),e).ease}function z0(t){typeof t!="function"&&(t=Rs(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o=e[i],a=o.length,s=r[i]=[],l,u=0;u<a;++u)(l=o[u])&&t.call(l,l.__data__,u,o)&&s.push(l);return new Ne(r,this._parents,this._name,this._id)}function W0(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,o=Math.min(r,i),a=new Array(r),s=0;s<o;++s)for(var l=e[s],u=n[s],c=l.length,f=a[s]=new Array(c),h,p=0;p<c;++p)(h=l[p]||u[p])&&(f[p]=h);for(;s<r;++s)a[s]=e[s];return new Ne(a,this._parents,this._name,this._id)}function q0(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function V0(t,e,n){var r,i,o=q0(e)?co:Ae;return function(){var a=o(this,t),s=a.on;s!==r&&(i=(r=s).copy()).on(e,n),a.on=i}}function G0(t,e){var n=this._id;return arguments.length<2?se(this.node(),n).on.on(t):this.each(V0(n,t,e))}function j0(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function X0(){return this.on("end.remove",j0(this._id))}function K0(t){var e=this._name,n=this._id;typeof t!="function"&&(t=oo(t));for(var r=this._groups,i=r.length,o=new Array(i),a=0;a<i;++a)for(var s=r[a],l=s.length,u=o[a]=new Array(l),c,f,h=0;h<l;++h)(c=s[h])&&(f=t.call(c,c.__data__,h,s))&&("__data__"in c&&(f.__data__=c.__data__),u[h]=f,Jr(u[h],e,n,h,u,se(c,n)));return new Ne(o,this._parents,e,n)}function Z0(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Ps(t));for(var r=this._groups,i=r.length,o=[],a=[],s=0;s<i;++s)for(var l=r[s],u=l.length,c,f=0;f<u;++f)if(c=l[f]){for(var h=t.call(c,c.__data__,f,l),p,_=se(c,n),g=0,y=h.length;g<y;++g)(p=h[g])&&Jr(p,e,n,g,h,_);o.push(h),a.push(c)}return new Ne(o,a,e,n)}var Q0=$n.prototype.constructor;function J0(){return new Q0(this._groups,this._parents)}function $0(t,e){var n,r,i;return function(){var o=kn(this,t),a=(this.style.removeProperty(t),kn(this,t));return o===a?null:o===n&&a===r?i:i=e(n=o,r=a)}}function xl(t){return function(){this.style.removeProperty(t)}}function t_(t,e,n){var r,i=n+"",o;return function(){var a=kn(this,t);return a===i?null:a===r?o:o=e(r=a,n)}}function e_(t,e,n){var r,i,o;return function(){var a=kn(this,t),s=n(this),l=s+"";return s==null&&(l=s=(this.style.removeProperty(t),kn(this,t))),a===l?null:a===r&&l===i?o:(i=l,o=e(r=a,s))}}function n_(t,e){var n,r,i,o="style."+e,a="end."+o,s;return function(){var l=Ae(this,t),u=l.on,c=l.value[o]==null?s||(s=xl(e)):void 0;(u!==n||i!==c)&&(r=(n=u).copy()).on(a,i=c),l.on=r}}function r_(t,e,n){var r=(t+="")=="transform"?v0:wl;return e==null?this.styleTween(t,$0(t,r)).on("end.style."+t,xl(t)):typeof e=="function"?this.styleTween(t,e_(t,r,wo(this,"style."+t,e))).each(n_(this._id,t)):this.styleTween(t,t_(t,r,e),n).on("end.style."+t,null)}function i_(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function o_(t,e,n){var r,i;function o(){var a=e.apply(this,arguments);return a!==i&&(r=(i=a)&&i_(t,a,n)),r}return o._value=e,o}function a_(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,o_(t,e,n==null?"":n))}function s_(t){return function(){this.textContent=t}}function l_(t){return function(){var e=t(this);this.textContent=e==null?"":e}}function u_(t){return this.tween("text",typeof t=="function"?l_(wo(this,"text",t)):s_(t==null?"":t+""))}function c_(t){return function(e){this.textContent=t.call(this,e)}}function f_(t){var e,n;function r(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&c_(i)),e}return r._value=t,r}function h_(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,f_(t))}function d_(){for(var t=this._name,e=this._id,n=bl(),r=this._groups,i=r.length,o=0;o<i;++o)for(var a=r[o],s=a.length,l,u=0;u<s;++u)if(l=a[u]){var c=se(l,e);Jr(l,t,n,u,a,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new Ne(r,this._parents,t,n)}function p_(){var t,e,n=this,r=n._id,i=n.size();return new Promise(function(o,a){var s={value:a},l={value:function(){--i===0&&o()}};n.each(function(){var u=Ae(this,r),c=u.on;c!==t&&(e=(t=c).copy(),e._.cancel.push(s),e._.interrupt.push(s),e._.end.push(l)),u.on=e})})}var __=0;function Ne(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function bl(){return++__}var An=$n.prototype;Ne.prototype={constructor:Ne,select:K0,selectAll:Z0,filter:z0,merge:W0,selection:J0,transition:d_,call:An.call,nodes:An.nodes,node:An.node,size:An.size,empty:An.empty,each:An.each,on:G0,attr:A0,attrTween:D0,style:r_,styleTween:a_,text:u_,textTween:h_,remove:X0,tween:x0,delay:O0,duration:U0,ease:Y0,end:p_};function g_(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var xo={time:null,delay:0,duration:250,ease:g_};function v_(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))return xo.time=jr(),xo;return n}function m_(t){var e,n;t instanceof Ne?(e=t._id,t=t._name):(e=bl(),(n=xo).time=jr(),t=t==null?null:t+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var a=r[o],s=a.length,l,u=0;u<s;++u)(l=a[u])&&Jr(l,t,e,u,a,n||v_(l,e));return new Ne(r,this._parents,t,e)}$n.prototype.interrupt=Jp,$n.prototype.transition=m_;var y_=1,bo={container:document.body,point:[window.innerWidth/2,window.innerHeight/2],html:"",open_duration:250,close_duration:250,popup_custom_template:"",position:"overlay",shadow:!0,underlay_color:"rgba(255, 255, 255, 0.75)",width_side:35,height_side:35,width_overlay:80,height_overlay:80,vertical_position:"click",max_width:null,max_height:null,closeable:!0};function le(){var t=this;t.unique_id=y_++,t._is_open=!1,t._onclose=null;for(var e in bo)t["_"+e]=bo[e]}function w_(t){le.prototype[t]=function(e){return typeof e=="undefined"?this["_"+t]:(this["_"+t]=e,this)}}for(var x_ in bo)w_(x_);le.prototype.point=function(t,e){if(typeof t=="undefined")return this._point;if(Array.isArray(t))this._point=[t[0],t[1]];else if(typeof e!="undefined")this._point=[t,e];else if(t instanceof HTMLElement||t instanceof SVGElement){var n=t.getBoundingClientRect();this._point=[Math.floor(n.left+n.width/2),Math.floor(n.top+n.height/2)]}else console.error("Panel: could not understand argument");return this},le.prototype.container=function(t){return t&&(this._container=t),this};function b_(t){t._getElement().style.pointerEvents="none",t._is_open=!1;var e=t._close_duration;Ct(t._getElement()).transition().duration(e).style("background","rgba(255, 255, 255, 0)").on("interrupt",function(){Ct(this).style("display",t._is_open?"block":"none")}).on("end",function(){Ct(this).style("display","none"),Ct(t._content).html("")}).select(".flourish-panel-close").style("opacity","0"),Ct(t._inner).transition().duration(e).style("opacity",0),Ct(t._content).transition().duration(e/2).style("opacity",0)}le.prototype.hide=function(){var t=this;if(t._is_open)return b_(t),this},le.prototype.close=le.prototype.hide;function M_(t){Ct(t._inner).append("svg").attr("class","flourish-panel-close fl-ignore-svg-download").attr("viewBox","0 0 40 40").style("width","1.25rem").style("height","1.25rem").style("position","absolute").style("right","1rem").style("top","1rem").style("cursor","pointer").style("opacity",0).attr("tabindex","-1").on("mouseover",function(){t._closeable&&(this.style.opacity=.66)}).on("mouseout",function(){t._closeable&&(this.style.opacity=1)}).on("click",function(){Ye.stopPropagation(),t.hide(),t._onclose&&t._onclose()}).on("touch",function(){Ye.stopPropagation(),t.hide(),t._onclose&&t._onclose()}).on("keydown",function(){Ye.key=="Enter"&&(Ye.stopPropagation(),Ye.preventDefault(),t.hide(),t._onclose&&t._onclose())}).append("path").attr("stroke","#333333").attr("stroke-width","0.5rem").attr("stroke-linecap","round").attr("d","M 10,10 L 30,30 M 30,10 L 10,30")}le.prototype.draw=function(){var t=this;return t._content.innerHTML=t._html,E_(t),this},le.prototype.on=function(t,e){return t=="close"?e&&(this._onclose=e):console.error("Panel .on() method only supports 'close' events"),this};function E_(t){var e=t._is_open||t._html==t._default?0:t._open_duration,n=window.innerWidth,r=window.innerHeight,i=t._position=="overlay",o=t._position=="top"||t._position=="bottom",a=t._position=="left"||t._position=="right",s=100*(t._max_width||1/0)/n,l=100*(t._max_height||1/0)/r,u=100*t._point[1]/r,c=t._vertical_position=="click"&&!Flourish.fixed_height,f=i?Math.min(t._width_overlay,s):o?100:Math.min(t._width_side,s),h=i?Math.min(t._height_overlay,l):a?100:Math.min(t._height_side,l),p=i?(100-f)/2:t._position=="right"?100-f:0,_=c?Math.max(1,Math.min(u-h/2,99-h)):(100-h)/2,g=i?_:t._position=="bottom"?100-h:0,y=i?0:f,k=i?0:h,S=i?100*t._point[0]/n:t._position=="right"?100:t._position=="left"?-f:0,m=i?u:t._position=="bottom"?100:t._position=="top"?-h:0;Ct(t._getElement()).style("display","block").transition().duration(e).delay(e*.25).style("background",i?t._underlay_color:"rgba(255, 255, 255, 0)").style("pointer-events",i?null:"none"),Ct(t._inner).style("opacity",1).style("display","block").style("pointer-events","none").style("width",y+"%").style("height",k+"%").style("left",S+"%").style("top",m+"%").transition().duration(e).style("width",f+"%").style("height",h+"%").style("left",p+"%").style("top",g+"%").on("end",function(){Ct(t._inner).style("pointer-events","all").style("width",f+"%").style("height",h+"%").style("left",p+"%").style("top",g+"%")}).on("interrupt",function(){Ct(t._inner).style("pointer-events","all").style("width",f+"%").style("height",h+"%").style("left",p+"%").style("top",g+"%")});var C=a&&c;Ct(t._content).transition().duration(e/4).delay(e).style("opacity",1).on("interrupt",function(){Ct(this).style("opacity",1)}),Ct(t._content).select(".flourish-panel-content-inner").style("position",C?"absolute":null).style("top",C?u+"%":null).style("transform",C?"translateY(-50%)":null),Ct(t._inner).select(".flourish-panel-close").style("opacity",0).transition().duration(e/4).delay(e).style("opacity",t._closeable?1:0).attr("tabindex","0"),t._is_open=!0,Zs()}le.prototype.margins=function(){var t={top:0,right:0,bottom:0,left:0};if(this._is_open&&this._position!="overlay"){var e=this._getElement().getBoundingClientRect();this._position=="top"&&(t.top=e.top+e.height),this._position=="right"&&(t.right=e.left),this._position=="bottom"&&(t.bottom=e.top),this._position=="left"&&(t.left=e.left+e.width)}return t.css=t.top+"px "+t.right+"px "+t.bottom+"px "+t.left+"px",t},le.prototype._getElement=function(){var t=this,e="flourish-panel-"+t.unique_id,n=document.getElementById(e);if(!n){n=document.createElement("div"),n.className="flourish-panel",n.id=e,n.addEventListener("click",function(l){l.stopPropagation(),s()}),window.addEventListener("keydown",function(l){t._is_open&&l.key==="Escape"&&(l.stopPropagation(),l.preventDefault(),s())},!1);var r=n.style;r.position="absolute",r.zIndex="999999",r.pointerEvents="none",r.width="100%",r.height="100%",r.top="0",r.left="0",r.background="rgba(255, 255, 255, 0)";var i=document.createElement("div");i.className="flourish-panel-inner",n.appendChild(i),t._inner=i,r=i.style,r.width="0",r.height="0",r.position="absolute",r.boxSizing="border-box";var o=document.createElement("div");o.className="flourish-panel-shadow",i.appendChild(o);var a=document.createElement("div");a.className="flourish-panel-content",i.appendChild(a),t._content=a,r=a.style,r.opacity="0",r.overflowY="auto",r.height="100%",M_(t),t._container.appendChild(n)}function s(){t.hide(),t._onclose&&t._onclose()}return n};function k_(){return new le}var Ml={mode:"popup",locked_id:null,popup_is_custom:!1,popup_custom_header:"Popup header",popup_custom_main:"Popup main content. Write your column names in between double curly brackets to display dynamic content.",popup_custom_accessible:"",popup_teaser_default:"Click to see more",popup_text_color:"#333333",popup_align:"start",popup_font_size:1,popup_width:18,popup_background:"#ffffff",popup_background_opacity:1,popup_padding:.5,popup_radius:.2,popup_shadow:!0,popup_pointer:!0,popup_header_background:"#333333",popup_header_text_color:"#ffffff",popup_header_type:"block",popup_list_type:"table",popup_list_label_weight:"normal",popup_list_separator:": ",panel_is_custom:!1,panel_custom_header:"Custom panel header",panel_custom_main:"Custom panel main content",panel_side_default_content:"<h3>Tap or click to explore</h3>",panel_side_fixed:!1,panel_position:"overlay",panel_width_overlay:80,panel_height_overlay:80,panel_vertical_position:"center",panel_width_side:35,panel_height_side:35,panel_max_width:null,panel_max_height:null,panel_text_color:"#333333",panel_align:"start",panel_font_size:1.25,panel_background:"#ffffff",panel_background_opacity:.9,panel_padding:1.2,panel_radius:.2,panel_shadow:!0,panel_open_duration:250,panel_close_duration:250,panel_list_type:"table",panel_list_label_weight:"normal",panel_list_separator:": "},re="$";function ni(){}ni.prototype=El.prototype={constructor:ni,has:function(t){return re+t in this},get:function(t){return this[re+t]},set:function(t,e){return this[re+t]=e,this},remove:function(t){var e=re+t;return e in this&&delete this[e]},clear:function(){for(var t in this)t[0]===re&&delete this[t]},keys:function(){var t=[];for(var e in this)e[0]===re&&t.push(e.slice(1));return t},values:function(){var t=[];for(var e in this)e[0]===re&&t.push(this[e]);return t},entries:function(){var t=[];for(var e in this)e[0]===re&&t.push({key:e.slice(1),value:this[e]});return t},size:function(){var t=0;for(var e in this)e[0]===re&&++t;return t},empty:function(){for(var t in this)if(t[0]===re)return!1;return!0},each:function(t){for(var e in this)e[0]===re&&t(this[e],e.slice(1),this)}};function El(t,e){var n=new ni;if(t instanceof ni)t.each(function(s,l){n.set(l,s)});else if(Array.isArray(t)){var r=-1,i=t.length,o;if(e==null)for(;++r<i;)n.set(r,t[r]);else for(;++r<i;)n.set(e(o=t[r],r,t),o)}else if(t)for(var a in t)n.set(a,t[a]);return n}function kl(){}var ln=El.prototype;kl.prototype={constructor:kl,has:ln.has,add:function(t){return t+="",this[re+t]=t,this},remove:ln.remove,clear:ln.clear,values:ln.keys,size:ln.size,empty:ln.empty,each:ln.each};function Sl(t){return typeof t!="string"?!1:t.match(/^(https?:\/\/|data:)/i)!=null}document.createElement("canvas").getContext("2d");const ri=/\{\{((?:[^}]|\}[^}])*)\}\}/g;function Fe(t){return!!(t===""||Number.isNaN(t)||t===null||t===void 0)}function Tl(t,e){let n={title:null,subtitle:null,main:{}};var r={};const i=e[t._title_key],o=e[t._subtitle_key];if(i){n.title=i;const s=t._column_names[t._title_key];r[s]=!0}if(o){n.subtitle=o;const s=t._column_names[t._subtitle_key];r[s]=!0}const a=Object.keys(t._column_names);a.includes("metadata")&&a.push(a.splice(a.indexOf("metadata"),1)[0]);for(let s=0;s<a.length;s++){const l=a[s];if(t._column_names_hidden.indexOf(l)>-1||l==t._title_key||l==t._subtitle_key)continue;const u=t._column_names[l];if(Array.isArray(u))u.forEach(function(c,f){r[c]||Fe(e[l])||(r[c]=!0,n.main[c]=e[l][f])});else{if(r[u]||Fe(e[l]))continue;r[u]=!0,n.main[u]=e[l]}}return n}function S_(t,e){let n="";var r=t._popup_default_template;const i=Eo(t,e);if(t._state.popup_is_custom&&t._state.popup_custom_accessible){const s=t._state.popup_custom_accessible;n=Mo(s,t,i)}else if(r){var a={};r.match(ri).forEach(l=>{l.replace(ri,function(u,c){var f;const h=t._column_names[c];if(Array.isArray(h)){if(h.length==0)return;h.forEach(function(p,_){if(a[p])return;a[p]=!0;const g=i[c][_];Sl(g)||Fe(g)||(f=`${p}: ${g}, `)})}else{const p=i[c];if(Sl(p)||Fe(p)||a[h])return;a[h]=!0,f=`${h}: ${p}, `}f!==void 0&&(n+=f)})})}else{let s=Tl(t,i);s.title&&(n+=`${s.title}, `),s.subtitle&&(n+=`${s.subtitle}, `);for(var o in s.main){const l=s.main[o];Fe(l)||(n+=`${o}: ${l}, `)}}return n=n.replace(/, $/,""),T_(n)}function T_(t){const e=document.createElement("div");return e.innerHTML=t,e.innerText}function Al(t,e,n){var r="<div class='flourish-panel-content-inner'>",i=t["_"+n+"_default_template"],o=t._state[n+"_list_type"],a=t._state[n+"_list_separator"],s=a==="<br />",l=s?"":a,u=s?a:"";if(i)r+=i.replace(ri,function(f,h){var p,_=t._column_names[h];if(Array.isArray(_)){if(_.length==0)return"";p="<ul>",_.forEach(function(g,y){p+="<li>"+g+a+e[h][y]+"</li>"}),p+="</ul>"}else p=e[h];return p!==void 0?p:""});else{let f=Tl(t,e);if((f.title||f.subtitle)&&(r+="<header>",f.title&&(r+=`<h3>${f.title}</h3>`),f.subtitle&&(r+=`<h4>${f.subtitle}</h4>`),r+="</header>"),Object.keys(f.main).length){let h="";for(var c in f.main){const p=f.main[c];o=="table"?(h+="<tr><td class='table-col-label'><span class='data-heading'>",h+=c+"</span></td><td class='table-col-value'>",h+=p+"</td></tr>"):o=="ul"&&(h+="<li><span class='data-heading'>"+c+l,h+=" </span> "+u+p+"</li>")}r+="<div class='main-content'><"+o+">",r+=h,r+="</"+o+"></div></div>"}}return r}function Nl(t,e,n){var r;return Object.keys(t._column_names).some(function(i){if(Array.isArray(t._column_names[i])){var o=t._column_names[i].indexOf(e);if(o>=0)return r=n[i][o],!0}else if(t._column_names[i]==e)return r=n[i],!0}),r!==void 0?r:""}function Fl(t,e,n){var r="";const i=n==="popup"?t._state.popup_custom_header:t._state.panel_custom_header,o=n==="popup"?t._state.popup_custom_main:t._state.panel_custom_main;var a=Mo(i,t,e),s=Mo(o,t,e);return a&&(r+="<header>"+a+"</header>"),s&&(r+="<div class='main-content'>"+s+"</div>"),r}function Mo(t,e,n){var r=/\{\{#if ((?:[^}]|\}[^}])*)\}\}([\s\S]*?)\{\{\/if\}\}/g,i=/\{\{(visualisation|story)\/(.*)\}\}/g;return t.replace(r,function(o,a,s){return Nl(e,a,n)==""?"":s}).replace(i,function(o,a,s){var l=s.split("/");if(l.length<1||!["visualisation","story"].includes(a))return o;var u={id:l[0],w:l[1]||"100%",h:l[2]||"400px%"},c="https://flo.uri.sh/"+a+"/"+u.id+"/embed?",f=Yp("iframe").attr("src",c).attr("title","Interactive or visual content").attr("class","flourish-embed-iframe").attr("frameborder","0").attr("scrolling","no").attr("sandbox","allow-same-origin allow-forms allow-scripts allow-downloads allow-popups allow-popups-to-escape-sandbox allow-top-navigation-by-user-activation").style("width",u.width).style("height",u.height);return f.node().outerHTML}).replace(ri,function(o,a){return Nl(e,a,n)}).trim()}function Eo(t,e){var n=t._formatters,r={};for(var i in e)if(n&&n[i])if(Array.isArray(n[i])){for(var o=[],a=0;a<n[i].length;a++){let s;Fe(e[i][a])?s="":s=n[i][a](e[i][a]),o.push(s)}r[i]=o}else{if(Fe(e[i]))continue;r[i]=Fe(e[i])?"":n[i](e[i])}else r[i]=Fe(e[i])?"":e[i];return r}function Cl(t,e,n){var r="",i=Eo(t,e);return n&&!t._state.popup_is_custom?r+="<div class='main-content'>"+t._state.popup_teaser_default+"</div>":!n&&!t._state.popup_is_custom?r+=Al(t,i,"popup"):r+=Fl(t,i,"popup"),r}function Il(t,e){var n="",r=Eo(t,e);return t._state.panel_is_custom?n+=Fl(t,r,"panel"):n+=Al(t,r,"panel"),n}function ur(){return this.declarations=[],this}ur.prototype.select=function(t){if(!t)return this;var e=new ko(t);return e.parent=this,this.addDeclaration(e),e},ur.prototype.addDeclaration=function(t){return this.declarations.push(t),this},ur.prototype.print=function(){var t="";return this.declarations.forEach(function(e){t+=e.selector+` {
`,e.styles.forEach(function(n){t+="	"+n[0]+": "+n[1]+`;
`}),t+=`}

`}),t},ur.prototype.clear=function(){return this.declarations=[],this};function ko(t){return this.selector=t,this.styles=[],this}ko.prototype.style=function(t,e){var n=typeof value_=="function"?e():e;return n!==""&&n!==null&&n!==void 0&&this.styles.push([t,n]),this},ko.prototype.select=function(t){return this.parent.select(this.selector+" "+t)};function A_(t){if(!document.querySelector("#popup-styles")){var e=document.createElement("style");e.id="popup-styles",document.head.appendChild(e)}var n=new ur,r=t._state.popup_header_type=="block",i=Je(t._state.popup_header_background||"transparent");i.opacity=t._state.popup_header_background?t._state.popup_background_opacity:0;var o=t._state.panel_position;n.select(".flourish-panel .flourish-panel-shadow").style("pointer-events","none").style("position","absolute").style("display",o=="overlay"||!t._state.panel_shadow?"none":"block").style("top",o=="bottom"?"-3rem":o=="top"?"auto":0).style("right",o=="left"?"-3rem":o=="right"?"auto":0).style("bottom",o=="top"?"-3rem":o=="bottom"?"auto":0).style("left",o=="right"?"-3rem":o=="left"?"auto":0).style("width",o=="left"||o=="right"?"3rem":"100%").style("height",o=="top"||o=="bottom"?"3rem":"100%").style("z-index","-1").style("overflow","hidden"),n.select(".flourish-panel .flourish-panel-shadow:before").style("content","''").style("display","block").style("position","absolute").style("width",o=="left"||o=="right"?"1.5rem":"100%").style("height",o=="top"||o=="bottom"?"1.5rem":"100%").style("border-radius","50%").style("background","rgba(0,0,0,0.3)").style("bottom",o=="bottom"?"-50%":o=="top"?"auto":0).style("left",o=="left"?"-50%":o=="right"?"auto":0).style("top",o=="top"?"-50%":o=="bottom"?"auto":0).style("right",o=="right"?"-50%":o=="left"?"auto":0).style("filter","blur(15px)"),n.select(".flourish-popup").style("pointer-events","none").select(".flourish-popup-content").style("pointer-events","auto").style("max-width",t._state.popup_width==null?null:t._state.popup_width+"rem !important"),n.select(".flourish-popup header, .flourish-panel header").style("margin","0"),n.select(".flourish-popup header").style("font-weight","bold").style("color",r?t._state.popup_header_text_color:null).style("background",r?i.rgb():null).style("padding",t._state.popup_padding+"rem").style("border-radius",t._state.popup_radius+"rem "+t._state.popup_radius+"rem 0 0"),n.select(".flourish-popup header:not(:last-child)").style("padding-bottom",r?null:"0"),n.select(".flourish-popup header:not(:last-child)").style("padding-bottom",r?null:"0"),n.select(".flourish-panel .flourish-panel-content-inner").style("overflow","auto"),n.select(".flourish-panel header").style("font-weight","bold").style("margin-bottom","0.5em").style("padding-right","1rem"),n.select(".flourish-popup .main-content").style("padding",t._state.popup_padding+"rem"),n.select(".flourish-popup header + .main-content").style("padding",t._state.popup_padding+"rem").style("padding-top",r?null:"0"),n.select(".flourish-popup h3, .flourish-panel h3").style("font-size","1em").style("margin","0"),n.select(".flourish-popup h3, .flourish-popup h4, .flourish-popup ul li").style("text-align",t._state.popup_align),n.select(".flourish-panel h3, .flourish-panel h4, .flourish-panel ul li").style("text-align",t._state.panel_align),n.select(".flourish-popup h4, .flourish-panel h4").style("font-size","1em").style("margin",r?"0":"0 0 0.25em").style("opacity","0.6").style("font-weight","normal"),n.select(".flourish-popup h4:empty, .flourish-panel h4:empty, .flourish-popup h3:empty, .flourish-panel h3:empty, .flourish-popup p:empty, .flourish-panel p:empty").style("display","none"),n.select(".flourish-popup p, .flourish-panel p").style("margin","0").style("font-size","inherit").style("font-weight","normal"),n.select(".flourish-popup table, .flourish-panel table").style("margin","0").style("width","100%").style("border-collapse","collapse").style("table-layout","auto"),n.select(".flourish-popup table tr, .flourish-panel table tr").style("border-top","1px solid #eee"),n.select(".flourish-popup table tr:first-child, .flourish-panel table tr:first-child").style("border-top","none"),n.select(".flourish-popup table tr td, .flourish-panel table tr td").style("padding","0.25em 0 0.25em 0").style("padding-inline-end","0.25em").style("vertical-align","top").style("font-size","inherit").style("text-align","start").style("font-weight","normal").style("overflow","hidden").style("text-overflow","ellipsis"),n.select(".flourish-popup table tr:last-child td, .flourish-panel table tr:last-child td").style("padding-bottom","0"),n.select(".flourish-popup .data-heading").style("font-weight",t._state.popup_list_label_weight).style("display","inline-block"),n.select(".flourish-panel .data-heading").style("font-weight",t._state.panel_list_label_weight).style("display","inline-block"),n.select(".flourish-popup table tr td.table-col-value, .flourish-panel table tr td.table-col-value").style("text-align","end").style("padding","0.25em 0 0.25em 0").style("padding-inline-end","0.25em"),n.select(".flourish-popup table tr:last-child td.table-col-value, .flourish-panel table tr:last-child td.table-col-value").style("padding-bottom","0"),n.select(".flourish-popup ul, .flourish-panel ul").style("padding","0").style("margin","0"),n.select(".flourish-popup ul li, .flourish-panel ul li").style("font-size","inherit").style("list-style-type","none"),t._state.popup_is_custom&&(console.log("is custom",t._state.popup_is_custom),n.select(".flourish-popup ul, .flourish-panel ul, .flourish-popup ol").style("padding-inline-start","1.5em").style("padding-inline-end","0.5em"),n.select(".flourish-popup ul li, .flourish-panel ul li").style("list-style-type","disc"),n.select(".flourish-popup ul li, .flourish-panel ul li").style("font-size","inherit").style("list-style-position","outside"),n.select(".flourish-popup ol li").style("padding-inline-start","0.5em")),document.head.querySelector("#popup-styles").innerHTML=n.print()}function Dl(t){var e=t.popup._getElement(),n=e.querySelector(".flourish-popup-content");n.style.padding="0",n.style.textAlign=t._state.popup_align,n.style.color=t._state.popup_text_color,n.style.fontSize=t._state.popup_font_size+"rem",n.style.borderRadius=t._state.popup_radius+"rem",n.addEventListener("click",function(){event.stopPropagation()});var r=t.panel._getElement(),i=r.querySelector(".flourish-panel-inner"),o=r.querySelector(".flourish-panel-content"),a=Je(t._state.panel_background);i.style.background="rgba("+a.r+","+a.g+","+a.b+","+t._state.panel_background_opacity+")",i.style.borderRadius=t._state.popup_radius+"rem",i.style.boxShadow=t._state.panel_position=="overlay"&&t._state.panel_shadow?"0 0 1.5rem rgba(0,0,0,0.2)":"",i.addEventListener("click",function(){event.stopPropagation()}),o.style.padding=t._state.panel_padding+"rem",o.style.textAlign=t._state.panel_align,o.style.color=t._state.panel_text_color,o.style.fontSize=t._state.panel_font_size+"rem",o.style.boxSizing="border-box";var s=e.querySelector(".flourish-popup-svg g");s.style.fill=t._state.popup_background,s.style.opacity=t._state.popup_background_opacity;var l=r.querySelector(".flourish-panel-close path");l&&(l.style.stroke=t._state.panel_text_color),t._state.popup_shadow==!1?s.removeAttribute("filter"):s.setAttribute("filter","url(#dropshadow-"+t.popup.unique_id+")"),s.querySelector("rect").setAttribute("rx",t._state.popup_radius+"rem"),s.querySelector("path").style.display=t._state.popup_pointer?"block":"none",A_(t)}function So(t){throw new TypeError("Expected a value of type string but got a value of type "+typeof t)}function Ot(t){return function(e){return typeof e!="string"&&So(e),e=e.trim(),e?t(e):null}}var N_=new Date(1972,3,27,19,45,5),ii={"%b %d":[{regex:/^june\s(30|[12][0-9]|0?[1-9])$/i,toDate:function(t){return new Date(null,5,t.split(/\s/)[1])}},{regex:/^july\s(3[01]|[12][0-9]|0?[1-9])$/i,toDate:function(t){return new Date(null,6,t.split(/\s/)[1])}},{regex:/^sept\s(30|[12][0-9]|0?[1-9])$/i,toDate:function(t){return new Date(null,8,t.split(/\s/)[1])}}],"%d %b":[{regex:/^(0?[1-9]|[1-9][0-9])\sjune$/i,toDate:function(t){return new Date(null,5,t.split(/\s/)[0])}},{regex:/^(0?[1-9]|[1-9][0-9])\sjuly$/i,toDate:function(t){return new Date(null,6,t.split(/\s/)[0])}},{regex:/^(0?[1-9]|[1-9][0-9])\ssept$/i,toDate:function(t){return new Date(null,8,t.split(/\s/)[0])}}]};function To(t){return function(e){var n=null;return t.forEach(function(r){var i=e.match(r.regex);i&&(n=r.toDate(e))}),n}}function P(t,e){var n=ms(t),r=vs(t),i;return typeof e=="function"?i=Ot(function(o){return e(o,n(o)!==null)}):i=Ot(function(o){return n(o)!==null}),Object.freeze({test:i,parse:Ot(function(o){return n(o)||(ii[t]?To(ii[t])(o):null)}),format:function(o){return r(o)},type:"datetime",description:t,id:"datetime$"+t,example:r(N_)})}var Ao=Object.freeze([P("%Y-%m-%dT%H:%M:%S.%LZ"),P("%Y-%m-%d %H:%M:%S"),P("%Y-%m-%dT%H:%M:%S"),P("%Y-%m-%dT%H:%M:%SZ"),P("%d/%m/%Y",function(t,e){if(!e)return!1;var n=t.split("/").map(parseFloat);return n[0]>0&&n[0]<=31&&n[1]>0&&n[1]<=12&&n[2]>=1e3}),P("%d/%m/%Y %H:%M",function(t,e){if(!e)return!1;var n=t.split(/[/ :]/).map(parseFloat);return n[0]>0&&n[0]<=31&&n[1]>0&&n[1]<=12&&n[2]>=1e3&&n[3]>=0&&n[3]<24&&n[4]>=0&&n[4]<60}),P("%d/%m/%y",function(t,e){if(!e)return!1;var n=t.split("/").map(parseFloat);return n[0]>0&&n[0]<=31&&n[1]>0&&n[1]<=12&&!isNaN(n[2])}),P("%m/%d/%Y",function(t,e){if(!e)return!1;var n=t.split("/").map(parseFloat);return n[0]>0&&n[0]<=12&&n[1]>0&&n[1]<=31&&n[2]>=1e3}),P("%m/%d/%Y %H:%M",function(t,e){if(!e)return!1;var n=t.split(/[/ :]/).map(parseFloat);return n[0]>0&&n[0]<=12&&n[1]>0&&n[1]<=31&&n[2]>=1e3&&n[3]>=0&&n[3]<24&&n[4]>=0&&n[4]<60}),P("%m/%d/%y",function(t,e){if(!e)return!1;var n=t.split("/").map(parseFloat);return n[0]>0&&n[0]<=12&&n[1]>0&&n[1]<=31&&!isNaN(n[2])}),P("%Y/%m/%d",function(t,e){if(!e)return!1;var n=t.split("/").map(parseFloat);return n[0]>=1e3&&n[1]>0&&n[1]<=12&&n[2]>0&&n[2]<=31}),P("%d-%m-%Y",function(t,e){if(!e)return!1;var n=t.split("-").map(parseFloat);return n[0]>0&&n[0]<=31&&n[1]>0&&n[1]<=12&&n[2]>=1e3}),P("%d-%m-%y",function(t,e){if(!e)return!1;var n=t.split("-").map(parseFloat);return n[0]>0&&n[0]<=31&&n[1]>0&&n[1]<=12&&!isNaN(n[2])}),P("%d.%m.%Y",function(t,e){if(!e)return!1;var n=t.split(".").map(parseFloat);return n[0]>0&&n[0]<=31&&n[1]>0&&n[1]<=12&&n[2]>=1e3}),P("%m.%d.%y",function(t,e){if(!e)return!1;var n=t.split(".").map(parseFloat);return n[0]>0&&n[0]<=12&&n[1]>0&&n[1]<=31&&!isNaN(n[2])}),P("%m-%d-%Y",function(t,e){if(!e)return!1;var n=t.split("-").map(parseFloat);return n[0]>0&&n[0]<=12&&n[1]>0&&n[1]<=31&&n[2]>=1e3}),P("%m-%d-%y",function(t,e){if(!e)return!1;var n=t.split("-").map(parseFloat);return n[0]>0&&n[0]<=12&&n[1]>0&&n[1]<=31&&!isNaN(n[2])}),P("%Y-%m-%d",function(t,e){if(!e)return!1;var n=t.split("-").map(parseFloat);return n[0]>=1e3&&n[1]>0&&n[1]<=12&&n[2]>0&&n[2]<=31}),P("%Y-%m",function(t,e){if(!e)return!1;var n=t.split("-").map(parseFloat);return n[0]>=1e3&&n[1]>0&&n[1]<=12}),P("%Y%m",function(t,e){if(!e)return!1;var n=parseFloat(t.slice(0,4)),r=parseFloat(t.slice(4));return n>1e3&&r>0&&r<=12}),P("%d %b %Y",function(t,e){if(!e)return!1;var n=t.split(" ").map(parseFloat);return n[0]>0&&n[0]<=31&&n[2]>=1e3}),P("%d %B %Y",function(t,e){if(!e)return!1;var n=t.split(" ").map(parseFloat);return n[0]>0&&n[0]<=31&&n[2]>=1e3}),P("%d %b %y"),P("%-d %b %y"),P("%d %B %y"),P("%d-%b-%Y",function(t,e){if(!e)return!1;var n=t.split("-").map(parseFloat);return n[0]>0&&n[0]<=31&&n[2]>=1e3}),P("%d-%B-%Y",function(t,e){if(!e)return!1;var n=t.split("-").map(parseFloat);return n[0]>0&&n[0]<=31&&n[2]>=1e3}),P("%d-%b-%y"),P("%d-%B-%y"),P("%m/%Y",function(t,e){if(!e)return!1;var n=t.split("/").map(parseFloat);return n[0]>0&&n[0]<=12&&n[1]>=1e3}),P("%m/%y"),P("%b %Y",function(t,e){if(!e)return!1;var n=t.split(" ").map(parseFloat);return n[1]>=1e3}),P("%B %Y",function(t,e){if(!e)return!1;var n=t.split(" ").map(parseFloat);return n[1]>=1e3}),P("%b-%y"),P("%b %y"),P("%B %y"),P("%b '%y"),P("%b %y"),P("%B %-d %Y"),P("%d %b",function(t,e){return e?!0:!!To(ii["%d %b"])(t)}),P("%d %B"),P("%b %d",function(t,e){return e?!0:!!To(ii["%b %d"])(t)}),P("%B %d"),P("%d-%m",function(t,e){if(!e)return!1;var n=t.split("-").map(parseFloat);return n[0]>0&&n[0]<=31&&n[1]>0&&n[1]<=12}),P("%m-%d"),P("%d/%m"),P("%m/%d"),P("%b %d %Y"),P("%b %d %Y, %-I.%M%p"),P("%Y",function(t,e){if(!e)return!1;var n=parseFloat(t);return n>1499&&n<2200}),P("%B"),P("%b"),P("%X"),P("%I:%M %p"),P("%-I.%M%p"),P("%H:%M",function(t,e){if(!e)return!1;var n=t.split(":").map(parseFloat);return n[0]>=0&&n[0]<24}),P("%H:%M:%S"),P("%M:%S"),P("%-I%p"),P("Q%q %Y",function(t,e){return e?t.replace(/\s/g,"").length===6:!1}),P("%Y Q%q",function(t,e){return e?t.replace(/\s/g,"").length===6:!1}),P("%YM%m",function(t,e){if(!e)return!1;var n=t.split("M").map(parseFloat);return n[0]>=1e3&&n[1]>0&&n[1]<=12}),P("%YQ%q",function(t,e){if(!e)return!1;var n=t.split("Q").map(parseFloat);return n[0]>=1e3&&n[1]>0&&n[1]<=4}),P("%Y%q",function(t,e){if(!e)return!1;var n=t.split("").map(parseFloat);return n[0]>=1e3&&n[1]>0&&n[1]<=4})]);function F_(t){var e=t.decimal_mark,n=t.thousand_separator,r=Xi({decimal:e,thousands:n,grouping:[3],currency:["",""]}),i,o;return function(a,s){return a===null?"":(s||(s=",.2f"),s!==o&&(o=s,i=r.format(o)),i(a))}}var C_={test:Ot(function(t){return/^(\+|-)?\d{1,3}(,\d{3})*(\.\d+)?((e|E)(\+|-)?\d+)?$/.test(t.trim())}),parse:Ot(function(t){return parseFloat(t.replace(/,/g,""))}),description:"Comma thousand separator, point decimal mark",thousand_separator:",",decimal_mark:".",id:"number$comma_point",example:"12,235.56"},I_={test:Ot(function(t){return/^(\+|-)?\d{1,3}(\s\d{3})*(\.\d+)?((e|E)(\+|-)?\d+)?$/.test(t.trim())}),parse:Ot(function(t){return parseFloat(t.replace(/\s/g,""))}),description:"Space thousand separator, point decimal mark",thousand_separator:" ",decimal_mark:".",id:"number$space_point",example:"12 235.56"},D_={test:Ot(function(t){return/^(\+|-)?\d+(\.\d+)?((e|E)(\+|-)?\d+)?$/.test(t.trim())}),parse:Ot(function(t){return parseFloat(t)}),description:"No thousand separator, point decimal mark",thousand_separator:"",decimal_mark:".",id:"number$none_point",example:"12235.56"},P_={test:Ot(function(t){return/^(\+|-)?\d{1,3}(\.\d{3})*(,\d+)?((e|E)(\+|-)?\d+)?$/.test(t.trim())}),parse:Ot(function(t){return parseFloat(t.replace(/\./g,"").replace(/,/,"."))}),description:"Point thousand separator, comma decimal mark",thousand_separator:".",decimal_mark:",",id:"number$point_comma",example:"12.235,56"},R_={test:Ot(function(t){return/^(\+|-)?\d{1,3}(\s\d{3})*(,\d+)?((e|E)(\+|-)?\d+)?$/.test(t.trim())}),parse:Ot(function(t){return parseFloat(t.replace(/\s/g,"").replace(/,/,"."))}),description:"Space thousand separator, comma decimal mark",thousand_separator:" ",decimal_mark:",",id:"number$space_comma",example:"12 235,56"},O_={test:Ot(function(t){return/^(\+|-)?\d+(,\d+)?((e|E)(\+|-)?\d+)?$/.test(t.trim())}),parse:Ot(function(t){return parseFloat(t.replace(/,/,"."))}),description:"No thousand separator, comma decimal mark",thousand_separator:"",decimal_mark:",",id:"number$none_comma",example:"12235,56"},oi=Object.freeze([C_,I_,P_,R_,D_,O_]);oi.forEach(function(t){t.type="number",t.format=F_(t),Object.freeze(t)});var ai=Object.freeze({test:function(t){return typeof t=="string"?!0:So(t)},parse:function(t){return typeof t=="string"?t:So(t)},format:function(t){if(typeof t=="string")return t},type:"string",description:"Arbitrary string",id:"string$arbitrary_string"}),L_=Object.freeze({datetime:Ao,number:oi}),H_=Object.freeze(["datetime","number","string"]),Pl=Object.freeze({n_max:250,n_failing_values:0,failure_fraction:5/100,sort:!0}),Rl=Object.freeze(Object.keys(Pl));function U_(t){return t.replace(/_(\w)/g,function(e,n){return n.toUpperCase()})}function Ol(t,e){return t.index-e.index}function B_(t,e){return e.n_success-t.n_success||Ol(t,e)}function No(t){return(""+t).trim()}function Ll(t){return t===void 0?function(e){return No(e)}:typeof t=="function"?function(e,n){return No(t(e,n))}:function(e){return No(e[""+t])}}function Nn(t){t?Array.isArray(t)||(t=[t]):t=H_;var e=t.reduce(function(o,a){var s=L_[a];return s&&Array.prototype.push.apply(o,s),o},[]),n=t.indexOf("string")!==-1,r=Rl.reduce(function(o,a){return o[a]=Pl[a],o},{}),i=function(o,a){a=Ll(a);var s=o.map(a).filter(Boolean);if(!s.length)return n?[ai]:[];var l=Math.min(r.n_max,s.length),u=Math.floor(l*r.failure_fraction),c=r.n_failing_values,f=r.sort?B_:Ol,h=e.slice().reduce(function(p,_,g){for(var y=m=0,k=[],S=!1,m=0;m<l;m++){var C=s[m],v=_.test(C);if(!v&&(++y>u?S=!0:k.indexOf(C)===-1&&(k.push(C),k.length>c&&(S=!0)),S))break}return S||p.push({interp:_,n_success:l-y,index:g}),p},[]).sort(f).map(function(p){return p.interp});return n&&h.push(ai),h};return Rl.forEach(function(o){i[U_(o)]=function(a){return a===void 0?r[o]:(r[o]=a,i)}}),i}Nn.DATETIME_IDS=Object.freeze(Ao.map(function(t){return t.id})),Nn.NUMBER_IDS=Object.freeze(oi.map(function(t){return t.id})),Nn.STRING_IDS=Object.freeze([ai.id]),Nn.getInterpretation=function(){var t=Ao.concat(oi,ai),e=t.reduce(function(n,r){return n[r.id]=r,n},{});return function(n){return e[n]}}(),Nn._createAccessorFunction=Ll;function Hl(t){const e=Nn.getInterpretation(t);if(!e)throw new Error(`format_id ${t} not recognised`);return function(...n){return e.format(...n)}}function ot(t,e,n){var r=this;this._state=t,this._popup_default_template=null,this._panel_default_template=null,this._title_key="name",this._subtitle_key=null,this._first_load=!0,this._on_panel_close=null,this._show_default_content_timer=null,this._panel_container=e||document.body,this._popup_container=n||document.body,this._popup_directions=["top","bottom","left","right"],this._column_names=[],this._column_names_hidden=[],this._formatters=null,this._getLockedPosition=function(){return null};for(var i in Ml)t[i]==null&&(t[i]=Ml[i]);this.panel=k_().container(this._panel_container).on("close",function(){r._state.locked_id=null,r.popup.hide(),typeof r._on_panel_close=="function"&&r._on_panel_close()}),this.popup=Is().container(this._popup_container).point(0,0).draw().hide()}ot.prototype.getLockedPosition=function(t){return typeof t!="function"?console.error("Invalid function passed to @flourish/info-popup getLockedPosition"):this._getLockedPosition=t,this},ot.prototype.update=function(t){if(this._state.locked_id!==null&&this._state.mode!="none"){var e=this._getLockedPosition(this._state.locked_id);e?this.click(e[0],e[1],this._state.locked_id,t):console.warn("@flourish/info-popup: failed to return value from getLockedPosition function")}else this.clickout()};function Ul(t){t.popup._getElement().querySelector(".flourish-popup-content").style.pointerEvents="none"}function Bl(t){t.popup._getElement().querySelector(".flourish-popup-content").style.pointerEvents="auto"}ot.prototype.click=function(t,e,n,r){if(this._state.mode!="none"){var i=this._state.mode=="popup"?"popup":"panel";if(this._checkIfPopupIsEmpty(e,i)){i==="panel"?this.hidePanel():this.hidePopup();return}this._point(t),n!=null?(this._state.locked_id=n,Bl(this)):this._state.locked_id=null,i=="panel"?(clearTimeout(this._show_default_content_timer),this.popup.hide(),this._drawPanel(e,r)):i=="popup"&&(this.panel.hide(),this._drawPopup(e,r))}},ot.prototype.clickout=function(){this._state.locked_id=null,(this._state.mode=="both"||this._state.mode=="panel")&&(this.popup.draw(),this.popup.hide(),this._state.panel_position=="overlay"||!this._state.panel_side_fixed?this.panel.hide():this._showDefaultPanelContent()),this._state.mode=="popup"&&(this.panel.hide(),this.popup.draw(),this.popup.hide()),this._state.mode=="none"&&(this.panel.hide(),this.popup.draw(),this.popup.hide())},ot.prototype.touch=function(t,e,n,r){this.mouseover(t,e,r,!0,n)},ot.prototype.mouseover=function(t,e,n,r,i){var o=this._state.mode=="panel"?"panel":"popup";if(this._checkIfPopupIsEmpty(e,o,this._state.mode=="both")){o==="panel"?this.hidePanel():this.hidePopup();return}var a=this;if(this._state.mode=="both"&&(this._point(t),this._drawPopup(e,n,!0),r?Bl(this):Ul(this),r)){var s=a.popup._getElement().querySelector(".flourish-popup-content");s.onclick=function(){a.click(t,e,i,n)}}if(this._state.mode=="popup"){if(this._state.locked_id!==null)return;Ul(this),this._point(t),this._drawPopup(e,n)}if(this._state.mode=="panel"){if(this._state.locked_id!==null||this._state.panel_position=="overlay"||!this._state.panel_side_fixed)return;clearTimeout(this._show_default_content_timer),this._point(t),this._drawPanel(e,n)}},ot.prototype.mouseout=function(){if(this._state.mode=="both"&&this.popup.hide(),this._state.mode=="popup"){if(this._state.locked_id!==null)return;this.popup.hide()}if(this._state.mode=="panel"){if(this._state.locked_id!==null||this._state.panel_position=="overlay"||!this._state.panel_side_fixed)return;this._showDefaultPanelContent()}},ot.prototype.locked=function(){return this._state.locked_id},ot.prototype.mode=function(){return this._state.mode},ot.prototype.setColumnNames=function(t){return this._column_names=t,this},ot.prototype.hideColumnNames=function(t){return this._column_names_hidden=t,this},ot.prototype.setFormatters=function(t){var e={};for(var n in t)if(typeof t[n]=="function")e[n]=t[n];else if(Array.isArray(t[n])){for(var r=[],i=0;i<t[n].length;i++){var o;typeof t[n][i]=="function"?o=t[n][i]:o=Hl(t[n][i].output_format_id),r.push(o)}e[n]=r}else e[n]=Hl(t[n].output_format_id);return this._formatters=e,this},ot.prototype._showDefaultPanelContent=function(){var t=this;clearTimeout(this._show_default_content_timer),this._show_default_content_timer=setTimeout(function(){t.panel.html(t._state.panel_side_default_content),t._drawPanel()},100),t._drawPanel()},ot.prototype._checkIfPopupIsEmpty=function(t,e,n){if(this._state.popup_is_custom){var r=e==="panel"?Il(this,t):Cl(this,t,n);return r.trim()===""}if(Fo(t[this._title_key]))return!1;for(var i=Object.keys(this._column_names),o=0;o<i.length;o++){var a=i[o];if(!this._column_names_hidden.includes(a)){var s=t[a];if(Array.isArray(s)){for(let l=0;l<s.length;l++)if(Fo(s[l]))return!1;continue}if(Fo(s))return!1}}return!0};function Fo(t){return t||t===0}ot.prototype.getAccessiblePopupContent=function(t){return S_(this,t)},ot.prototype.onPanelClose=function(t){return this._on_panel_close=t,this},ot.prototype._drawPopup=function(t,e,n){return t&&this.popup.html(Cl(this,t,n)),Dl(this),this.popup.draw(),e&&e(this.popup._getElement(),t),this},ot.prototype._drawPanel=function(t,e){var n=this;return Dl(n),this.panel.open_duration(this._state.panel_open_duration).close_duration(this._state.panel_close_duration).width_overlay(this._state.panel_width_overlay).height_overlay(this._state.panel_height_overlay).vertical_position(this._state.panel_vertical_position).width_side(this._state.panel_width_side).height_side(this._state.panel_height_side).position(this._state.panel_position).max_width(this._state.panel_max_width).max_height(this._state.panel_max_height).closeable(this._state.panel_position=="overlay"||!this._state.panel_side_fixed),t===void 0?this.panel.draw():this.panel.html(Il(n,t)).draw(),e&&e(this.panel._getElement(),t),this},ot.prototype.hidePanel=function(){return this.panel.hide(),this},ot.prototype.hidePopup=function(){return this.popup.hide(),this},ot.prototype.popupDirections=function(t){return t?(this._popup_directions=t,this):this._popup_directions.slice()},ot.prototype.margins=function(){return this.panel.margins()},ot.prototype._getBiggestGap=function(t){var e=this._popup_container.getBoundingClientRect(),n,r=0,i,o={right:(e.width+e.left-(t.width+t.left))/e.width,bottom:(e.height+e.top-(t.height+t.top))/e.height,left:(t.left-e.left)/e.width,top:(t.top-e.top)/e.height},a={right:["left","leftFlexible","topLeft","bottomLeft","bottomFlexible","bottom","topFlexible","top","bottomRight","topRight","rightFlexible","right"],left:["right","rightFlexible","topRight","bottomRight","top","topFlexible","bottom","bottomFlexible","bottomLeft","topLeft","leftFlexible","left"],top:["bottom","bottomFlexible","bottomRight","bottomLeft","rightFlexible","leftFlexible","right","left","topRight","topLeft","topFlexible","top"],bottom:["top","topFlexible","topLeft","topRight","left","right","leftFlexible","rightFlexible","bottomLeft","bottomRight","bottomFlexible","bottom"]};for(var s in o)this._popup_directions.indexOf(s)<0||o[s]>r&&(r=o[s],n=s,i=a[s]);var l=t.left,u=t.top;return n=="left"||n=="right"?u+=t.height*.5:n=="bottom"&&(u+=t.height),n=="top"||n=="bottom"?l+=t.width*.5:n=="right"&&(l+=t.width),{side:n,arrow_directions:i,x:l,y:u}},ot.prototype._point=function(t){var e,n,r=this._popup_directions;if(Array.isArray(t))e=t[0],n=t[1];else if(t&&t.getBoundingClientRect){var i=t.getBoundingClientRect(),o=this._getBiggestGap(i);e=o.x,n=o.y,r=o.arrow_directions}else return console.warn("@flourish/info-popup: Invalid positional value passed in point function, should be a coordinates array, or a node. Current value is",t),this;return this.panel.point(t),this.popup.directions(r).point(e,n),this},ot.prototype.popupDefaultTemplate=function(t){return t!=null?(this._popup_default_template=t,this):this._popup_default_template},ot.prototype.panelDefaultTemplate=function(t){return t!=null?(this._panel_default_template=t,this):this._panel_default_template},ot.prototype.titleKey=function(t){return t!=null?(this._title_key=t,this):this._title_key},ot.prototype.subtitleKey=function(t){return t!=null?(this._subtitle_key=t,this):this._subtitle_key};function Y_(t,e,n){return new ot(t,e,n)}const z_=t=>{let e=new Map;return t.tooltip_units.split(`
`).map(r=>r.split(" :: ")).forEach(r=>e.set(r[0],r[1])),e},Yl=(t,e)=>{var n,r;return((n=e==null?void 0:e[t])==null?void 0:n.filtered)||((r=e==null?void 0:e[t])==null?void 0:r.original)||0},Co=(t,e)=>e?t/e:0,W_=(t,e,n,r)=>{var c;const{side:i,value:o}=t;if(!n[i])return null;const a=Yl(i,n);if(!a)return null;const s=(c=e==null?void 0:e[i])==null?void 0:c[o];if(!s)return null;const{name:l,value:u}=s;return{name:l,total:u,percentage:Co(u,a),units:r.get(i)}},zl=(t,e={})=>{var s,l;const n=z_(t),{name:r,value:i,side:o,id:a}=e;if(r||i||o||a){const u=Yl(o,Ue);return{name:r,total:i,percentage:Co(i,u),units:n.get((s=Ue[o])==null?void 0:s.sideName)}}if(Array.isArray(Pt.selected)&&H.value===""&&Pt.selected.length>0){const u=Object.entries(Ue).findIndex(([,h])=>h.selected===!0),f=Ue[u!==-1?u:0]||{};return{name:(l=Pt.selected[0])==null?void 0:l.name,total:f.filtered||0,percentage:Co(f.filtered,f.original),units:n.get(t.search_side_name)}}return H&&H.value!==""?W_(H,nt,Ue,n):null},Wl=(t,e)=>{if(!Array.isArray(e)||e.length===0)return 0;const n=e.find(r=>r.sideName===t);return n?n.maxTotal||0:Math.max(...e.map(r=>r.maxTotal||0))},q_=(t,e)=>{t[e]||(t[e]={})},V_=(t,e,n,r,i)=>{t[e].sideName=n!=null?n:"Unknown",t[e].original=r,t[e].selected=i},G_=(t,e,n)=>{const r=Math.max(Object.entries(e).findIndex(([o,a])=>a.sideName===t),0);if(!n)return[r];const i=Object.entries(e).findIndex(([o,a])=>a.sideName!==t);return[r,i!==-1?i:0]},j_=(t,e,n,r,i)=>{let o=t.search_side_name;t.search_side;let a=t.flow_direction==="both";G_(o,e,a).forEach((l,u)=>{var p,_;q_(i,l);const c=u===0,f=(_=(p=n==null?void 0:n[l])==null?void 0:p.sideName)!=null?_:"Unknown",h=Wl(f,e);V_(i,l,f,h,c),r&&(i[l].filtered=Wl(f,n))})};var X_=ft('<div class="popup svelte-1tn5emg"></div> <div class="panel svelte-1tn5emg"></div>',1);function K_(t,e){$t(e,!0);let n=lt(void 0),r=lt(void 0),i=lt(void 0),o=z(()=>nt[d(i)][d(r)].position),a=lt(void 0);const s=(_,g,y)=>{N(r,q(y)),N(i,q(g));const{name:k,value:S,position:m,dimensions:C}=nt[g][y],v=zl(e.FlourishState,{name:k,value:S,side:g,id:y});v.percentage=eo(v.percentage),v.total=Be.formattingFunction(v.total);const b=d(a)>e.FlourishState.mobile_breakpoint?_:[d(o).x,d(o).y];d(n).mouseover(b,v),document.querySelectorAll(".flourish_popup").forEach(D=>{D.style.zIndex="100"})},l=_=>{d(n).mouseout()};Ut(()=>{d(c)&&d(u)&&N(n,q(Y_(e.FlourishState.popup,d(u),d(c))))}),Ut(()=>{d(n).setColumnNames({name:"name",percentage:"percentage",total:"total",units:"units"})});let u=lt(void 0),c=lt(void 0);var f=X_(),h=Jt(f);ke(h,_=>N(u,_),()=>d(u));var p=it(h,2);return ke(p,_=>N(c,_),()=>d(c)),Di(h,"clientWidth",_=>N(a,_)),X(t,f),te({flTooltipMouseover:s,flTooltipMouseout:l})}var Z_=(t,e,n)=>{e(n(),t)},Q_=ft('<span class="value svelte-1exlong"> </span>'),J_=ft("<br>"),$_=ft('<div class="expand svelte-1exlong"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="svelte-1exlong"><path d="M6.49902 5L9.49902 8L6.49902 11" stroke="black" stroke-width="1.5" stroke-linecap="round" class="svelte-1exlong"></path></svg></div>'),tg=ft('<div class="block svelte-1exlong"><p class="svelte-1exlong"><!> <!> </p> <!></div>'),eg=ft('<div class="block difference svelte-1exlong"><p class="svelte-1exlong"><span class="value svelte-1exlong"> </span> Deficit</p></div>'),ng=ft('<div class="group svelte-1exlong"><!> <!></div>'),rg=ft('<div tabindex="-1"><div class="spacer svelte-1exlong"></div> <!></div>'),ig=ft("<div></div>");function og(t,e){$t(e,!0);const n=Pi(e,"flowDirection",3,"right"),r=30,i=16,o=38,a=22,s=16,l=1,c=s+10*2,f=q([]),h=q({});let p=lt(!1);const _=(E,M)=>new Promise(F=>setTimeout(()=>{let U=nt[e.sankeyIndex][E];F(U)},M)),g=E=>nt[e.sankeyIndex][E].column,y=(E,M)=>{if(M[E]){const F=M[E].children;let U=null,Y=1/0;if(F.forEach(Q=>{const{position:ht}=M[Q];ht&&ht.y<Y&&(Y=ht.y,U=Q)}),U){const Q=g(U),ht=nt[e.sankeyIndex][U].element||null,Vt=nt[e.sankeyIndex][U].isItNull||!1;ht&&!Vt&&_(U,200).then(wt=>{const{position:It,dimensions:vt}=wt;if(It&&vt){const{y:Lt}=It,{height:Ve}=vt;Lt>=0&&Lt+Ve<=(window.innerHeight||document.documentElement.clientHeight)||f[Q].scrollTo({top:Lt,behavior:"smooth"})}})}}},k=E=>{d(p)||(H.value="");const M=E==null?void 0:E.srcElement,{level:F}=M.dataset,{scrollTop:U}=M,Y=M.getBoundingClientRect();h[F]={scrollTop:U,rect:Y}};let S=lt(void 0);const m=E=>{N(S,q(setTimeout(()=>{v(E),N(p,!0)},300))),N(p,!1)},C=()=>{clearTimeout(d(S))},v=E=>{var U,Y;const M=E.target,F=(U=M==null?void 0:M.dataset)==null?void 0:U.parentKey;if(F){const Q=nt[e.sankeyIndex][F].element,ht=Q.getBoundingClientRect();ht.top>=0&&ht.bottom<=(window.innerHeight||document.documentElement.clientHeight)||Q.scrollIntoView({block:"center",behavior:"smooth"})}y((Y=M==null?void 0:M.dataset)==null?void 0:Y.key,nt[e.sankeyIndex])},b=(E,M,F)=>{nt[e.sankeyIndex]||(nt[e.sankeyIndex]={});const{x:U,y:Y,width:Q,height:ht}=E.getBoundingClientRect();nt[e.sankeyIndex][M]=Xe(At({element:E},F),{dimensions:{width:Q,height:ht},position:{x:U,y:Y},ancestors:F.ancestors.reverse(),hidden:!1,narrow:!1});const{key:Vt,searchable_elements:wt=null}=F;wt&&wt.forEach(It=>{const vt=It.parent?`${It.name}|${It.parent}`:It.name;Qn.has(vt)||Qn.set(vt,[]),Qn.get(vt).push(Xe(At({},It),{key:Vt,side:e.sideName}))})};function D(E){return Object.keys(E).reduce((M,F)=>typeof E[F]=="object"&&E[F]!==null?M+1+D(E[F]):M,0)}const L=()=>{if(nt&&nt[e.sankeyIndex]&&J)return D(J),e.heightScale,e.FlourishState.align_chart,Object.values(nt[e.sankeyIndex]).forEach(E=>{var Vt,wt;const{key:M,element:F,column:U}=E,{top:Y,left:Q}=F.getBoundingClientRect(),ht=((wt=(Vt=h==null?void 0:h[U])==null?void 0:Vt.rect)==null?void 0:wt.top)||0;nt[e.sankeyIndex][M].position={y:Y-ht,x:Q},nt[e.sankeyIndex][M].dimensions={width:F.offsetWidth,height:F.offsetHeight}})};Ut(()=>{L(e.parentWidth,h,e.parentHeight,J,e.heightScale,e.FlourishState.align_chart),kr(()=>nt)});const B=(E,M)=>{if(H.value=E,H.side=e.sankeyIndex,H.sideName=e.sideName,e.FlourishState.flourish_tooltip){const F=M.currentTarget;e.flourishTooltip.flTooltipMouseover(F,e.sankeyIndex,E)}clearTimeout(A)},V=()=>{clearTimeout(A),A=setTimeout(()=>{H.value="",H.side="",H.sideName="",e.FlourishState.flourish_tooltip&&e.flourishTooltip.flTooltipMouseout()},250)},w=E=>{var M,F;return H&&H.value!==""?((M=nt[e.sankeyIndex][H.value])==null?void 0:M.ancestors.includes(E))||((F=nt[e.sankeyIndex][H.value])==null?void 0:F.descendants.includes(E))||H.value===E:!1},R=(E,M,F)=>{fd(E,e.FlourishState,e.sankeyIndex,e.revertColumnState),setTimeout(()=>{B(M,F)},100)};let A;var T=ig();oe(T,23,()=>e.data,(E,M)=>`${e.data.length}-${M}`,(E,M,F)=>{var U=rg();const Y=z(()=>J[e.sankeyIndex]&&J[e.sankeyIndex][d(F)]?J[e.sankeyIndex][d(F)]:"default"),Q=z(()=>d(Y)==="narrow"),ht=z(()=>d(Q)?`${c}px`:"auto"),Vt=z(()=>e.FlourishState.row_gap_group);var wt=Z(U),It=it(wt,2);oe(It,17,()=>d(M),Ee,(vt,Lt,Ve)=>{let Qt=()=>d(Lt).parent,I=()=>d(Lt).blocks,G=()=>d(Lt).parent_id;var K=ng(),x=Z(K);oe(x,19,I,({name:bt,value:mt,parent:Ge,id:xe,searchable_elements:je=[],child_ids:De,ancestors:pu,descendants:_u,visible_child_ids:gu})=>xe,(bt,mt,Ge)=>{let xe=()=>d(mt).name,je=()=>d(mt).value,De=()=>d(mt).id,pu=tc(()=>Pu(d(mt).searchable_elements,()=>[],!0)),_u=()=>d(mt).child_ids,gu=()=>d(mt).ancestors,Wv=()=>d(mt).descendants,qv=()=>d(mt).visible_child_ids;var Tt=tg();const vu=z(()=>({parentKey:G(),key:De(),column:d(F),indexInColumn:d(Ge),negative:+je()<0,isItNull:xe()==="null",value:+je(),children:_u(),name:xe(),ancestors:gu(),descendants:Wv(),searchable_elements:d(pu)})),cn=z(()=>e.heightScale(Math.abs(je()))),Vv=z(()=>d(cn)>a),mu=z(()=>Math.floor(d(cn)/(s*l))),yu=z(()=>d(cn)<i);Tt.__mouseover=[Z_,B,De],Tt.__mouseout=V,Tt.__click=St=>R(d(F),De(),St);const Gv=z(()=>w(De())),jv=z(()=>Ve===0&&d(Ge)===0?d(F)*e.FlourishState.row_gap_standard+"px":xe()==="null"?-e.heightScale(Math.abs(je()))+"px":"");var fn=Z(Tt);const Xv=z(()=>d(yu)?`${Math.max(d(cn),i)}px`:"auto");ct(()=>dt(fn,"height",d(Xv)));var wu=Z(fn);{var Kv=St=>{var Dn=Q_(),tm=Z(Dn);ct(()=>Yt(tm,Be.formattingFunction(je()))),X(St,Dn)};yt(wu,St=>{(!d(Q)||d(F)===0)&&St(Kv)})}var xu=it(wu,2);{var Zv=St=>{var Dn=J_();X(St,Dn)};yt(xu,St=>{d(cn)>o&&!d(Q)&&St(Zv)})}var Qv=it(xu),Jv=it(fn,2);{var $v=St=>{var Dn=$_();X(St,Dn)};yt(Jv,St=>{(!d(Q)||d(F)===0)&&d(Vv)&&d(F)!==e.data.length-1&&J[e.sankeyIndex][d(F)+1]==="hidden"&&qv().length&&St($v)})}ke(Tt,St=>{b(St,De(),d(vu))},()=>{}),ct(()=>{var St;_t(Tt,"data-parent-key",G()),_t(Tt,"data-key",De()),zt(Tt,"active",d(Gv)),zt(Tt,"negative",d(vu).negative),zt(Tt,"short",d(yu)),dt(Tt,"height",`${d(cn)}px`),dt(Tt,"pointer-events",xe()==="null"?"none":""),dt(Tt,"margin-top",d(jv)),dt(Tt,"opacity",xe()==="null"?0:""),dt(fn,"line-clamp",d(mu)),dt(fn,"-webkit-line-clamp",d(mu)),dt(fn,"max-height",d(Q)?`${d(cn)-6}px`:"inherit"),dt(fn,"margin-bottom",d(Q)?"3px":"inherit"),Yt(Qv,` ${(St=xe())!=null?St:""}`)}),Yn("pointerenter",Tt,m),Yn("pointerleave",Tt,C),X(bt,Tt)});var rt=it(x,2);{var kt=bt=>{var mt=eg();const Ge=z(()=>`${e.heightScale(Math.abs(e.maxDifference))}px`);ct(()=>dt(mt,"height",d(Ge)));var xe=Z(mt),je=Z(xe),De=Z(je);ct(()=>Yt(De,Be.formattingFunction(e.maxDifference))),X(bt,mt)};yt(rt,bt=>{d(F)===0&&e.sankeyIndex===1&&e.FlourishState.show_difference&&bt(kt)})}ct(()=>{_t(K,"data-parent",Qt()),dt(K,"row-gap",d(F)===0?"0px":`${e.FlourishState.row_gap_standard}px`)}),X(vt,K)}),ke(U,(vt,Lt)=>f[Lt]=vt,vt=>f==null?void 0:f[vt],()=>[d(F)]),ct(()=>{var vt;Ni(U,`${(vt=`column ${d(Y)}`)!=null?vt:""} svelte-1exlong`),_t(U,"data-level",d(F)),zt(U,"scrollable",e.FlourishState.align_chart==="top"),dt(U,"row-gap",`${d(Vt)}px`),dt(U,"width",d(ht)),dt(U,"flex",d(Q)?"0 0 auto":"1"),dt(wt,"margin-bottom",`-${d(Vt)}px`),dt(wt,"height",`${e.SPACE_FOR_TOOLTIP}px`),dt(wt,"min-height",`${e.SPACE_FOR_TOOLTIP}px`),dt(wt,"max-height",`${e.SPACE_FOR_TOOLTIP}px`),dt(wt,"order",e.FlourishState.tooltip_static_y==="bottom"?d(M).length:0)}),Yn("scroll",U,k),X(E,U)}),ct(()=>{var E;Ni(T,`${(E=`columns ${n()}`)!=null?E:""} svelte-1exlong`),dt(T,"column-gap",`${r}px`),dt(T,"flex-direction",n()==="left"?"row-reverse":"row"),dt(T,"align-items",e.FlourishState.align_chart)}),X(t,T),te()}Tr(["mouseover","mouseout","click"]);const ag=t=>{try{const e=Li(t,r=>r.nodes?r.nodes.length:0)||0,n=Array.from({length:e}).map((r,i)=>o=>o.nodes&&o.nodes[i]!==void 0?o.nodes[i]:null);return Gc(t,r=>Hi(r,i=>i.values),...n)}catch(e){return console.error("Error in groupData:",e),new Map}};let sg=0;const ql=(t,e=null,n,r=[],i,o=[],a)=>Array.from(t,([s,l])=>{const u=sg++,c=[...r,s],f=l instanceof Map?ql(l,u,n,c,i,[...o,e],a):[],h=a.sort_blocks;f&&h&&f.sort((S,m)=>m.value-S.value);const p=f.map(S=>S.id),_=f.filter(S=>S.name!=="null"&&S.name!=="").map(S=>S.id),g=f.reduce((S,m)=>(S.push(m.id,...m.descendants),S),[]);let y,k=0;if(f.length===0){const S=n.filter(m=>m.nodes.join("/")===c.join("/"));y=S.flatMap(m=>{const C=[];let v=null;return m.search_nodes.forEach((b,D)=>{b!==v&&(C.push({type:i[D],name:b,value:m.values,parent:C.length>0?C[C.length-1].name:null}),v=b)}),C}).reduce((m,C)=>{const v=`${C.type}:${C.name}:${C.parent}`;return m[v]||(m[v]={type:C.type,name:C.name,value:0,parent:C.parent}),m[v].value+=C.value,m},{}),y=Object.values(y),k=S.reduce((m,C)=>m+C.values,0)}else k=f.reduce((S,m)=>S+(m.value||0),0);return{id:u,name:s===""?"null":s,value:k,children:f,child_ids:p,visible_child_ids:_,descendants:g,parent_id:e,ancestors:[...o,e].filter(S=>S!==null),searchable_elements:y}}),Vl=t=>(t.children&&t.children.length&&(t.value=Hi(t.children,Vl)),t.value||0),Gl=(t,e=0,n=[])=>(n[e]||(n[e]=[]),t.forEach(r=>{n[e].push({id:r.id,name:r.name,value:r.value,parent_id:r.parent_id,child_ids:r.child_ids,visible_child_ids:r.visible_child_ids,ancestors:r.ancestors,descendants:r.descendants,searchable_elements:r.searchable_elements||void 0}),r.children&&Gl(r.children,e+1,n)}),n.filter(r=>r.length>0)),lg=t=>t.map(e=>Array.from(Vc(e,n=>n.parent_id),([n,r])=>({parent:r.length>0&&n!==null?r[0].name:null,parent_id:n,blocks:r}))),jl=(t,e,n)=>{const r=ag(t),i=ql(r,null,t,[],e.search_nodes,[],n);i.forEach(Vl);const o=Gl(i),a=lg(o),s=o.reduce((u,c)=>{const f=c.reduce((h,p)=>{const _=Math.abs(p.value);return Math.max(h,_)},-1/0);return Math.max(u,f)},-1/0),l=Hi(o[1],u=>Math.abs(u.value));return{groupedBlocks:a,maxTotal:s,noNegativeTotal:l}},Xl=(t,e,n)=>{if(t[0]&&t[0].split_nodes&&t[0].split_nodes.length>0||!1){const i=Array.from(new Set(t.flatMap(s=>s.split_nodes)));return i.map(s=>t.filter(l=>l.split_nodes.includes(s))).map((s,l)=>{const u=jl(s,e,n);return Xe(At({},u),{sideName:i[l],itemIndex:l})})}else{const i=jl(t,e,n);return[Xe(At({},i),{sideName:null,itemIndex:0})]}},ug=(t,e,n)=>{try{if(!t)throw new Error("processedData is undefined or null.");const r=Array.isArray(t)?t:[t];if(!Array.isArray(r))throw new Error("allGroupedBlocks is not an array.");const i=r.flatMap((o,a)=>{if(!o||!Array.isArray(o.groupedBlocks)||o.groupedBlocks.length===0)throw new Error(`Invalid groupedBlocks at index ${a}: ${JSON.stringify(o)}`);return o.groupedBlocks.map((s,l)=>{if(!Array.isArray(s))throw new Error(`Column at index ${l} is not an array: ${JSON.stringify(s)}`);const u=s.reduce((c,f)=>{if(!f||!Array.isArray(f.blocks))throw new Error(`Invalid group.blocks in column at index ${l}: ${JSON.stringify(f)}`);const h=f.blocks.filter(p=>p.name!=="null");return c+h.length},0);if(e.fit_to_one_screen||n<0){const f=(s.length-1)*e.row_gap_group+(u-1)*e.row_gap_standard;return Math.max(0,f)}else if(l===1){const h=(s.filter(p=>{const _=p.blocks;if(_.length&&_.filter(y=>y.name!=="null").length)return!0}).length-1)*e.row_gap_group+(u-1)*e.row_gap_standard;return Math.max(0,h)}else return 0})});if(!Array.isArray(i))throw new Error(`rowGapsAcrossAll is not an array: ${JSON.stringify(i)}`);return Math.max(...i.flat())}catch(r){return console.error("Error in maxRowGaps calculation:",r),0}},cg=t=>Array.isArray(t)?Li(t.map(e=>e.maxTotal)):t&&typeof t=="object"?Li([t.maxTotal,t.noNegativeTotal].filter(e=>e!=null)):(console.error("processedData is invalid:",t),null),fg=(t,e)=>e.show_difference&&Array.isArray(t)&&t.length>1?Math.abs(t[0].maxTotal-t[1].maxTotal):null,hg=(t,e,n,r)=>{const i=cg(t),o=ug(t,e,i),{MINIMUM_BLOCK_HEIGHT:a,SPACE_FOR_TOOLTIP:s,HEIGHT_PADDING:l,LAST_COLUMN_MARGIN_TOP:u}=n;return Qa().range([0,Math.max(a,r-s-o-l-u)]).domain([0,Math.abs(i)])};var dg=pe('<path class="svelte-1cyrr5f"></path>'),pg=pe("<g></g>"),_g=pe('<path class="hovered svelte-1cyrr5f"></path>'),gg=pe('<path class="hovered svelte-1cyrr5f"></path>'),vg=pe("<!><!>",1),mg=pe("<!><!>",1);function Kl(t,e){$t(e,!0);const n=z(()=>xs(e.sides,e.parentWidth,e.parentHeight,e.FlourishState)),r=z(Ss);var i=mg(),o=Jt(i);oe(o,17,()=>Object.entries(d(n)),Ee,(l,u,c)=>{let f=()=>d(u)[1];var h=pg();zt(h,"left",c===1),oe(h,21,f,Ee,(p,_)=>{let g=()=>d(_).route,y=()=>d(_).childKey,k=()=>d(_).parentKey,S=()=>d(_).childNegative;var m=dg();const C=z(()=>d(r)&&d(r).length?d(r).includes(y())&&d(r).includes(k()):!1);ct(()=>{_t(m,"d",g()),zt(m,"negative",S()),zt(m,"active",d(C))}),X(p,m)}),X(l,h)});var a=it(o);{var s=l=>{var u=vg();const c=z(()=>Ts(H.side)),f=z(()=>Jn(H.side,e.FlourishState)),h=z(()=>{const{flowPaths:g,rectPaths:y}=ks(d(c),d(f),H.side);return{flowPaths:g,rectPaths:y}});var p=Jt(u);oe(p,17,()=>d(h).flowPaths,Ee,(g,y)=>{var k=_g();ct(()=>{_t(k,"d",d(y)),zt(k,"negative",nt[H.side][H.value].negative)}),X(g,k)});var _=it(p);oe(_,17,()=>d(h).rectPaths,Ee,(g,y)=>{var k=gg();ct(()=>{_t(k,"d",d(y)),zt(k,"negative",nt[H.side][H.value].negative)}),X(g,k)}),X(l,u)};yt(a,l=>{H&&H.value!==""&&H.side!==""&&l(s)})}X(t,i),te()}var yg=pe('<g><rect x="0" y="0" class="svelte-sycg7c"></rect><text alignment-baseline="middle" class="svelte-sycg7c"><tspan class="svelte-sycg7c"> </tspan> </text></g>'),wg=pe("<g></g>");function xg(t,e){$t(e,!0);var n=wg();oe(n,21,()=>Object.values(e.data),Ee,(r,i)=>{let o=()=>d(i).name,a=()=>d(i).dimensions,s=()=>d(i).position,l=()=>d(i).value,u=()=>d(i).isItNull;var c=Ar(),f=Jt(c);{var h=p=>{var _=yg(),g=Z(_),y=it(g);_t(y,"x",0);var k=Z(y),S=Z(k);ct(()=>Yt(S,Be.formattingFunction(l())));var m=it(k);ct(()=>{var C;dt(_,"transform",`translate(${s().x}px, ${s().y}px)`),_t(g,"width",a().width),_t(g,"height",a().height),_t(y,"y",a().height/2),Yt(m,` ${(C=o())!=null?C:""}`)}),X(p,_)};yt(f,p=>{u()||p(h)})}X(r,c)}),ct(()=>Dc(n,`blocks ${e.flowDirection}`)),X(t,n),te()}var bg=pe('<svg class="svelte-126qy1r"><!><!></svg>');function Mg(t,e){$t(e,!0);let n=lt(void 0);var r=Ar(),i=Jt(r);{var o=a=>{var s=bg(),l=Z(s);oe(l,17,()=>Object.values(nt),Ee,(c,f,h)=>{var p=z(()=>flowDirection(h,e.FlourishState));xg(c,{get data(){return d(f)},get flowDirection(){return d(p)}})});var u=it(l);Kl(u,{get sides(){return e.sides}}),ke(s,c=>N(n,c),()=>d(n)),X(a,s)};yt(i,a=>{nt&&a(o)})}X(t,r),te()}var Eg=pe('<svg class="svelte-t3ic35"><!></svg>'),kg=ft("<!> <!>",1),Sg=ft('<div class="chart svelte-t3ic35"><!></div> <!> <!>',1);function Tg(t,e){$t(e,!0);const n=z(()=>{var A,T;return(T=(A=e.data)==null?void 0:A.data)==null?void 0:T.column_names}),r=z(()=>Xl(e.data.data,d(n),e.FlourishState)),i=z(()=>Array.isArray(Pt.selected)&&Pt.selected.length>0),o=50,a=15,s=30,l=120,f=16+10*2,h=30;let p=lt(void 0),_=lt(void 0);const g=z(()=>e.FlourishState.show_search||e.FlourishState.tooltip_static?80:0),y=z(()=>hg(d(m),e.FlourishState,{MINIMUM_BLOCK_HEIGHT:o,SPACE_FOR_TOOLTIP:d(g),HEIGHT_PADDING:a,LAST_COLUMN_MARGIN_TOP:s},d(p))),k=z(()=>ld(e.FlourishState,d(_),f,h)),S=z(()=>{var T,E;if(!d(i))return null;const A=(E=(T=Pt.selected)==null?void 0:T[0])==null?void 0:E.name;return A?e.data.data.filter(M=>Array.isArray(M.search_nodes)&&M.search_nodes.includes(A)):e.data.data});let m=z(()=>{var T;let A;return A=d(i)?Xl((T=d(S))!=null?T:[],d(n),e.FlourishState):d(r),e.FlourishState.flow_direction==="both"&&e.FlourishState.search_side==="one"&&e.FlourishState.hide_nonsearched_side&&Array.isArray(Pt.selected)&&Pt.selected.length>0&&A.some(M=>M.sideName===e.FlourishState.search_side_name)?A.filter(M=>M.sideName===e.FlourishState.search_side_name):A});Ut(()=>cd(d(m))),Ut(()=>{As(d(k),l,h,e.FlourishState)});const C=()=>{let A=d(_)<e.FlourishState.mobile_breakpoint?e.FlourishState.mobile_aspect_ratio:e.FlourishState.desktop_aspect_ratio;const T=Math.min(e.FlourishState.max_height,Math.max(e.FlourishState.min_height,d(_)*A));Flourish.setHeight(T)};Ut(()=>C());const v=z(()=>d(m)&&Array.isArray(d(m))?d(m).map(A=>A.itemIndex):[0]),b=z(()=>fg(d(m),e.FlourishState));Ut(()=>{e.FlourishState.flow_direction==="both"&&d(r)&&(d(r).length===1||d(r).length>2)&&Flourish.warn({message:"Split Node Designation Required for a split sankey diagram",explanation:"In the Data Tab, you should designate a single column as 'Split Nodes.' Your data should be in a long format and there should be ONLY two options (e.g., spending and revenue)"})}),Ut(()=>{j_(e.FlourishState,d(r),d(m),d(S),Ue)});var D=Sg(),L=Jt(D),B=Z(L);Sc(B,()=>e.data.data,A=>{var T=kg(),E=Jt(T);oe(E,17,()=>d(m),Ee,(Y,Q)=>{var ht=z(()=>Jn(d(Q).itemIndex,e.FlourishState));og(Y,{get data(){return d(Q).groupedBlocks},get parentHeight(){return d(p)},get parentWidth(){return d(_)},get flowDirection(){return d(ht)},get heightScale(){return d(y)},get sankeyIndex(){return d(Q).itemIndex},get maxDifference(){return d(b)},get SPACE_FOR_TOOLTIP(){return d(g)},revertColumnState:()=>{As(d(k),l,h,e.FlourishState)},get FlourishState(){return e.FlourishState},get sideName(){return d(Q).sideName},get flourishTooltip(){return e.flourishTooltip}})});var M=it(E,2);{var F=Y=>{var Q=Eg(),ht=Z(Q);Kl(ht,{get heightScale(){return d(y)},get sides(){return d(v)},get parentWidth(){return d(_)},get parentHeight(){return d(p)},get FlourishState(){return e.FlourishState}}),X(Y,Q)},U=Y=>{sd(Y,{get heightScale(){return d(y)},get sides(){return d(v)},get parentWidth(){return d(_)},get parentHeight(){return d(p)},get FlourishState(){return e.FlourishState}})};yt(M,Y=>{e.FlourishState.flow_rendering==="svg"?Y(F):Y(U,!1)})}X(A,T)});var V=it(L,2);nd(V,{get data(){return d(m)},get userSelectedDataToDisplay(){return e.userSelectedDataToDisplay}});var w=it(V,2);{var R=A=>{Mg(A,{get heightScale(){return d(y)},get sides(){return d(v)},get FlourishState(){return e.FlourishState}})};yt(w,A=>{e.FlourishState.make_svg_downloadable&&A(R)})}Di(L,"clientHeight",A=>N(p,A)),Di(L,"clientWidth",A=>N(_,A)),X(t,D),te()}function Ce(t){return Array.isArray?Array.isArray(t):Jl(t)==="[object Array]"}const Ag=1/0;function Ng(t){if(typeof t=="string")return t;let e=t+"";return e=="0"&&1/t==-Ag?"-0":e}function Fg(t){return t==null?"":Ng(t)}function me(t){return typeof t=="string"}function Zl(t){return typeof t=="number"}function Cg(t){return t===!0||t===!1||Ig(t)&&Jl(t)=="[object Boolean]"}function Ql(t){return typeof t=="object"}function Ig(t){return Ql(t)&&t!==null}function Zt(t){return t!=null}function Io(t){return!t.trim().length}function Jl(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const gm="Extended search is not available",Dg="Incorrect 'index' type",Pg=t=>`Invalid value for key ${t}`,Rg=t=>`Pattern length exceeds max of ${t}.`,Og=t=>`Missing ${t} property in key`,Lg=t=>`Property 'weight' in key '${t}' must be a positive integer`,$l=Object.prototype.hasOwnProperty;class Hg{constructor(e){this._keys=[],this._keyMap={};let n=0;e.forEach(r=>{let i=tu(r);this._keys.push(i),this._keyMap[i.id]=i,n+=i.weight}),this._keys.forEach(r=>{r.weight/=n})}get(e){return this._keyMap[e]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function tu(t){let e=null,n=null,r=null,i=1,o=null;if(me(t)||Ce(t))r=t,e=eu(t),n=Do(t);else{if(!$l.call(t,"name"))throw new Error(Og("name"));const a=t.name;if(r=a,$l.call(t,"weight")&&(i=t.weight,i<=0))throw new Error(Lg(a));e=eu(a),n=Do(a),o=t.getFn}return{path:e,id:n,weight:i,src:r,getFn:o}}function eu(t){return Ce(t)?t:t.split(".")}function Do(t){return Ce(t)?t.join("."):t}function Ug(t,e){let n=[],r=!1;const i=(o,a,s)=>{if(Zt(o))if(!a[s])n.push(o);else{let l=a[s];const u=o[l];if(!Zt(u))return;if(s===a.length-1&&(me(u)||Zl(u)||Cg(u)))n.push(Fg(u));else if(Ce(u)){r=!0;for(let c=0,f=u.length;c<f;c+=1)i(u[c],a,s+1)}else a.length&&i(u,a,s+1)}};return i(t,me(e)?e.split("."):e,0),r?n:n[0]}const Bg={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},Yg={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(t,e)=>t.score===e.score?t.idx<e.idx?-1:1:t.score<e.score?-1:1},zg={location:0,threshold:.6,distance:100},Wg={useExtendedSearch:!1,getFn:Ug,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var W=At(At(At(At({},Yg),Bg),zg),Wg);const qg=/[^ ]+/g;function Vg(t=1,e=3){const n=new Map,r=Math.pow(10,e);return{get(i){const o=i.match(qg).length;if(n.has(o))return n.get(o);const a=1/Math.pow(o,.5*t),s=parseFloat(Math.round(a*r)/r);return n.set(o,s),s},clear(){n.clear()}}}class Po{constructor({getFn:e=W.getFn,fieldNormWeight:n=W.fieldNormWeight}={}){this.norm=Vg(n,3),this.getFn=e,this.isCreated=!1,this.setIndexRecords()}setSources(e=[]){this.docs=e}setIndexRecords(e=[]){this.records=e}setKeys(e=[]){this.keys=e,this._keysMap={},e.forEach((n,r)=>{this._keysMap[n.id]=r})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,me(this.docs[0])?this.docs.forEach((e,n)=>{this._addString(e,n)}):this.docs.forEach((e,n)=>{this._addObject(e,n)}),this.norm.clear())}add(e){const n=this.size();me(e)?this._addString(e,n):this._addObject(e,n)}removeAt(e){this.records.splice(e,1);for(let n=e,r=this.size();n<r;n+=1)this.records[n].i-=1}getValueForItemAtKeyId(e,n){return e[this._keysMap[n]]}size(){return this.records.length}_addString(e,n){if(!Zt(e)||Io(e))return;let r={v:e,i:n,n:this.norm.get(e)};this.records.push(r)}_addObject(e,n){let r={i:n,$:{}};this.keys.forEach((i,o)=>{let a=i.getFn?i.getFn(e):this.getFn(e,i.path);if(Zt(a)){if(Ce(a)){let s=[];const l=[{nestedArrIndex:-1,value:a}];for(;l.length;){const{nestedArrIndex:u,value:c}=l.pop();if(Zt(c))if(me(c)&&!Io(c)){let f={v:c,i:u,n:this.norm.get(c)};s.push(f)}else Ce(c)&&c.forEach((f,h)=>{l.push({nestedArrIndex:h,value:f})})}r.$[o]=s}else if(me(a)&&!Io(a)){let s={v:a,n:this.norm.get(a)};r.$[o]=s}}}),this.records.push(r)}toJSON(){return{keys:this.keys,records:this.records}}}function nu(t,e,{getFn:n=W.getFn,fieldNormWeight:r=W.fieldNormWeight}={}){const i=new Po({getFn:n,fieldNormWeight:r});return i.setKeys(t.map(tu)),i.setSources(e),i.create(),i}function Gg(t,{getFn:e=W.getFn,fieldNormWeight:n=W.fieldNormWeight}={}){const{keys:r,records:i}=t,o=new Po({getFn:e,fieldNormWeight:n});return o.setKeys(r),o.setIndexRecords(i),o}function si(t,{errors:e=0,currentLocation:n=0,expectedLocation:r=0,distance:i=W.distance,ignoreLocation:o=W.ignoreLocation}={}){const a=e/t.length;if(o)return a;const s=Math.abs(r-n);return i?a+s/i:s?1:a}function jg(t=[],e=W.minMatchCharLength){let n=[],r=-1,i=-1,o=0;for(let a=t.length;o<a;o+=1){let s=t[o];s&&r===-1?r=o:!s&&r!==-1&&(i=o-1,i-r+1>=e&&n.push([r,i]),r=-1)}return t[o-1]&&o-r>=e&&n.push([r,o-1]),n}const un=32;function Xg(t,e,n,{location:r=W.location,distance:i=W.distance,threshold:o=W.threshold,findAllMatches:a=W.findAllMatches,minMatchCharLength:s=W.minMatchCharLength,includeMatches:l=W.includeMatches,ignoreLocation:u=W.ignoreLocation}={}){if(e.length>un)throw new Error(Rg(un));const c=e.length,f=t.length,h=Math.max(0,Math.min(r,f));let p=o,_=h;const g=s>1||l,y=g?Array(f):[];let k;for(;(k=t.indexOf(e,_))>-1;){let D=si(e,{currentLocation:k,expectedLocation:h,distance:i,ignoreLocation:u});if(p=Math.min(D,p),_=k+c,g){let L=0;for(;L<c;)y[k+L]=1,L+=1}}_=-1;let S=[],m=1,C=c+f;const v=1<<c-1;for(let D=0;D<c;D+=1){let L=0,B=C;for(;L<B;)si(e,{errors:D,currentLocation:h+B,expectedLocation:h,distance:i,ignoreLocation:u})<=p?L=B:C=B,B=Math.floor((C-L)/2+L);C=B;let V=Math.max(1,h-B+1),w=a?f:Math.min(h+B,f)+c,R=Array(w+2);R[w+1]=(1<<D)-1;for(let T=w;T>=V;T-=1){let E=T-1,M=n[t.charAt(E)];if(g&&(y[E]=+!!M),R[T]=(R[T+1]<<1|1)&M,D&&(R[T]|=(S[T+1]|S[T])<<1|1|S[T+1]),R[T]&v&&(m=si(e,{errors:D,currentLocation:E,expectedLocation:h,distance:i,ignoreLocation:u}),m<=p)){if(p=m,_=E,_<=h)break;V=Math.max(1,2*h-_)}}if(si(e,{errors:D+1,currentLocation:h,expectedLocation:h,distance:i,ignoreLocation:u})>p)break;S=R}const b={isMatch:_>=0,score:Math.max(.001,m)};if(g){const D=jg(y,s);D.length?l&&(b.indices=D):b.isMatch=!1}return b}function Kg(t){let e={};for(let n=0,r=t.length;n<r;n+=1){const i=t.charAt(n);e[i]=(e[i]||0)|1<<r-n-1}return e}class ru{constructor(e,{location:n=W.location,threshold:r=W.threshold,distance:i=W.distance,includeMatches:o=W.includeMatches,findAllMatches:a=W.findAllMatches,minMatchCharLength:s=W.minMatchCharLength,isCaseSensitive:l=W.isCaseSensitive,ignoreLocation:u=W.ignoreLocation}={}){if(this.options={location:n,threshold:r,distance:i,includeMatches:o,findAllMatches:a,minMatchCharLength:s,isCaseSensitive:l,ignoreLocation:u},this.pattern=l?e:e.toLowerCase(),this.chunks=[],!this.pattern.length)return;const c=(h,p)=>{this.chunks.push({pattern:h,alphabet:Kg(h),startIndex:p})},f=this.pattern.length;if(f>un){let h=0;const p=f%un,_=f-p;for(;h<_;)c(this.pattern.substr(h,un),h),h+=un;if(p){const g=f-un;c(this.pattern.substr(g),g)}}else c(this.pattern,0)}searchIn(e){const{isCaseSensitive:n,includeMatches:r}=this.options;if(n||(e=e.toLowerCase()),this.pattern===e){let _={isMatch:!0,score:0};return r&&(_.indices=[[0,e.length-1]]),_}const{location:i,distance:o,threshold:a,findAllMatches:s,minMatchCharLength:l,ignoreLocation:u}=this.options;let c=[],f=0,h=!1;this.chunks.forEach(({pattern:_,alphabet:g,startIndex:y})=>{const{isMatch:k,score:S,indices:m}=Xg(e,_,g,{location:i+y,distance:o,threshold:a,findAllMatches:s,minMatchCharLength:l,includeMatches:r,ignoreLocation:u});k&&(h=!0),f+=S,k&&m&&(c=[...c,...m])});let p={isMatch:h,score:h?f/this.chunks.length:1};return h&&r&&(p.indices=c),p}}class We{constructor(e){this.pattern=e}static isMultiMatch(e){return iu(e,this.multiRegex)}static isSingleMatch(e){return iu(e,this.singleRegex)}search(){}}function iu(t,e){const n=t.match(e);return n?n[1]:null}class Zg extends We{constructor(e){super(e)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(e){const n=e===this.pattern;return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}}class Qg extends We{constructor(e){super(e)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(e){const r=e.indexOf(this.pattern)===-1;return{isMatch:r,score:r?0:1,indices:[0,e.length-1]}}}class Jg extends We{constructor(e){super(e)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(e){const n=e.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}}class $g extends We{constructor(e){super(e)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(e){const n=!e.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,e.length-1]}}}class tv extends We{constructor(e){super(e)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(e){const n=e.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[e.length-this.pattern.length,e.length-1]}}}class ev extends We{constructor(e){super(e)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(e){const n=!e.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,e.length-1]}}}class ou extends We{constructor(e,{location:n=W.location,threshold:r=W.threshold,distance:i=W.distance,includeMatches:o=W.includeMatches,findAllMatches:a=W.findAllMatches,minMatchCharLength:s=W.minMatchCharLength,isCaseSensitive:l=W.isCaseSensitive,ignoreLocation:u=W.ignoreLocation}={}){super(e),this._bitapSearch=new ru(e,{location:n,threshold:r,distance:i,includeMatches:o,findAllMatches:a,minMatchCharLength:s,isCaseSensitive:l,ignoreLocation:u})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(e){return this._bitapSearch.searchIn(e)}}class au extends We{constructor(e){super(e)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(e){let n=0,r;const i=[],o=this.pattern.length;for(;(r=e.indexOf(this.pattern,n))>-1;)n=r+o,i.push([r,n-1]);const a=!!i.length;return{isMatch:a,score:a?0:1,indices:i}}}const Ro=[Zg,au,Jg,$g,ev,tv,Qg,ou],su=Ro.length,nv=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,rv="|";function iv(t,e={}){return t.split(rv).map(n=>{let r=n.trim().split(nv).filter(o=>o&&!!o.trim()),i=[];for(let o=0,a=r.length;o<a;o+=1){const s=r[o];let l=!1,u=-1;for(;!l&&++u<su;){const c=Ro[u];let f=c.isMultiMatch(s);f&&(i.push(new c(f,e)),l=!0)}if(!l)for(u=-1;++u<su;){const c=Ro[u];let f=c.isSingleMatch(s);if(f){i.push(new c(f,e));break}}}return i})}const ov=new Set([ou.type,au.type]);class av{constructor(e,{isCaseSensitive:n=W.isCaseSensitive,includeMatches:r=W.includeMatches,minMatchCharLength:i=W.minMatchCharLength,ignoreLocation:o=W.ignoreLocation,findAllMatches:a=W.findAllMatches,location:s=W.location,threshold:l=W.threshold,distance:u=W.distance}={}){this.query=null,this.options={isCaseSensitive:n,includeMatches:r,minMatchCharLength:i,findAllMatches:a,ignoreLocation:o,location:s,threshold:l,distance:u},this.pattern=n?e:e.toLowerCase(),this.query=iv(this.pattern,this.options)}static condition(e,n){return n.useExtendedSearch}searchIn(e){const n=this.query;if(!n)return{isMatch:!1,score:1};const{includeMatches:r,isCaseSensitive:i}=this.options;e=i?e:e.toLowerCase();let o=0,a=[],s=0;for(let l=0,u=n.length;l<u;l+=1){const c=n[l];a.length=0,o=0;for(let f=0,h=c.length;f<h;f+=1){const p=c[f],{isMatch:_,indices:g,score:y}=p.search(e);if(_){if(o+=1,s+=y,r){const k=p.constructor.type;ov.has(k)?a=[...a,...g]:a.push(g)}}else{s=0,o=0,a.length=0;break}}if(o){let f={isMatch:!0,score:s/o};return r&&(f.indices=a),f}}return{isMatch:!1,score:1}}}const Oo=[];function sv(...t){Oo.push(...t)}function Lo(t,e){for(let n=0,r=Oo.length;n<r;n+=1){let i=Oo[n];if(i.condition(t,e))return new i(t,e)}return new ru(t,e)}const li={AND:"$and",OR:"$or"},Ho={PATH:"$path",PATTERN:"$val"},Uo=t=>!!(t[li.AND]||t[li.OR]),lv=t=>!!t[Ho.PATH],uv=t=>!Ce(t)&&Ql(t)&&!Uo(t),lu=t=>({[li.AND]:Object.keys(t).map(e=>({[e]:t[e]}))});function uu(t,e,{auto:n=!0}={}){const r=i=>{let o=Object.keys(i);const a=lv(i);if(!a&&o.length>1&&!Uo(i))return r(lu(i));if(uv(i)){const l=a?i[Ho.PATH]:o[0],u=a?i[Ho.PATTERN]:i[l];if(!me(u))throw new Error(Pg(l));const c={keyId:Do(l),pattern:u};return n&&(c.searcher=Lo(u,e)),c}let s={children:[],operator:o[0]};return o.forEach(l=>{const u=i[l];Ce(u)&&u.forEach(c=>{s.children.push(r(c))})}),s};return Uo(t)||(t=lu(t)),r(t)}function cv(t,{ignoreFieldNorm:e=W.ignoreFieldNorm}){t.forEach(n=>{let r=1;n.matches.forEach(({key:i,norm:o,score:a})=>{const s=i?i.weight:null;r*=Math.pow(a===0&&s?Number.EPSILON:a,(s||1)*(e?1:o))}),n.score=r})}function fv(t,e){const n=t.matches;e.matches=[],Zt(n)&&n.forEach(r=>{if(!Zt(r.indices)||!r.indices.length)return;const{indices:i,value:o}=r;let a={indices:i,value:o};r.key&&(a.key=r.key.src),r.idx>-1&&(a.refIndex=r.idx),e.matches.push(a)})}function hv(t,e){e.score=t.score}function dv(t,e,{includeMatches:n=W.includeMatches,includeScore:r=W.includeScore}={}){const i=[];return n&&i.push(fv),r&&i.push(hv),t.map(o=>{const{idx:a}=o,s={item:e[a],refIndex:a};return i.length&&i.forEach(l=>{l(o,s)}),s})}class Fn{constructor(e,n={},r){this.options=At(At({},W),n),this.options.useExtendedSearch,this._keyStore=new Hg(this.options.keys),this.setCollection(e,r)}setCollection(e,n){if(this._docs=e,n&&!(n instanceof Po))throw new Error(Dg);this._myIndex=n||nu(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(e){Zt(e)&&(this._docs.push(e),this._myIndex.add(e))}remove(e=()=>!1){const n=[];for(let r=0,i=this._docs.length;r<i;r+=1){const o=this._docs[r];e(o,r)&&(this.removeAt(r),r-=1,i-=1,n.push(o))}return n}removeAt(e){this._docs.splice(e,1),this._myIndex.removeAt(e)}getIndex(){return this._myIndex}search(e,{limit:n=-1}={}){const{includeMatches:r,includeScore:i,shouldSort:o,sortFn:a,ignoreFieldNorm:s}=this.options;let l=me(e)?me(this._docs[0])?this._searchStringList(e):this._searchObjectList(e):this._searchLogical(e);return cv(l,{ignoreFieldNorm:s}),o&&l.sort(a),Zl(n)&&n>-1&&(l=l.slice(0,n)),dv(l,this._docs,{includeMatches:r,includeScore:i})}_searchStringList(e){const n=Lo(e,this.options),{records:r}=this._myIndex,i=[];return r.forEach(({v:o,i:a,n:s})=>{if(!Zt(o))return;const{isMatch:l,score:u,indices:c}=n.searchIn(o);l&&i.push({item:o,idx:a,matches:[{score:u,value:o,norm:s,indices:c}]})}),i}_searchLogical(e){const n=uu(e,this.options),r=(s,l,u)=>{if(!s.children){const{keyId:f,searcher:h}=s,p=this._findMatches({key:this._keyStore.get(f),value:this._myIndex.getValueForItemAtKeyId(l,f),searcher:h});return p&&p.length?[{idx:u,item:l,matches:p}]:[]}const c=[];for(let f=0,h=s.children.length;f<h;f+=1){const p=s.children[f],_=r(p,l,u);if(_.length)c.push(..._);else if(s.operator===li.AND)return[]}return c},i=this._myIndex.records,o={},a=[];return i.forEach(({$:s,i:l})=>{if(Zt(s)){let u=r(n,s,l);u.length&&(o[l]||(o[l]={idx:l,item:s,matches:[]},a.push(o[l])),u.forEach(({matches:c})=>{o[l].matches.push(...c)}))}}),a}_searchObjectList(e){const n=Lo(e,this.options),{keys:r,records:i}=this._myIndex,o=[];return i.forEach(({$:a,i:s})=>{if(!Zt(a))return;let l=[];r.forEach((u,c)=>{l.push(...this._findMatches({key:u,value:a[c],searcher:n}))}),l.length&&o.push({idx:s,item:a,matches:l})}),o}_findMatches({key:e,value:n,searcher:r}){if(!Zt(n))return[];let i=[];if(Ce(n))n.forEach(({v:o,i:a,n:s})=>{if(!Zt(o))return;const{isMatch:l,score:u,indices:c}=r.searchIn(o);l&&i.push({score:u,key:e,value:o,idx:a,norm:s,indices:c})});else{const{v:o,n:a}=n,{isMatch:s,score:l,indices:u}=r.searchIn(o);s&&i.push({score:l,key:e,value:o,norm:a,indices:u})}return i}}Fn.version="7.0.0",Fn.createIndex=nu,Fn.parseIndex=Gg,Fn.config=W,Fn.parseQuery=uu,sv(av);const pv=(t,e,n,r,i,o,a,s)=>{!e.includes(t.key)&&d(n)&&d(n).length&&(N(r,!0),N(i,q(d(o).length))),t.key==="Tab"&&N(r,!1),t.key==="ArrowDown"&&d(o)&&d(o).length&&(N(r,!0),N(a,0),s[0].focus())};function _v(t,e,n){N(e,!0),N(n,null)}var gv=(t,e,n,r)=>{e(n(),r())},vv=(t,e,n,r)=>e(t,n(),r()),mv=ft('<span class="svelte-w26pjf"> </span>'),yv=ft('<li role="option" tabindex="-1" class="svelte-w26pjf"> <!></li>'),wv=ft('<li class="disabled svelte-w26pjf" tabindex="-1">Sorry, no options match</li>'),xv=ft('<ul role="listbox" class="svelte-w26pjf"><!></ul>'),bv=ft('<div class="field svelte-w26pjf"><label class="svelte-w26pjf"><span class="field-label svelte-w26pjf"> </span></label> <div class="autocomplete svelte-w26pjf"><div class="search_group svelte-w26pjf"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="svelte-w26pjf"><path d="M10.5557 10.5534C11.5256 9.58305 12.1254 8.24283 12.1254 6.76252C12.1254 3.8009 9.72452 1.40002 6.76289 1.40002C3.80126 1.40002 1.40039 3.8009 1.40039 6.76252C1.40039 9.72415 3.80126 12.125 6.76289 12.125C8.24421 12.125 9.58524 11.5244 10.5557 10.5534ZM10.5557 10.5534L14.6004 14.6" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path></svg> <input autocapitalize="none" type="text" autocomplete="off" aria-autocomplete="list" role="combobox" aria-expanded="false" class="svelte-w26pjf"></div> <!></div></div>');function Mv(t,e){$t(e,!0);const n=Pi(e,"MAX_SEARCH_RESULTS",3,6),r=Pi(e,"name",3,"autocomplete");let i=lt(""),o=lt(!1),a=lt(0),s=q([]),l=lt(q([])),u=lt(!1),c=lt(!1),f=lt(void 0);const h=z(()=>new Fn(d(_),Xe(At({},p),{keys:["label"]}))),p={keys:["label","hint"],threshold:.1,includeScore:!0,ignoreLocation:!0},_=z(()=>e.data.map(T=>{const{label:E,value:M}=T,[F,U=""]=E.includes("|")?E.split("|"):[E,""];return{label:F,value:M,hint:U}})),g=z(()=>d(h).search(d(i)).sort((M,F)=>qn(M.score,F.score)).map(M=>At({},M.item)).sort((M,F)=>{const U=["Department"],Y=U.some(ht=>M.label.includes(ht))?1:0,Q=U.some(ht=>F.label.includes(ht))?1:0;return Y!==Q?Q-Y:M.score-F.score}).slice(0,n())),y=["Escape","ArrowUp","ArrowLeft","ArrowRight","ArrowDown","Space","Enter","Tab","Shift"];function k(T){T.key==="Tab"&&N(o,!1),d(i)&&d(i).length===1&&T.key==="Backspace"&&(Pt.selected=[]),T.key==="Escape"&&(N(o,!1),N(i,""))}function S(){this.select(),d(o)!=d(o),N(u,!0)}function m(T,E){Pt.selected=T,N(i,q(E)),N(o,!1),d(f).focus()}function C(T,E,M){const F=T.key;["Enter","ArrowDown","ArrowUp","Escape"].includes(F)?(F==="Enter"&&(m(E,M),N(c,!1)),F==="ArrowDown"&&d(g)&&d(g).length&&(N(a,q(d(a)<d(g).length-1?d(a)+1:d(g).length-1)),s[d(a)].focus(),N(c,!0)),F==="Escape"&&(N(o,!1),d(f).focus()),F==="ArrowUp"&&d(a)===0?(d(f).focus(),N(a,null),N(c,!0)):F==="ArrowUp"&&d(a)!=0&&(N(a,d(a)-1),s[d(a)].focus(),N(c,!0))):N(c,!1),d(c)===!0&&T.preventDefault()}var v=bv(),b=Z(v);_t(b,"for","sankey-ac");var D=Z(b),L=Z(D),B=it(b,2),V=Z(B),w=it(Z(V),2);_t(w,"id","sankey-ac"),_t(w,"name","autocomplete"),w.__keyup=[pv,y,i,o,l,g,a,s],w.__keydown=k,w.__click=[_v,o,a],ke(w,T=>N(f,T),()=>d(f));var R=it(V,2);{var A=T=>{var E=xv();_t(E,"id","autocomplete-options--sankey-ac");var M=Z(E);{var F=Y=>{var Q=Ar(),ht=Jt(Q);oe(ht,17,()=>d(g),Ee,(Vt,wt,It)=>{let vt=()=>d(wt).label,Lt=()=>d(wt).value,Ve=()=>d(wt).hint;var Qt=yv();_t(Qt,"id",`autocomplete_${It}`),Qt.__click=[gv,m,Lt,vt],Qt.__keydown=[vv,C,Lt,vt];var I=Z(Qt),G=it(I);{var K=x=>{var xt=mv(),rt=Z(xt);ct(()=>{var kt;return Yt(rt,`within ${(kt=Ve())!=null?kt:""}`)}),X(x,xt)};yt(G,x=>{Ve()&&x(K)})}ke(Qt,(x,xt)=>s[xt]=x,x=>s==null?void 0:s[x],()=>[It]),ct(()=>{var x;_t(Qt,"aria-selected",It===d(a)),_t(Qt,"data-option-value",Lt()),Yt(I,`${(x=vt())!=null?x:""} `)}),X(Vt,Qt)}),X(Y,Q)},U=Y=>{var Q=wv();X(Y,Q)};yt(M,Y=>{d(g)&&d(g).length?Y(F):Y(U,!1)})}ct(()=>zt(E,"hidden",!d(o))),X(T,E)};yt(R,T=>{d(i)!==""&&T(A)})}ct(()=>{zt(D,"show",d(i)===""),Yt(L,e.FlourishState.search_text),_t(w,"aria-controls",`autocomplete-options--${r()}`)}),Yn("focus",w,S),Yn("blur",w,()=>N(u,!1)),Pc(w,()=>d(i),T=>N(i,T)),X(t,v),te()}Tr(["keyup","keydown","click"]);var Ev=ft('<div class="search-input svelte-50zyq5"><div><!></div></div>'),kv=ft('<button class="close-btn svelte-50zyq5" aria-label="close search"><svg width="7" height="10" viewBox="0 0 7 10" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6 9L2 5L6 1" stroke="currentColor" stroke-width="2" stroke-linecap="round"></path></svg></button>'),Sv=ft('<span></span> <a target="_blank" class="svelte-50zyq5">Learn more</a>',1),Tv=ft('<!> <div class="search-result__data svelte-50zyq5"><p class="name svelte-50zyq5"> </p> <div class="amounts svelte-50zyq5"><p class="value svelte-50zyq5"> </p> <span></span> <p class="svelte-50zyq5"> </p> <!></div></div>',1),Av=ft('<div class="search-result svelte-50zyq5"><!></div>'),Nv=ft('<div><div class="dialog svelte-50zyq5"><!> <!></div></div>');function Fv(t,e){$t(e,!0);const r=z(()=>e.FlourishState.search_side!=="one"?Qn:new Map([...Qn].filter(([_,g])=>g.some(y=>y.side===e.FlourishState.search_side_name)))),i=z(()=>Array.from(d(r),([_,g])=>({label:_,value:g})));let o=lt(!1);Ut(()=>{Pt.selected!==null&&Pt.selected!==""&&N(o,!1)});const a=()=>{Pt.selected=null;const _=Object.entries(Ue).findIndex(([,g])=>g.selected===!0);_!==-1&&(Ue[_].filtered="")},s=z(()=>e.userSelectedDataToDisplay&&e.userSelectedDataToDisplay.name&&e.userSelectedDataToDisplay.name.trim()!==""&&e.linkMap.get(e.userSelectedDataToDisplay.name.trim())||null);var l=Nv(),u=Z(l),c=Z(u);{var f=_=>{var g=Ev(),y=Z(g);dt(y,"width","100%");var k=Z(y);Mv(k,{get data(){return d(i)},get FlourishState(){return e.FlourishState}}),X(_,g)};yt(c,_=>{(!Pt.selected||!Pt.selected.length)&&e.FlourishState.show_search&&H.value===""&&_(f)})}var h=it(c,2);{var p=_=>{var g=Av(),y=Z(g);{var k=S=>{var m=Tv(),C=Jt(m);{var v=M=>{var F=kv();F.__click=a,X(M,F)};yt(C,M=>{H.value===""&&M(v)})}var b=it(C,2),D=Z(b),L=Z(D),B=it(D,2),V=Z(B),w=Z(V);ct(()=>{var M,F;return Yt(w,`${(M=Be.formattingFunction(e.userSelectedDataToDisplay.total))!=null?M:""}
								${(F=e.userSelectedDataToDisplay.units)!=null?F:""}`)});var R=it(V,4),A=Z(R);ct(()=>{var M;return Yt(A,`${(M=eo(e.userSelectedDataToDisplay.percentage))!=null?M:""} of total`)});var T=it(R,2);{var E=M=>{var F=Sv(),U=it(Jt(F),2);ct(()=>_t(U,"href",d(s))),X(M,F)};yt(T,M=>{d(s)&&M(E)})}ct(()=>Yt(L,e.userSelectedDataToDisplay.name)),X(S,m)};yt(y,S=>{e.userSelectedDataToDisplay&&S(k)})}X(_,g)};yt(h,_=>{!d(o)&&e.userSelectedDataToDisplay&&e.FlourishState.tooltip_static&&_(p)})}ct(()=>{var _;Ni(l,`${(_=`container ${e.FlourishState.tooltip_static_x}`)!=null?_:""} svelte-50zyq5`),zt(l,"bottom",e.FlourishState.tooltip_static_y==="bottom"),zt(u,"minimizeSearch",d(o))}),X(t,l),te()}Tr(["click"]);var Cv=ft('<div class="parent svelte-1koba4p"><!> <!> <!></div>');function Iv(t,e){$t(e,!0);let n=lt(void 0),r=new Nr;const i=z(()=>du.getFormatterFunction()),o=z(()=>(e.state.flourish_number_format,hu(d(i))));Ut(()=>{e.state.number_formatting==="usaf_dollar"?Be.formattingFunction=$h:Be.formattingFunction=d(o)}),Ut(()=>{if(e.data&&e.data.links){const{links:_}=e.data;_.forEach(g=>{g.search_nodes_link.forEach(y=>{r.set(y,g.url)})})}});let a=z(()=>{const _={};return Object.entries(e.state).forEach(([g,y])=>{if(g.includes("color")||g.includes("padding")){const k=g.match(/(.+?)_(left|right)$/);if(k){const S=k[1],m=k[2];_[m]||(_[m]=[]),_[m].push(`--${S.replaceAll("_","-")}: ${y}`)}else _.global||(_.global=[]),_.global.push(`--${g.replaceAll("_","-")}: ${y}`)}}),Object.entries(_).map(([g,y])=>`${g==="global"?":root":`.${g}`} { ${y.join("; ")} }`).join(" ")});const s=z(()=>zl(e.state));var l=Cv();bc(_=>{var g=Ar(),y=Jt(g);Cc(y,()=>`<style>
${d(a)}
	</style>`,!1,!1),X(_,g)});var u=Z(l);{var c=_=>{Fv(_,{get userSelectedDataToDisplay(){return d(s)},get searchSideName(){return e.state.search_side_name},get FlourishState(){return e.state},linkMap:r})};yt(u,_=>{(e.state.show_search||e.state.tooltip_static)&&_(c)})}var f=it(u,2);Tg(f,{get data(){return e.data},get FlourishState(){return e.state},get userSelectedDataToDisplay(){return d(s)},get flourishTooltip(){return d(n)}});var h=it(f,2);{var p=_=>{ke(K_(_,{get FlourishState(){return e.state}}),g=>N(n,q(g)),()=>d(n))};yt(h,_=>{e.state.flourish_tooltip&&_(p)})}ct(()=>zt(l,"bottom",e.state.tooltip_static_y)),X(t,l),te()}var cu=Object.freeze({transform_labels:!1,transform:"multiply",multiply_divide_constant:1,exponentiate_constant:0,multiplier:1,prefix:"",n_dec:2,suffix:"",strip_zeros:!0,strip_separator:!0,negative_sign:"-$nk"});function Dv(t,e){if(e=e>0?Math.floor(e):Math.ceil(e),!e)return Math.round(t);var n=Math.pow(10,Math.abs(e));return e>0?Math.round(t*n)/n:Math.round(t/n)*n}function Pv(t){var e=1;return t.transform_labels&&(t.transform==="multiply"?e=t.multiply_divide_constant:t.transform==="divide"?e=1/t.multiply_divide_constant:e=Math.pow(10,t.exponentiate_constant)),function(n){return n*e}}function Rv(t,e){var n=t.n_dec>=0?Math.floor(t.n_dec):Math.ceil(t.n_dec),r=e(",."+(n>0?n:"0")+"f"),i=e.decimal,o=e.thousands,a=t.strip_zeros&&n>0?new RegExp("\\"+i+"?0+$"):null,s=t.strip_separator&&o,l=t.negative_sign,u=Pv(t);return function(c){var f=n>=0?u(c):Dv(u(c),n),h=f<0,p=Math.abs(f),_=s&&o&&p>=1e3&&p<1e4,g=r(p);return a&&(g=g.replace(a,"")),_&&(g=g.replace(o,"")),!h||l==="none"?t.prefix+g+t.suffix:l==="-$nk"?"-"+t.prefix+g+t.suffix:l==="$-nk"?t.prefix+"-"+g+t.suffix:l==="($nk)"?"("+t.prefix+g+t.suffix+")":t.prefix+"("+g+")"+t.suffix}}function Ov(t){for(var e in cu)t[e]===void 0&&(t[e]=cu[e]);return function(n){return Rv(t,n)}}var fu=Object.freeze({input_decimal_separator:".",output_separators:",."});function Lv(t,e){return{decimal:t,thousands:e,grouping:[3],currency:["",""]}}function Hv(t){var e=new RegExp("[^-0-9eE"+t+"]","g");return function(n){return typeof n=="number"?n:n===""||typeof n=="undefined"?NaN:parseFloat(n.replace(e,"").replace(t,"."))}}function Uv(t){var e=t.length>1,n=e?t.charAt(1):t.charAt(0),r=e?t.charAt(0):"",i=Xi(Lv(n,r)).format;return i.decimal=n,i.thousands=r,i}function Bv(t){for(var e in fu)t[e]===void 0&&(t[e]=fu[e]);return{getParser:function(){return Hv(t.input_decimal_separator)},getFormatterFunction:function(){return Uv(t.output_separators)}}}const cr={flow_direction:"both",flow_rendering:"canvas",sort_blocks:!1,color_hover:"#FFF392",color_highlight:"#8F247F",color_active:"#FFFDE9",color_text_active:"#202122",color_base:"#E3007D",color_text_base:"#FFFFFF",color_neg_hover:"#2763A4",color_neg_highlight:"#00347B",color_neg_active:"#299ED9",color_neg_text_active:"#FFFFFF",color_neg_base:"#9BC6ED",color_neg_text_base:"#66c4ef",color_short_text:"#FFFFFF",color_highlight_left:"#FFF392",color_hover_left:"#FFF392",color_neg_hover_left:"#2763A4",color_active_left:"#FFFDE9",color_text_active_left:"#202122",color_base_left:"#249EDC",color_text_base_left:"#202122",color_neg_highlight_left:"#00347B",color_neg_active_left:"#299ED9",color_neg_text_active_left:"#FFFFFF",color_neg_base_left:"#9BC6ED",color_neg_text_base_left:"#00347B",color_short_text_left:"#FFFFFF",narrow_first_column:!0,show_search:!0,show_difference:!0,align_chart:"top",fit_to_one_screen:!1,difference_label:"Deficit",color_difference:"#D9DADA",color_difference_text:"#FFFFFF",color_background:"#202122",search_text:"US government agency",search_function:"filter",search_side:"one",search_side_name:"Spending",hide_nonsearched_side:!0,block_inner_padding:"16px",block_outer_padding:"16px",search_color_background:"#202122",search_color_box:"#303134",search_color_highlight:"#202122",search_color_subtitle:"#C1C2C2",tooltip_color_text:"#FFFFFF",mobile_breakpoint:500,mobile_aspect_ratio:1.25,desktop_aspect_ratio:.55,max_height:1e3,min_height:500,tooltip_units:`Spending :: spent
	Revenue :: collected`,make_svg_downloadable:!1,row_gap_standard:10,row_gap_group:30,tooltip_static:!0,flourish_tooltip:!1,popup:{mode:"popup",popup_background:"#000000",popup_custom_header:"{{name}}",popup_custom_main:` {{total}} {{units}} </br> {{percentage}} 
`,popup_header_type:"inline",popup_is_custom:!0,popup_list_label_weight:"normal",popup_list_separator:": ",popup_list_type:"ul",popup_padding:.8,popup_pointer:!0,popup_radius:.9,popup_shadow:!0,popup_text_color:"#ffffff",popup_width:18,show_popup_styles:!0},tooltip_static_y:"top",tooltip_static_x:"right",number_formatting:"usaf_dollar",flourish_number_format:{},localization:{}};var Bo={};let Yo=q({state:cr,data:Bo}),hu=Ov(cr.flourish_number_format),du=Bv(cr.localization);function Yv(){Yo.state=cr,Yo.data=Bo}function zv(){Mc(Iv,{target:document.getElementById("app"),props:Yo})}return j.data=Bo,j.draw=zv,j.getFlourishFormatter=hu,j.localization=du,j.state=cr,j.update=Yv,Object.defineProperty(j,Symbol.toStringTag,{value:"Module"}),j}({});
//# sourceMappingURL=template.js.map
</script><script src="./embedded.js"></script><script>!function(){"use strict";window.snapshot=function(e,t){function n(e){return Number.isInteger(e)&&e>0}let r;if(e.quiet||console.log("snapshotting with options",e),e.timeout_ms&&!n(e.timeout_ms))return void A("timeout_ms must be a positive integer");if(e.wait_for_animation_ms&&!n(e.wait_for_animation_ms))return void A("wait_for_animation_ms must be a positive integer");"svg"===e.format&&(e.thumbnail_height||e.thumbnail_width)&&console.warn("Thumbnail cropping is not supported for SVGs. thumbnail_height and thumbnail_width will be ignored.");var o,a=(new Date).getTime(),i={},s=document.location.href.substr(0,document.location.href.lastIndexOf("?")),l=[],c="image/"+e.format;const u=/url\(\s*?['"]?\s*?(\S+?)\s*?["']?\s*?\)/gi,d=new AbortController;e.timeout_ms&&(r=setTimeout(()=>{d.abort("Exceeded configured snapshot timeout")},e.timeout_ms));class f extends Error{constructor(t){super(`Snapshot function exceeded the configured timeout of ${e.timeout_ms}ms. Try reducing the size of embedded images or files.`),this.step=t}}function h(){var t=Array.from(arguments),n=t[0],r=(new Date).getTime()-a,o=[r].concat(t.slice(1));e.quiet||console.log.apply(console,o),i[n+"_ms"]=r}function g(e,t){var n=t||s;return-1!==e.indexOf("://")||0===e.indexOf("//")||(e=0===e.indexOf("../")?n.substr(0,n.lastIndexOf("/",n.length-2))+"/"+e.substr(3):n+e),e}async function m(){const e=await Promise.all([].slice.call(document.styleSheets).map(p));var t=document.createElement("style");t.innerHTML=e.join(""),o.insertBefore(t,o.firstChild),h("inlined_stylesheets","inlined stylesheets")}function p(t){return y(function(n,r){var o,a="",i=[];async function s(e){var t=e.substr(0,e.lastIndexOf("/")+1);try{const n=await w(e,"text");a+=function(e,t){var n,r=/@font-face\s*\{([^}]*)\}/g;for(;null!==(n=r.exec(e));){var o=n[1],a=/font-weight:\s*([^;]+);/g.exec(o)&&/font-weight:\s*([^;]+);/g.exec(o)[1]||"normal",i=/font-style:\s*([^;]+);/g.exec(o)&&/font-style:\s*([^;]+);/g.exec(o)[1]||"normal",s=/unicode-range:\s*([^;]+);/g.exec(o)&&/unicode-range:\s*([^;]+);/g.exec(o)[1]||"U+0-10FFFF";l.push({family:/font-family:\s*([^;]+);/g.exec(o)[1],weight:a,style:i,unicode_range:s,url:c(o,t)})}return e.replace(r,"")}(n,t),a=await async function(e,t){let n;const r=[];for(;null!==(n=u.exec(e));){const[e,o]=n;o&&0!==o.indexOf("data:")&&r.push(new Promise((n,r)=>{v(g(o,t)).then(t=>{n({match:e,dataUrl:t})}).catch(e=>{console.error(e),r()})}))}return(await Promise.allSettled(r)).forEach(t=>{"fulfilled"===t.status&&(e=e.replace(t.value.match,`url('${t.value.dataUrl}')`))}),e}(a,t)}catch(e){console.error(e)}}function c(t,n){for(var r,o,a=/url\(['"]?([^'")]*)['"]?\)/g;null!==(o=a.exec(t));)-1!==o[1].indexOf(e.fontFormat||".woff")&&(r=g(o[1],n));return r}if(t.href)i.push(s(t.href));else if(t.rules){var d;o=t.rules,t.href&&(d=t.href.substr(0,t.href.lastIndexOf("/")+1));for(var f=0;f<o.length;f++){var h=o[f];h.type===CSSRule.IMPORT_RULE?i.push(s(h.href)):h.type===CSSRule.FONT_FACE_RULE?l.push({family:h.style.fontFamily,weight:h.style.fontWeight||"normal",unicode_range:h.style.unicodeRange||"U+0-10FFFF",url:c(h.style.src,d)}):a+=h.cssText}}Promise.all(i).then(function(){n(a)})})}function w(t,n){return new Promise(function(r,o){let a=e.cache_override,i=t;if(!a){a="no-store";try{const e=new URL(t),n=new URLSearchParams(e.search);n.set("_cache_bust",Date.now().toString()),e.search=n.toString(),i=e.toString()}catch(e){}}fetch(i,{cache:a,signal:d.signal}).then(e=>{200===e.status?"blob"===n?e.blob().then(e=>r(e)):e.text().then(e=>r(e)):403===e.status?o("Access forbidden to: "+t):e.status>=400&&e.status<=499&&o(e.status+" error fetching: "+t)}).catch(e=>{console.error("Error sending AJAX request to fetch: "+t,e),o(e)})})}function y(e){return new Promise(function(t,n){d.signal.aborted&&n(new f),d.signal.addEventListener("abort",()=>{n(new f)}),e(t,n)})}function v(e){return y(function(t,n){w(e,"blob").then(function(e){var n=new window.FileReader;n.readAsDataURL(e),n.onloadend=function(){t(n.result)}}).catch(function(e){n(e)})})}function b(e){return y(function(t,n){h("inlining_images","inlining images");const r=function(e){const t=[e,...e.querySelectorAll("[style*=background]")],n=["initial","inherit","unset","revert","revert-layer"];return t.filter(e=>!!e.style?.backgroundImage&&!n.includes(e.style.backgroundImage))}(e),o=e.querySelectorAll("img, svg image");let a=o.length+r.length;i.images_to_process=a,h("processing_images","processing",a,"images"),a||t();const s=[];[...o].forEach(e=>{const t=e.currentSrc||e.src||(e.href?e.href.baseVal:null);t&&0!==t.indexOf("data:")&&s.push(new Promise((n,r)=>{v(g(t)).then(function(t){e.src?e.src=t:e.href&&e.setAttribute("href",t),n()}).catch(function(t){e&&e.parentNode&&e.parentNode.removeChild(e),r(t)})}))}),r.forEach(e=>{const t=[...e.style.backgroundImage.matchAll(u)];s.push(new Promise((n,r)=>{Promise.allSettled(t.map(e=>new Promise((t,n)=>{const r=e[1];0!==r.indexOf("data:")?v(g(r)).then(n=>{t({match:e[0],data:n})}).catch(e=>n(e)):t()}))).then(t=>{t.filter(e=>"fulfilled"===e.status&&e.value).forEach(t=>{e.style.backgroundImage=e.style.backgroundImage.replace(t.value.match,`url(${t.value.data})`)}),n()}).catch(function(e){r(e)})}))}),Promise.allSettled(s).then(()=>{t()})})}function _(t,n,r,o,a){if(o&&a)return function(t,n,r,o,a){let i=t;if(navigator.userAgent.toLowerCase().includes("firefox")){const n=t.naturalWidth,r=t.naturalHeight,o=document.createElement("canvas");o.width=n,o.height=r,e.transparent_background||(o.style.backgroundColor="#fff"),o.getContext("2d",{alpha:!1}).drawImage(t,0,0,n,r),i=o}const s=o*(r||1),l=a*(r||1),c=document.createElement("canvas");c.width=s,c.height=l,e.transparent_background||(c.style.backgroundColor="#fff");const u=c.getContext("2d",{alpha:!1}),d=t.naturalWidth/t.naturalHeight,f=o/a;let h=t.naturalWidth,g=t.naturalHeight;return d>f?h=t.naturalHeight*f:g=t.naturalWidth/f,u.drawImage(i,0,0,h,g,0,0,s,l),c.toDataURL(n||"image/png")}(t,n,r,o,a);const i=t.naturalWidth*(r||1),s=t.naturalHeight*(r||1),l=document.createElement("canvas"),c=l.getContext("2d");return l.width=i,l.height=s,e.transparent_background||(l.style.backgroundColor="#fff"),c.drawImage(t,0,0,t.naturalWidth,t.naturalHeight,0,0,i,s),l.toDataURL(n||"image/png")}function x(t){var n=document.createElement("a");document.body.appendChild(n);var r=e.filename||"snapshot-"+(new Date).getTime();e.scale&&1!==e.scale&&(r+="@"+e.scale+"x"),r+="."+e.format,n.download=r,n.href=t,n.click(),window.setTimeout(function(){document.body.removeChild(n)},0)}function S(e){const t=unescape(encodeURIComponent(e));return btoa(t)}function A(e,n){t?t.postMessage({result:{status:"error",error:e}}):(alert("Sorry, there was a problem"),console.error(e)),clearTimeout(r),n&&n(e)}function E(e){return!!d.signal.aborted&&(A((new f).message,e),!0)}Promise.allSettled||(Promise.allSettled=function(e){const t=e.map(e=>Promise.resolve(e).then(e=>({status:"fulfilled",value:e})).catch(e=>({status:"rejected",reason:e})));return Promise.all(t)});var L="svg"===e.format?function(n){setTimeout(()=>function(n){for(var o,a=[],i=0,s=0,l=1/0,c=1/0,u=document.body.querySelectorAll("svg:not(.fl-ignore-svg-download)"),d=0;d<u.length;d++){var f=u[d];if(!f.classList.contains("flourish-popup-svg")){var h=f.getBoundingClientRect();l=Math.min(l,h.left),c=Math.min(c,h.top)}}for(var g=0;g<u.length;g++){var m=u[g];if(!m.classList.contains("flourish-popup-svg")){var p=m.getBoundingClientRect(),w=p.left-l,y=p.top-c;i=Math.max(e.width||i,w+p.width),s=Math.max(e.height||s,y+p.height),a.push({svg:m,top:y,left:w})}}if(!a.length)return void A("No SVG found to export",n);1==a.length?o=(new XMLSerializer).serializeToString(a[0].svg):(o="<svg xmlns='http://www.w3.org/2000/svg' version='1.1' width='"+Math.ceil(i)+"px' height='"+Math.ceil(s)+"px'>",a.forEach(function(e){var t=e.svg.cloneNode(!0);t.setAttribute("x",e.left),t.setAttribute("y",e.top),o+=(new XMLSerializer).serializeToString(t)}),o+="</svg>");const v={result:{status:"completed"}};if(e.download){var b=URL.createObjectURL(new Blob([o]));x(b),URL.revokeObjectURL(b)}else v.result.data="data:image/svg+xml;base64,"+S(o);t&&t.postMessage(v),clearTimeout(r),n&&n()}(n),0)}:async function(n){if(!E(n))if(document.implementation.hasFeature("www.http://w3.org/TR/SVG11/feature#Extensibility","1.1")){if(o=function(e){const t=e.cloneNode(!0),n="input[type='checkbox'], input[type='radio']",r=t.querySelectorAll(n);e.querySelectorAll(n).forEach((e,t)=>{const n=r[t];e.checked?n.setAttribute("checked","checked"):n.removeAttribute("checked")});const o="input[type='range'], input[type='text'], input[type='number']",a=t.querySelectorAll(o);e.querySelectorAll(o).forEach((e,t)=>{a[t].setAttribute("value",e.value)});const i="select",s=t.querySelectorAll(i);e.querySelectorAll(i).forEach((e,t)=>{const n=s[t];Array.from(e.options).forEach((e,t)=>{e.selected?n.options[t].setAttribute("selected","selected"):n.options[t].removeAttribute("selected")})});const l="textarea",c=t.querySelectorAll(l);return e.querySelectorAll(l).forEach((e,t)=>{c[t].value=e.value}),t}(document.body),h("cloned_document","cloned document"),!E(n)){for(var a=o.querySelectorAll("script,style,link"),s=0;s<a.length;s++)if(a[s].parentNode.removeChild(a[s]),E(n))return;if(h("stripped_scripts_etc","stripped scripts etc"),!E(n)){try{await Promise.all([(u=o,y(function(e,t){for(var n=document.body.querySelectorAll("canvas"),r=u.querySelectorAll("canvas"),o=0;o<r.length;o++){var a=r[o];if(a.height&&a.width){var i=a.getContext("2d");if(a.getContext("webgl")||a.getContext("experimental-webgl"))t("Sorry, this slide includes WebGL which cannot be snapshotted");else{i.drawImage(n[o],0,0);var s=n[o],l=s.getBoundingClientRect(),c=document.createElement("img");c.width=l.width,c.height=l.height,c.src=a.toDataURL("image/png");const e=window.getComputedStyle(s);for(let t of e)e.getPropertyValue(t)&&c.style.setProperty(t,e.getPropertyValue(t));a.parentNode.insertBefore(c,a),a.style.display="none"}}}e()})),m()])}catch(e){if(e instanceof f)return void A(e.message,n);console.error(e)}var u;try{await Promise.all([y(function(e,t){var n=l.length;function r(){--n<=0&&e()}i.fonts_to_inline=l.length,h("inlining_fonts","inlining fonts",l.length),l.length||e(),l.forEach(function(e){e.url?v(e.url).then(function(t){e.dataURL=t,r()}).catch(function(e){r()}):r()})}),b(o)])}catch(e){if(e instanceof f)return void A(e.message,n);console.error(e)}try{const a=await y(function(t,n){h("serializing_xml","serializing xml");const r=window.getComputedStyle(document.documentElement).getPropertyValue("font-size");var a='<svg xmlns="http://www.w3.org/2000/svg" width="'+(e.width||document.body.clientWidth)+'" height="'+(e.height||document.body.clientHeight)+'" style="font-size:'+r+'"><defs><style type="text/css">';l.forEach(function(e){e.dataURL&&(a+="@font-face { font-family:"+e.family+"; font-weight:"+e.weight+"; font-style:"+e.style+"; unicode-range: "+e.unicode_range+"; src:url("+e.dataURL+"); }")}),a+="</style></defs>";var s=e.transparent_background?"":' style="background:#fff"';a+='<foreignObject width="100%" height="100%"'+s+">"+(new XMLSerializer).serializeToString(o)+"</foreignObject></svg>",i.serialized_xml_length=a.length,h("serialized_xml","serialized xml",a.length);var u=new Image;u.onload=function(){h("svg_image_loaded","svg image loaded"),setTimeout(function(){var r;try{const n=_(u,c,e.scale,e.thumbnail_width,e.thumbnail_height);r={status:"completed"},e.download?x(n):(r.data=n,r.logging=i),t(r)}catch(e){n("Sorry, the snapshot could not be generated")}},0)},u.onerror=function(e){const t=(new DOMParser).parseFromString(a,"image/svg+xml").querySelector("parsererror");n(t?"Snapshot could not be generated due to a parsing error. Please check custom HTML fields for errors and try again. Otherwise, there may be an error in the template.":"Snapshot could not be generated, probably because of an error in the template")},u.src="data:image/svg+xml;base64,"+S(a)});t&&t.postMessage({result:a}),h("finished","finished"),clearTimeout(r),n&&n()}catch(e){A(e instanceof f?e.message:e,n)}}}}else A("Sorry, not supported on your browser",n)};if(MutationObserver&&e.wait_for_animation_ms){const t=document.body,n={attributes:!0,childList:!0,subtree:!0};let r;const o=function(e,t,n){let r,o;return function(){const a=this,i=arguments;clearTimeout(r),r=setTimeout(()=>{e.apply(a,i),clearTimeout(o)},t),n&&!o&&(o=setTimeout(()=>{clearTimeout(r),o=null,e.apply(a,i)},n))}}(e=>{requestAnimationFrame(()=>P()),r.disconnect()},200,e.wait_for_animation_ms);r=new MutationObserver(o),r.observe(t,n),o()}else P();async function P(){window.template.screenshot?window.template.screenshot(e,function(){return new Promise(function(e,t){L(function(n){if(n)return t(n);e()})})}):L()}return{status:"started"}}}();
//# sourceMappingURL=snapshot.js.map

window.addEventListener("message", function(event) {

	var message = event.data;
	var port = event.ports[0];
	if (!port || typeof message !== "object" || message.sender !== "Flourish") return;
	var result = null;
	function assign(target, source) {
		for (var k in source) {
			if (Object.prototype.hasOwnProperty.call(source, k)) target[k] = source[k];
		}
	}
	function deepAssign(target, source, is_destructive) {
		for (var k in source) {
			if (!Object.prototype.hasOwnProperty.call(source, k)) continue;
			if (
				typeof target[k] === "object" && target[k] != null && !Array.isArray(target[k])
				&& typeof source[k] === "object" && source[k] != null && !Array.isArray(source[k])
			) {
				deepAssign(target[k], source[k], is_destructive);
			}
			else target[k] = source[k];
		}
		if (is_destructive) {
			for (var k in target) {
				if (Object.prototype.hasOwnProperty.call(target, k) && !Object.prototype.hasOwnProperty.call(source, k)) delete target[k];
			}
		}
	}
	try {
		var i, a;
		switch(message.method) {
			case "getState":
			result = window.template.state;
			if (message.argument) for (a = message.argument.split("."), i = 0; i < a.length; i++) {
				result = result[a[i]];
			}
			break;

			case "setState":
			deepAssign(window.template.state, message.argument);
			break;

			case "hasData":
			result = !!window.template.data;
			break;

			case "setData":
			assign(window.template.data, message.argument);
			break;

			case "getData":
			result = window.template.data;
			break;

			case "setMetadata":
			if (!window.template.metadata) window.template.metadata = {};
			assign(window.template.metadata, message.argument);
			break;

			case "getMetadata":
			result = window.template.metadata;
			break;

			case "draw":
			window.template.draw();
			break;

			case "update":
			window.template.update();
			break;

			case "snapshot":
			result = window.snapshot(message.argument, port);
			break;

			case "setFixedHeight":
			if (window.Flourish) {
				window.Flourish.fixed_height = message.argument != null;
				window.Flourish.__container_height = message.argument;
				if (window.Flourish.checkHeight) window.Flourish.checkHeight();
			}
			break;

			case "sync":
			var spec = message.argument;
			if (spec.data) {
				assign(window.template.data, spec.data);
			}
			if (spec.metadata) {
				if (!window.template.metadata) window.template.metadata = {};
				assign(window.template.metadata, spec.metadata);
			}
			if (spec.state) {
				deepAssign(window.template.state, spec.state, spec.overwrite_state);
			}
			// only allow draw or update, not both
			if (spec.draw) {
				window.template.draw();
			}
			else if (spec.update) {
				window.template.update();
			}
			result = "success";
			break;
		}

		port.postMessage({result: result});
	}
	catch (e) {
		port.postMessage({error: e.message});
		throw e;
	}
}, false);
</script></body></html>